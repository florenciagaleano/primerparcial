var tT=Object.defineProperty,nT=Object.defineProperties;var rT=Object.getOwnPropertyDescriptors;var _m=Object.getOwnPropertySymbols;var iT=Object.prototype.hasOwnProperty,sT=Object.prototype.propertyIsEnumerable;var Im=(t,e,n)=>e in t?tT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oe=(t,e)=>{for(var n in e||={})iT.call(e,n)&&Im(t,n,e[n]);if(_m)for(var n of _m(e))sT.call(e,n)&&Im(t,n,e[n]);return t},Qe=(t,e)=>nT(t,rT(e));var C=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(d){i(d)}},o=u=>{try{c(n.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())});var wm=null;var tl=1,nl=Symbol("SIGNAL");function ae(t){let e=wm;return wm=t,e}var Em={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function oT(t){if(!(sl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===tl)){if(!t.producerMustRecompute(t)&&!rl(t)){t.dirty=!1,t.lastCleanEpoch=tl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=tl}}function Dm(t){return t&&(t.nextProducerIndex=0),ae(t)}function Tm(t,e){if(ae(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(sl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)il(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function rl(t){Ro(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(oT(n),r!==n.version))return!0}return!1}function bm(t){if(Ro(t),sl(t))for(let e=0;e<t.producerNode.length;e++)il(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function il(t,e){if(aT(t),Ro(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)il(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ro(i),i.producerIndexOfThis[r]=e}}function sl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ro(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function aT(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function cT(){throw new Error}var uT=cT;function Cm(t){uT=t}function H(t){return typeof t=="function"}function Sr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Po=Sr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function kn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(s){e=s instanceof Po?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Am(s)}catch(o){e=e??[],o instanceof Po?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Po(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Am(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&kn(n,e)}remove(e){let{_finalizers:n}=this;n&&kn(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var ol=Se.EMPTY;function Oo(t){return t instanceof Se||t&&"closed"in t&&H(t.remove)&&H(t.add)&&H(t.unsubscribe)}function Am(t){H(t)?t():t.unsubscribe()}var mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Nr={setTimeout(t,e,...n){let{delegate:r}=Nr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Nr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ko(t){Nr.setTimeout(()=>{let{onUnhandledError:e}=mt;if(e)e(t);else throw t})}function Zi(){}var Sm=al("C",void 0,void 0);function Nm(t){return al("E",void 0,t)}function Mm(t){return al("N",t,void 0)}function al(t,e,n){return{kind:t,value:e,error:n}}var Fn=null;function Mr(t){if(mt.useDeprecatedSynchronousErrorHandling){let e=!Fn;if(e&&(Fn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Fn;if(Fn=null,n)throw r}}else t()}function xm(t){mt.useDeprecatedSynchronousErrorHandling&&Fn&&(Fn.errorThrown=!0,Fn.error=t)}var Vn=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Oo(e)&&e.add(this)):this.destination=hT}static create(e,n,r){return new xr(e,n,r)}next(e){this.isStopped?ul(Mm(e),this):this._next(e)}error(e){this.isStopped?ul(Nm(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ul(Sm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lT=Function.prototype.bind;function cl(t,e){return lT.call(t,e)}var ll=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Fo(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Fo(r)}else Fo(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Fo(n)}}},xr=class extends Vn{constructor(e,n,r){super();let i;if(H(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&mt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cl(e.next,s),error:e.error&&cl(e.error,s),complete:e.complete&&cl(e.complete,s)}):i=e}this.destination=new ll(i)}};function Fo(t){mt.useDeprecatedSynchronousErrorHandling?xm(t):ko(t)}function dT(t){throw t}function ul(t,e){let{onStoppedNotification:n}=mt;n&&Nr.setTimeout(()=>n(t,e))}var hT={closed:!0,next:Zi,error:dT,complete:Zi};var Rr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function et(t){return t}function Rm(...t){return dl(t)}function dl(t){return t.length===0?et:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Q=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=pT(n)?n:new xr(n,r,i);return Mr(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Pm(r),new r((i,s)=>{let o=new xr({next:c=>{try{n(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Rr](){return this}pipe(...n){return dl(n)(this)}toPromise(n){return n=Pm(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Pm(t){var e;return(e=t??mt.Promise)!==null&&e!==void 0?e:Promise}function fT(t){return t&&H(t.next)&&H(t.error)&&H(t.complete)}function pT(t){return t&&t instanceof Vn||fT(t)&&Oo(t)}function hl(t){return H(t?.lift)}function re(t){return e=>{if(hl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function J(t,e,n,r,i){return new fl(t,e,n,r,i)}var fl=class extends Vn{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function pl(){return re((t,e)=>{let n=null;t._refCount++;let r=J(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var gl=class extends Q{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,hl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(J(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return pl()(this)}};var Om=Sr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rn=(()=>{class t extends Q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Vo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Om}next(n){Mr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Mr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Mr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ol:(this.currentObservers=null,s.push(n),new Se(()=>{this.currentObservers=null,kn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Q;return n.source=this,n}}return t.create=(e,n)=>new Vo(e,n),t})(),Vo=class extends rn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ol}};var es=class extends rn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ml={now(){return(ml.delegate||Date).now()},delegate:void 0};var Lo=class extends Se{constructor(e,n){super()}schedule(e,n=0){return this}};var ts={setInterval(t,e,...n){let{delegate:r}=ts;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ts;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Pr=class extends Lo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ts.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ts.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,kn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Or=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Or.now=ml.now;var kr=class extends Or{constructor(e,n=Or.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var yl=new kr(Pr);var jo=class extends Pr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Uo=class extends kr{};var vl=new Uo(jo);var ns=new Q(t=>t.complete());function km(t){return t&&H(t.schedule)}function Fm(t){return t[t.length-1]}function Bo(t){return H(Fm(t))?t.pop():void 0}function sn(t){return km(Fm(t))?t.pop():void 0}function _l(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Lm(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(f){try{d(r.next(f))}catch(g){o(g)}}function u(f){try{d(r.throw(f))}catch(g){o(g)}}function d(f){f.done?s(f.value):i(f.value).then(c,u)}d((r=r.apply(t,e||[])).next())})}function Vm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ln(t){return this instanceof Ln?(this.v=t,this):new Ln(t)}function jm(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(_){r[_]&&(i[_]=function(E){return new Promise(function(S,x){s.push([_,E,S,x])>1||c(_,E)})})}function c(_,E){try{u(r[_](E))}catch(S){g(s[0][3],S)}}function u(_){_.value instanceof Ln?Promise.resolve(_.value.v).then(d,f):g(s[0][2],_)}function d(_){c("next",_)}function f(_){c("throw",_)}function g(_,E){_(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Um(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vm=="function"?Vm(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(d){s({value:d,done:c})},o)}}var $o=t=>t&&typeof t.length=="number"&&typeof t!="function";function qo(t){return H(t?.then)}function Ho(t){return H(t[Rr])}function Go(t){return Symbol.asyncIterator&&H(t?.[Symbol.asyncIterator])}function zo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wo=gT();function Ko(t){return H(t?.[Wo])}function Qo(t){return jm(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ln(n.read());if(i)return yield Ln(void 0);yield yield Ln(r)}}finally{n.releaseLock()}})}function Yo(t){return H(t?.getReader)}function De(t){if(t instanceof Q)return t;if(t!=null){if(Ho(t))return mT(t);if($o(t))return yT(t);if(qo(t))return vT(t);if(Go(t))return Bm(t);if(Ko(t))return _T(t);if(Yo(t))return IT(t)}throw zo(t)}function mT(t){return new Q(e=>{let n=t[Rr]();if(H(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yT(t){return new Q(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function vT(t){return new Q(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ko)})}function _T(t){return new Q(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Bm(t){return new Q(e=>{wT(t,e).catch(n=>e.error(n))})}function IT(t){return Bm(Qo(t))}function wT(t,e){var n,r,i,s;return Lm(this,void 0,void 0,function*(){try{for(n=Um(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ye(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function on(t,e=0){return re((n,r)=>{n.subscribe(J(r,i=>Ye(r,t,()=>r.next(i),e),()=>Ye(r,t,()=>r.complete(),e),i=>Ye(r,t,()=>r.error(i),e)))})}function an(t,e=0){return re((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function $m(t,e){return De(t).pipe(an(e),on(e))}function qm(t,e){return De(t).pipe(an(e),on(e))}function Hm(t,e){return new Q(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Gm(t,e){return new Q(n=>{let r;return Ye(n,e,()=>{r=t[Wo](),Ye(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>H(r?.return)&&r.return()})}function Jo(t,e){if(!t)throw new Error("Iterable cannot be null");return new Q(n=>{Ye(n,e,()=>{let r=t[Symbol.asyncIterator]();Ye(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zm(t,e){return Jo(Qo(t),e)}function Wm(t,e){if(t!=null){if(Ho(t))return $m(t,e);if($o(t))return Hm(t,e);if(qo(t))return qm(t,e);if(Go(t))return Jo(t,e);if(Ko(t))return Gm(t,e);if(Yo(t))return zm(t,e)}throw zo(t)}function tt(t,e){return e?Wm(t,e):De(t)}function Xo(...t){let e=sn(t);return tt(t,e)}function ET(t,e){let n=H(t)?t:()=>t,r=i=>i.error(n());return new Q(e?i=>e.schedule(r,0,i):r)}function DT(t){return!!t&&(t instanceof Q||H(t.lift)&&H(t.subscribe))}var jn=Sr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function _e(t,e){return re((n,r)=>{let i=0;n.subscribe(J(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:TT}=Array;function bT(t,e){return TT(e)?t(...e):t(e)}function Zo(t){return _e(e=>bT(t,e))}var{isArray:CT}=Array,{getPrototypeOf:AT,prototype:ST,keys:NT}=Object;function ea(t){if(t.length===1){let e=t[0];if(CT(e))return{args:e,keys:null};if(MT(e)){let n=NT(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function MT(t){return t&&typeof t=="object"&&AT(t)===ST}function ta(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xT(...t){let e=sn(t),n=Bo(t),{args:r,keys:i}=ea(t);if(r.length===0)return tt([],e);let s=new Q(RT(r,e,i?o=>ta(i,o):et));return n?s.pipe(Zo(n)):s}function RT(t,e,n=et){return r=>{Km(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)Km(e,()=>{let d=tt(t[u],e),f=!1;d.subscribe(J(r,g=>{s[u]=g,f||(f=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Km(t,e,n){t?Ye(n,t,e):e()}function Qm(t,e,n,r,i,s,o,c){let u=[],d=0,f=0,g=!1,_=()=>{g&&!u.length&&!d&&e.complete()},E=x=>d<r?S(x):u.push(x),S=x=>{s&&e.next(x),d++;let N=!1;De(n(x,f++)).subscribe(J(e,P=>{i?.(P),s?E(P):e.next(P)},()=>{N=!0},void 0,()=>{if(N)try{for(d--;u.length&&d<r;){let P=u.shift();o?Ye(e,o,()=>S(P)):S(P)}_()}catch(P){e.error(P)}}))};return t.subscribe(J(e,E,()=>{g=!0,_()})),()=>{c?.()}}function Un(t,e,n=1/0){return H(e)?Un((r,i)=>_e((s,o)=>e(r,s,i,o))(De(t(r,i))),n):(typeof e=="number"&&(n=e),re((r,i)=>Qm(r,i,t,n)))}function Ym(t=1/0){return Un(et,t)}function Jm(){return Ym(1)}function na(...t){return Jm()(tt(t,sn(t)))}function PT(t){return new Q(e=>{De(t()).subscribe(e)})}function Il(...t){let e=Bo(t),{args:n,keys:r}=ea(t),i=new Q(s=>{let{length:o}=n;if(!o){s.complete();return}let c=new Array(o),u=o,d=o;for(let f=0;f<o;f++){let g=!1;De(n[f]).subscribe(J(s,_=>{g||(g=!0,d--),c[f]=_},()=>u--,void 0,()=>{(!u||!g)&&(d||s.next(r?ta(r,c):c),s.complete())}))}});return e?i.pipe(Zo(e)):i}function cn(t,e){return re((n,r)=>{let i=0;n.subscribe(J(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Xm(t){return re((e,n)=>{let r=null,i=!1,s;r=e.subscribe(J(n,void 0,void 0,o=>{s=De(t(o,Xm(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Zm(t,e,n,r,i){return(s,o)=>{let c=n,u=e,d=0;s.subscribe(J(o,f=>{let g=d++;u=c?t(u,f,g):(c=!0,f),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function wl(t,e){return H(e)?Un(t,e,1):Un(t,1)}function rs(t){return re((e,n)=>{let r=!1;e.subscribe(J(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function El(t){return t<=0?()=>ns:re((e,n)=>{let r=0;e.subscribe(J(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function OT(t){return _e(()=>t)}function ra(t=kT){return re((e,n)=>{let r=!1;e.subscribe(J(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function kT(){return new jn}function Dl(t){return re((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ey(t,e){let n=arguments.length>=2;return r=>r.pipe(t?cn((i,s)=>t(i,s,r)):et,El(1),n?rs(e):ra(()=>new jn))}function Tl(t){return t<=0?()=>ns:re((e,n)=>{let r=[];e.subscribe(J(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function FT(t,e){let n=arguments.length>=2;return r=>r.pipe(t?cn((i,s)=>t(i,s,r)):et,Tl(1),n?rs(e):ra(()=>new jn))}function ty(t,e){return re(Zm(t,e,arguments.length>=2,!0))}function ny(...t){let e=sn(t);return re((n,r)=>{(e?na(t,n,e):na(t,n)).subscribe(r)})}function bl(t,e){return re((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(J(r,u=>{i?.unsubscribe();let d=0,f=s++;De(t(u,f)).subscribe(i=J(r,g=>r.next(e?e(u,g,f,d++):g),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function VT(t){return re((e,n)=>{De(t).subscribe(J(n,()=>n.complete(),Zi)),!n.closed&&e.subscribe(n)})}function ia(t,e,n){let r=H(t)||e||n?{next:t,error:e,complete:n}:t;return r?re((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(J(s,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),s.error(u)},()=>{var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):et}var Uy="https://g.co/ng/security#xss",te=class extends Error{constructor(e,n){super(Nd(e,n)),this.code=e}};function Nd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function gs(t){return{toString:t}.toString()}var sa="__parameters__";function LT(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function By(t,e,n){return gs(()=>{let r=LT(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,d,f){let g=u.hasOwnProperty(sa)?u[sa]:Object.defineProperty(u,sa,{value:[]})[sa];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var jr=globalThis;function he(t){for(let e in t)if(t[e]===he)return e;throw Error("Could not find renamed property on target object.")}function jT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function We(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(We).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function ry(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var UT=he({__forward_ref__:he});function ut(t){return t.__forward_ref__=ut,t.toString=function(){return We(this())},t}function ze(t){return $y(t)?t():t}function $y(t){return typeof t=="function"&&t.hasOwnProperty(UT)&&t.__forward_ref__===ut}function oe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Fa(t){return iy(t,qy)||iy(t,Hy)}function Oj(t){return Fa(t)!==null}function iy(t,e){return t.hasOwnProperty(e)?t[e]:null}function BT(t){let e=t&&(t[qy]||t[Hy]);return e||null}function sy(t){return t&&(t.hasOwnProperty(oy)||t.hasOwnProperty($T))?t[oy]:null}var qy=he({\u0275prov:he}),oy=he({\u0275inj:he}),Hy=he({ngInjectableDef:he}),$T=he({ngInjectorDef:he}),W=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=oe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Gy(t){return t&&!!t.\u0275providers}var qT=he({\u0275cmp:he}),HT=he({\u0275dir:he}),GT=he({\u0275pipe:he}),zT=he({\u0275mod:he}),pa=he({\u0275fac:he}),is=he({__NG_ELEMENT_ID__:he}),ay=he({__NG_ENV_ID__:he});function Va(t){return typeof t=="string"?t:t==null?"":String(t)}function WT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Va(t)}function KT(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new te(-200,t)}function Md(t,e){throw new te(-201,!1)}var ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ee||{}),Bl;function zy(){return Bl}function ot(t){let e=Bl;return Bl=t,e}function Wy(t,e,n){let r=Fa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ee.Optional)return null;if(e!==void 0)return e;Md(t,"Injector")}var QT={},ss=QT,$l="__NG_DI_FLAG__",ga="ngTempTokenPath",YT="ngTokenPath",JT=/\n/gm,XT="\u0275",cy="__source",Ur;function ZT(){return Ur}function un(t){let e=Ur;return Ur=t,e}function eb(t,e=ee.Default){if(Ur===void 0)throw new te(-203,!1);return Ur===null?Wy(t,void 0,e):Ur.get(t,e&ee.Optional?null:void 0,e)}function ge(t,e=ee.Default){return(zy()||eb)(ze(t),e)}function le(t,e=ee.Default){return ge(t,La(e))}function La(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ql(t){let e=[];for(let n=0;n<t.length;n++){let r=ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,s=ee.Default;for(let o=0;o<r.length;o++){let c=r[o],u=tb(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(ge(i,s))}else e.push(ge(r))}return e}function Ky(t,e){return t[$l]=e,t.prototype[$l]=e,t}function tb(t){return t[$l]}function nb(t,e,n,r){let i=t[ga];throw e[cy]&&i.unshift(e[cy]),t.message=rb(`
`+t.message,i,n,r),t[YT]=i,t[ga]=null,t}function rb(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==XT?t.slice(2):t;let i=We(e);if(Array.isArray(e))i=e.map(We).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):We(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(JT,`
  `)}`}var $t=Ky(By("Optional"),8);var ib=Ky(By("SkipSelf"),4);function $r(t,e){let n=t.hasOwnProperty(pa);return n?t[pa]:null}function xd(t,e){t.forEach(n=>Array.isArray(n)?xd(n,e):e(n))}function Qy(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ma(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function sb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function ob(t,e,n){let r=ms(t,e);return r>=0?t[r|1]=n:(r=~r,sb(t,r,e,n)),r}function Cl(t,e){let n=ms(t,e);if(n>=0)return t[n|1]}function ms(t,e){return ab(t,e,1)}function ab(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var qr={},at=[],ya=new W(""),Yy=new W("",-1),Jy=new W(""),va=class{get(e,n=ss){if(n===ss){let r=new Error(`NullInjectorError: No provider for ${We(e)}!`);throw r.name="NullInjectorError",r}return n}},Xy=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Xy||{}),os=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(os||{}),ke=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ke||{});function cb(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Hl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];lb(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function ub(t){return t===3||t===4||t===6}function lb(t){return t.charCodeAt(0)===64}function as(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?uy(t,n,i,null,e[++r]):uy(t,n,i,null,null))}}return t}function uy(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Zy="ng-template";function db(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&cb(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Rd(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Rd(t){return t.type===4&&t.value!==Zy}function hb(t,e,n){let r=t.type===4&&!n?Zy:t.value;return e===r}function fb(t,e,n){let r=4,i=t.attrs,s=i!==null?mb(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!yt(r)&&!yt(u))return!1;if(o&&yt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!hb(t,u,n)||u===""&&e.length===1){if(yt(r))return!1;o=!0}}else if(r&8){if(i===null||!db(t,i,u,n)){if(yt(r))return!1;o=!0}}else{let d=e[++c],f=pb(u,i,Rd(t),n);if(f===-1){if(yt(r))return!1;o=!0;continue}if(d!==""){let g;if(f>s?g="":g=i[f+1].toLowerCase(),r&2&&d!==g){if(yt(r))return!1;o=!0}}}}return yt(r)||o}function yt(t){return(t&1)===0}function pb(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return yb(e,t)}function gb(t,e,n=!1){for(let r=0;r<e.length;r++)if(fb(t,e[r],n))return!0;return!1}function mb(t){for(let e=0;e<t.length;e++){let n=t[e];if(ub(n))return e}return t.length}function yb(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ly(t,e){return t?":not("+e.trim()+")":e}function vb(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!yt(o)&&(e+=ly(s,i),i=""),r=o,s=s||!yt(r);n++}return i!==""&&(e+=ly(s,i)),e}function _b(t){return t.map(vb).join(",")}function Ib(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!yt(i))break;i=s}r++}return{attrs:e,classes:n}}function kj(t){return gs(()=>{let e=rv(t),n=Qe(Oe({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Xy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||os.Emulated,styles:t.styles||at,_:null,schemas:t.schemas||null,tView:null,id:""});iv(n);let r=t.dependencies;return n.directiveDefs=hy(r,!1),n.pipeDefs=hy(r,!0),n.id=Tb(n),n})}function wb(t){return qn(t)||ev(t)}function Eb(t){return t!==null}function Zn(t){return gs(()=>({type:t.type,bootstrap:t.bootstrap||at,declarations:t.declarations||at,imports:t.imports||at,exports:t.exports||at,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function dy(t,e){if(t==null)return qr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c=ke.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=c!==ke.None?[r,c]:r,e[s]=o):n[s]=r}return n}function be(t){return gs(()=>{let e=rv(t);return iv(e),e})}function qn(t){return t[qT]||null}function ev(t){return t[HT]||null}function tv(t){return t[GT]||null}function Db(t){let e=qn(t)||ev(t)||tv(t);return e!==null?e.standalone:!1}function nv(t,e){let n=t[zT]||null;if(!n&&e===!0)throw new Error(`Type ${We(t)} does not have '\u0275mod' property.`);return n}function rv(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||qr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||at,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dy(t.inputs,e),outputs:dy(t.outputs),debugInfo:null}}function iv(t){t.features?.forEach(e=>e(t))}function hy(t,e){if(!t)return null;let n=e?tv:wb;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Eb)}function Tb(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function er(t){return{\u0275providers:t}}function bb(...t){return{\u0275providers:sv(!0,t),\u0275fromNgModule:!0}}function sv(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return xd(e,o=>{let c=o;Gl(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&ov(i,s),n}function ov(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Pd(i,s=>{e(s,r)})}}function Gl(t,e,n,r){if(t=ze(t),!t)return!1;let i=null,s=sy(t),o=!s&&qn(t);if(!s&&!o){let u=t.ngModule;if(s=sy(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of u)Gl(d,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let d;try{xd(s.imports,f=>{Gl(f,e,n,r)&&(d||=[],d.push(f))})}finally{}d!==void 0&&ov(d,e)}if(!c){let d=$r(i)||(()=>new i);e({provide:i,useFactory:d,deps:at},i),e({provide:Jy,useValue:i,multi:!0},i),e({provide:ya,useValue:()=>ge(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let d=t;Pd(u,f=>{e(f,d)})}}else return!1;return i!==t&&t.providers!==void 0}function Pd(t,e){for(let n of t)Gy(n)&&(n=n.\u0275providers),Array.isArray(n)?Pd(n,e):e(n)}var Cb=he({provide:String,useValue:he});function av(t){return t!==null&&typeof t=="object"&&Cb in t}function Ab(t){return!!(t&&t.useExisting)}function Sb(t){return!!(t&&t.useFactory)}function Hr(t){return typeof t=="function"}function Nb(t){return!!t.useClass}var cv=new W(""),ua={},Mb={},Al;function Od(){return Al===void 0&&(Al=new va),Al}var Ct=class{},cs=class extends Ct{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wl(e,o=>this.processProvider(o)),this.records.set(Yy,Fr(void 0,this)),i.has("environment")&&this.records.set(Ct,Fr(void 0,this));let s=this.records.get(cv);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Jy,at,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ae(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=un(this),r=ot(void 0),i;try{return e()}finally{un(n),ot(r)}}get(e,n=ss,r=ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ay))return e[ay](this);r=La(r);let i,s=un(this),o=ot(void 0);try{if(!(r&ee.SkipSelf)){let u=this.records.get(e);if(u===void 0){let d=kb(e)&&Fa(e);d&&this.injectableDefInScope(d)?u=Fr(zl(e),ua):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&ee.Self?Od():this.parent;return n=r&ee.Optional&&n===ss?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[ga]=c[ga]||[]).unshift(We(e)),s)throw c;return nb(c,e,"R3InjectorError",this.source)}else throw c}finally{ot(o),un(s)}}resolveInjectorInitializers(){let e=ae(null),n=un(this),r=ot(void 0),i;try{let s=this.get(ya,at,ee.Self);for(let o of s)o()}finally{un(n),ot(r),ae(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(We(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(e){e=ze(e);let n=Hr(e)?e:ze(e&&e.provide),r=Rb(e);if(!Hr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Fr(void 0,ua,!0),i.factory=()=>ql(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ae(null);try{return n.value===ua&&(n.value=Mb,n.value=n.factory()),typeof n.value=="object"&&n.value&&Ob(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ae(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zl(t){let e=Fa(t),n=e!==null?e.factory:$r(t);if(n!==null)return n;if(t instanceof W)throw new te(204,!1);if(t instanceof Function)return xb(t);throw new te(204,!1)}function xb(t){if(t.length>0)throw new te(204,!1);let n=BT(t);return n!==null?()=>n.factory(t):()=>new t}function Rb(t){if(av(t))return Fr(void 0,t.useValue);{let e=uv(t);return Fr(e,ua)}}function uv(t,e,n){let r;if(Hr(t)){let i=ze(t);return $r(i)||zl(i)}else if(av(t))r=()=>ze(t.useValue);else if(Sb(t))r=()=>t.useFactory(...ql(t.deps||[]));else if(Ab(t))r=()=>ge(ze(t.useExisting));else{let i=ze(t&&(t.useClass||t.provide));if(Pb(t))r=()=>new i(...ql(t.deps));else return $r(i)||zl(i)}return r}function Fr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Pb(t){return!!t.deps}function Ob(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function kb(t){return typeof t=="function"||typeof t=="object"&&t instanceof W}function Wl(t,e){for(let n of t)Array.isArray(n)?Wl(n,e):n&&Gy(n)?Wl(n.\u0275providers,e):e(n)}function lv(t,e){t instanceof cs&&t.assertNotDestroyed();let n,r=un(t),i=ot(void 0);try{return e()}finally{un(r),ot(i)}}function Fb(){return zy()!==void 0||ZT()!=null}function Vb(t){return typeof t=="function"}var qt=0,ne=1,$=2,Be=3,vt=4,wt=5,_a=6,us=7,_t=8,Gr=9,It=10,Te=11,ls=12,fy=13,Yr=14,At=15,ja=16,Vr=17,zr=18,Ua=19,dv=20,ln=21,Sl=22,Hn=23,dn=25,hv=1;var Gn=7,Ia=8,wa=9,ct=10,kd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(kd||{});function Bn(t){return Array.isArray(t)&&typeof t[hv]=="object"}function Ht(t){return Array.isArray(t)&&t[hv]===!0}function fv(t){return(t.flags&4)!==0}function Ba(t){return t.componentOffset>-1}function Fd(t){return(t.flags&1)===1}function hn(t){return!!t.template}function Lb(t){return(t[$]&512)!==0}var Kl=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function pv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function tr(){return gv}function gv(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ub),jb}tr.ngInherit=!0;function jb(){let t=yv(this),e=t?.current;if(e){let n=t.previous;if(n===qr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ub(t,e,n,r,i){let s=this.declaredInputs[r],o=yv(t)||Bb(t,{previous:qr,current:null}),c=o.current||(o.current={}),u=o.previous,d=u[s];c[s]=new Kl(d&&d.currentValue,n,u===qr),pv(t,e,i,n)}var mv="__ngSimpleChanges__";function yv(t){return t[mv]||null}function Bb(t,e){return t[mv]=e}var py=null;var Tt=function(t,e,n){py?.(t,e,n)},$b="svg",qb="math",Hb=!1;function Gb(){return Hb}function St(t){for(;Array.isArray(t);)t=t[qt];return t}function vv(t,e){return St(e[t])}function lt(t,e){return St(e[t.index])}function _v(t,e){return t.data[e]}function pn(t,e){let n=e[t];return Bn(n)?n:n[qt]}function Vd(t){return(t[$]&128)===128}function zb(t){return Ht(t[Be])}function Ea(t,e){return e==null?null:t[e]}function Iv(t){t[Vr]=0}function Wb(t){t[$]&1024||(t[$]|=1024,Vd(t)&&ds(t))}function Kb(t,e){for(;t>0;)e=e[Yr],t--;return e}function Ld(t){return!!(t[$]&9216||t[Hn]?.dirty)}function Ql(t){t[It].changeDetectionScheduler?.notify(1),Ld(t)?ds(t):t[$]&64&&(Gb()?(t[$]|=1024,ds(t)):t[It].changeDetectionScheduler?.notify())}function ds(t){t[It].changeDetectionScheduler?.notify();let e=hs(t);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!Vd(e)));)e=hs(e)}function wv(t,e){if((t[$]&256)===256)throw new te(911,!1);t[ln]===null&&(t[ln]=[]),t[ln].push(e)}function Qb(t,e){if(t[ln]===null)return;let n=t[ln].indexOf(e);n!==-1&&t[ln].splice(n,1)}function hs(t){let e=t[Be];return Ht(e)?e[Be]:e}var Y={lFrame:Sv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Yb(){return Y.lFrame.elementDepthCount}function Jb(){Y.lFrame.elementDepthCount++}function Xb(){Y.lFrame.elementDepthCount--}function Ev(){return Y.bindingsEnabled}function Zb(){return Y.skipHydrationRootTNode!==null}function eC(t){return Y.skipHydrationRootTNode===t}function tC(){Y.skipHydrationRootTNode=null}function fe(){return Y.lFrame.lView}function Je(){return Y.lFrame.tView}function Fj(t){return Y.lFrame.contextLView=t,t[_t]}function Vj(t){return Y.lFrame.contextLView=null,t}function rt(){let t=Dv();for(;t!==null&&t.type===64;)t=t.parent;return t}function Dv(){return Y.lFrame.currentTNode}function nC(){let t=Y.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ys(t,e){let n=Y.lFrame;n.currentTNode=t,n.isParent=e}function Tv(){return Y.lFrame.isParent}function rC(){Y.lFrame.isParent=!1}function iC(){let t=Y.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function sC(t){return Y.lFrame.bindingIndex=t}function $a(){return Y.lFrame.bindingIndex++}function oC(t){let e=Y.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function aC(){return Y.lFrame.inI18n}function cC(t,e){let n=Y.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yl(e)}function uC(){return Y.lFrame.currentDirectiveIndex}function Yl(t){Y.lFrame.currentDirectiveIndex=t}function lC(t){let e=Y.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function bv(t){Y.lFrame.currentQueryIndex=t}function dC(t){let e=t[ne];return e.type===2?e.declTNode:e.type===1?t[wt]:null}function Cv(t,e,n){if(n&ee.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ee.Host);)if(i=dC(s),i===null||(s=s[Yr],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=Y.lFrame=Av();return r.currentTNode=e,r.lView=t,!0}function jd(t){let e=Av(),n=t[ne];Y.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Av(){let t=Y.lFrame,e=t===null?null:t.child;return e===null?Sv(t):e}function Sv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Nv(){let t=Y.lFrame;return Y.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Mv=Nv;function Ud(){let t=Nv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function hC(t){return(Y.lFrame.contextLView=Kb(t,Y.lFrame.contextLView))[_t]}function Jr(){return Y.lFrame.selectedIndex}function zn(t){Y.lFrame.selectedIndex=t}function qa(){let t=Y.lFrame;return _v(t.tView,t.selectedIndex)}function fC(){return Y.lFrame.currentNamespace}var xv=!0;function Bd(){return xv}function $d(t){xv=t}function pC(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=gv(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function qd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function la(t,e,n){Rv(t,e,3,n)}function da(t,e,n,r){(t[$]&3)===n&&Rv(t,e,n,r)}function Nl(t,e){let n=t[$];(n&3)===e&&(n&=16383,n+=1,t[$]=n)}function Rv(t,e,n,r){let i=r!==void 0?t[Vr]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Vr]+=65536),(c<s||s==-1)&&(gC(t,n,e,u),t[Vr]=(t[Vr]&4294901760)+u+2),u++}function gy(t,e){Tt(4,t,e);let n=ae(null);try{e.call(t)}finally{ae(n),Tt(5,t,e)}}function gC(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[$]>>14<t[Vr]>>16&&(t[$]&3)===e&&(t[$]+=16384,gy(c,s)):gy(c,s)}var Br=-1,Wn=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function mC(t){return t instanceof Wn}function yC(t){return(t.flags&8)!==0}function vC(t){return(t.flags&16)!==0}function Pv(t){return t!==Br}function Da(t){return t&32767}function _C(t){return t>>16}function Ta(t,e){let n=_C(t),r=e;for(;n>0;)r=r[Yr],n--;return r}var Jl=!0;function my(t){let e=Jl;return Jl=t,e}var IC=256,Ov=IC-1,kv=5,wC=0,bt={};function EC(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(is)&&(r=n[is]),r==null&&(r=n[is]=wC++);let i=r&Ov,s=1<<i;e.data[t+(i>>kv)]|=s}function ba(t,e){let n=Fv(t,e);if(n!==-1)return n;let r=e[ne];r.firstCreatePass&&(t.injectorIndex=e.length,Ml(r.data,t),Ml(e,null),Ml(r.blueprint,null));let i=Hd(t,e),s=t.injectorIndex;if(Pv(i)){let o=Da(i),c=Ta(i,e),u=c[ne].data;for(let d=0;d<8;d++)e[s+d]=c[o+d]|u[o+d]}return e[s+8]=i,s}function Ml(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fv(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Hd(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Bv(i),r===null)return Br;if(n++,i=i[Yr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Br}function Xl(t,e,n){EC(t,e,n)}function Vv(t,e,n){if(n&ee.Optional||t!==void 0)return t;Md(e,"NodeInjector")}function Lv(t,e,n,r){if(n&ee.Optional&&r===void 0&&(r=null),!(n&(ee.Self|ee.Host))){let i=t[Gr],s=ot(void 0);try{return i?i.get(e,r,n&ee.Optional):Wy(e,r,n&ee.Optional)}finally{ot(s)}}return Vv(r,e,n)}function jv(t,e,n,r=ee.Default,i){if(t!==null){if(e[$]&2048&&!(r&ee.Self)){let o=AC(t,e,n,r,bt);if(o!==bt)return o}let s=Uv(t,e,n,r,bt);if(s!==bt)return s}return Lv(e,n,r,i)}function Uv(t,e,n,r,i){let s=bC(n);if(typeof s=="function"){if(!Cv(e,t,r))return r&ee.Host?Vv(i,n,r):Lv(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ee.Optional))Md(n);else return o}finally{Mv()}}else if(typeof s=="number"){let o=null,c=Fv(t,e),u=Br,d=r&ee.Host?e[At][wt]:null;for((c===-1||r&ee.SkipSelf)&&(u=c===-1?Hd(t,e):e[c+8],u===Br||!vy(r,!1)?c=-1:(o=e[ne],c=Da(u),e=Ta(u,e)));c!==-1;){let f=e[ne];if(yy(s,c,f.data)){let g=DC(c,e,n,o,r,d);if(g!==bt)return g}u=e[c+8],u!==Br&&vy(r,e[ne].data[c+8]===d)&&yy(s,c,e)?(o=f,c=Da(u),e=Ta(u,e)):c=-1}}return i}function DC(t,e,n,r,i,s){let o=e[ne],c=o.data[t+8],u=r==null?Ba(c)&&Jl:r!=o&&(c.type&3)!==0,d=i&ee.Host&&s===c,f=TC(c,o,n,u,d);return f!==null?Wr(e,o,f,c):bt}function TC(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,u=t.directiveStart,d=t.directiveEnd,f=s>>20,g=r?c:c+f,_=i?c+f:d;for(let E=g;E<_;E++){let S=o[E];if(E<u&&n===S||E>=u&&S.type===n)return E}if(i){let E=o[u];if(E&&hn(E)&&E.type===n)return u}return null}function Wr(t,e,n,r){let i=t[n],s=e.data;if(mC(i)){let o=i;o.resolving&&KT(WT(s[n]));let c=my(o.canSeeViewProviders);o.resolving=!0;let u,d=o.injectImpl?ot(o.injectImpl):null,f=Cv(t,r,ee.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&pC(n,s[n],e)}finally{d!==null&&ot(d),my(c),o.resolving=!1,Mv()}}return i}function bC(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(is)?t[is]:void 0;return typeof e=="number"?e>=0?e&Ov:CC:e}function yy(t,e,n){let r=1<<t;return!!(n[e+(t>>kv)]&r)}function vy(t,e){return!(t&ee.Self)&&!(t&ee.Host&&e)}var $n=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return jv(this._tNode,this._lView,e,La(r),n)}};function CC(){return new $n(rt(),fe())}function vs(t){return gs(()=>{let e=t.prototype.constructor,n=e[pa]||Zl(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[pa]||Zl(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Zl(t){return $y(t)?()=>{let e=Zl(ze(t));return e&&e()}:$r(t)}function AC(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[$]&2048&&!(o[$]&512);){let c=Uv(s,o,n,r|ee.Self,bt);if(c!==bt)return c;let u=s.parent;if(!u){let d=o[dv];if(d){let f=d.get(n,bt,r);if(f!==bt)return f}u=Bv(o),o=o[Yr]}s=u}return i}function Bv(t){let e=t[ne],n=e.type;return n===2?e.declTNode:n===1?t[wt]:null}function _y(t,e=null,n=null,r){let i=$v(t,e,n,r);return i.resolveInjectorInitializers(),i}function $v(t,e=null,n=null,r,i=new Set){let s=[n||at,bb(t)];return r=r||(typeof t=="object"?void 0:We(t)),new cs(s,e||Od(),r||null,i)}var Gt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return _y({name:""},i,r,"");{let s=r.name??"";return _y({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=ss,e.NULL=new va,e.\u0275prov=oe({token:e,providedIn:"any",factory:()=>ge(Yy)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var SC="ngOriginalError";function xl(t){return t[SC]}var Kr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&xl(e);for(;n&&xl(n);)n=xl(n);return n||null}},qv=new W("",{providedIn:"root",factory:()=>le(Kr).handleError.bind(void 0)}),Hv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=NC,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),ed=class extends Hv{constructor(e){super(),this._lView=e}onDestroy(e){return wv(this._lView,e),()=>Qb(this._lView,e)}};function NC(){return new ed(fe())}function MC(){return Ha(rt(),fe())}function Ha(t,e){return new gn(lt(t,e))}var gn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=MC;let t=e;return t})();var td=class extends rn{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Fb()&&(this.destroyRef=le(Hv,{optional:!0})??void 0)}emit(e){let n=ae(null);try{super.next(e)}finally{ae(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Rl(s),i&&(i=Rl(i)),o&&(o=Rl(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Se&&e.add(c),c}};function Rl(t){return e=>{setTimeout(t,void 0,e)}}var nt=td;function Gv(t){return(t.flags&128)===128}var zv=new Map,xC=0;function RC(){return xC++}function PC(t){zv.set(t[Ua],t)}function OC(t){zv.delete(t[Ua])}var Iy="__ngContext__";function Kn(t,e){Bn(e)?(t[Iy]=e[Ua],PC(e)):t[Iy]=e}function Wv(t){return Qv(t[ls])}function Kv(t){return Qv(t[vt])}function Qv(t){for(;t!==null&&!Ht(t);)t=t[vt];return t}var nd;function Lj(t){nd=t}function kC(){if(nd!==void 0)return nd;if(typeof document<"u")return document;throw new te(210,!1)}var jj=new W("",{providedIn:"root",factory:()=>FC}),FC="ng",VC=new W(""),_s=new W("",{providedIn:"platform",factory:()=>"unknown"});var Uj=new W("",{providedIn:"root",factory:()=>kC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var LC="h",jC="b";var UC=()=>null;function Gd(t,e,n=!1){return UC(t,e,n)}var Yv=!1,BC=new W("",{providedIn:"root",factory:()=>Yv});var oa;function $C(){if(oa===void 0&&(oa=null,jr.trustedTypes))try{oa=jr.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return oa}function qC(t){return $C()?.createScriptURL(t)||t}var Ca=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Uy})`}};function zd(t){return t instanceof Ca?t.changingThisBreaksApplicationSecurity:t}function HC(t,e){let n=GC(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Uy})`)}return n===e}function GC(t){return t instanceof Ca&&t.getTypeName()||null}var zC=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function WC(t){return t=String(t),t.match(zC)?t:"unsafe:"+t}var Jv=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Jv||{});function Bj(t){let e=KC();return e?e.sanitize(Jv.URL,t)||"":HC(t,"URL")?zd(t):WC(Va(t))}function $j(t){return qC(t[0])}function KC(){let t=fe();return t&&t[It].sanitizer}function Xv(t){return t instanceof Function?t():t}var Aa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Aa||{}),QC;function Wd(t,e){return QC(t,e)}function Lr(t,e,n,r,i){if(r!=null){let s,o=!1;Ht(r)?s=r:Bn(r)&&(o=!0,r=r[qt]);let c=St(r);t===0&&n!==null?i==null?r_(e,n,c):Sa(e,n,c,i||null,!0):t===1&&n!==null?Sa(e,n,c,i||null,!0):t===2?h0(e,c,o):t===3&&e.destroyNode(c),s!=null&&p0(e,t,s,n,i)}}function YC(t,e){return t.createText(e)}function JC(t,e,n){t.setValue(e,n)}function Zv(t,e,n){return t.createElement(e,n)}function XC(t,e){e_(t,e),e[qt]=null,e[wt]=null}function ZC(t,e,n,r,i,s){r[qt]=i,r[wt]=e,Ga(t,r,n,1,i,s)}function e_(t,e){e[It].changeDetectionScheduler?.notify(1),Ga(t,e,e[Te],2,null,null)}function e0(t){let e=t[ls];if(!e)return Pl(t[ne],t);for(;e;){let n=null;if(Bn(e))n=e[ls];else{let r=e[ct];r&&(n=r)}if(!n){for(;e&&!e[vt]&&e!==t;)Bn(e)&&Pl(e[ne],e),e=e[Be];e===null&&(e=t),Bn(e)&&Pl(e[ne],e),n=e&&e[vt]}e=n}}function t0(t,e,n,r){let i=ct+r,s=n.length;r>0&&(n[i-1][vt]=e),r<s-ct?(e[vt]=n[i],Qy(n,ct+r,e)):(n.push(e),e[vt]=null),e[Be]=n;let o=e[ja];o!==null&&n!==o&&n0(o,e);let c=e[zr];c!==null&&c.insertView(t),Ql(e),e[$]|=128}function n0(t,e){let n=t[wa],i=e[Be][Be][At];e[At]!==i&&(t[$]|=kd.HasTransplantedViews),n===null?t[wa]=[e]:n.push(e)}function t_(t,e){let n=t[wa],r=n.indexOf(e);n.splice(r,1)}function rd(t,e){if(t.length<=ct)return;let n=ct+e,r=t[n];if(r){let i=r[ja];i!==null&&i!==t&&t_(i,r),e>0&&(t[n-1][vt]=r[vt]);let s=ma(t,ct+e);XC(r[ne],r);let o=s[zr];o!==null&&o.detachView(s[ne]),r[Be]=null,r[vt]=null,r[$]&=-129}return r}function n_(t,e){if(!(e[$]&256)){let n=e[Te];n.destroyNode&&Ga(t,e,n,3,null,null),e0(e)}}function Pl(t,e){if(e[$]&256)return;let n=ae(null);try{e[$]&=-129,e[$]|=256,e[Hn]&&bm(e[Hn]),i0(t,e),r0(t,e),e[ne].type===1&&e[Te].destroy();let r=e[ja];if(r!==null&&Ht(e[Be])){r!==e[Be]&&t_(r,e);let i=e[zr];i!==null&&i.detachView(t)}OC(e)}finally{ae(n)}}function r0(t,e){let n=t.cleanup,r=e[us];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[us]=null);let i=e[ln];if(i!==null){e[ln]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function i0(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Wn)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];Tt(4,c,u);try{u.call(c)}finally{Tt(5,c,u)}}else{Tt(4,i,s);try{s.call(i)}finally{Tt(5,i,s)}}}}}function s0(t,e,n){return o0(t,e.parent,n)}function o0(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[qt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===os.None||s===os.Emulated)return null}return lt(r,n)}}function Sa(t,e,n,r,i){t.insertBefore(e,n,r,i)}function r_(t,e,n){t.appendChild(e,n)}function wy(t,e,n,r,i){r!==null?Sa(t,e,n,r,i):r_(t,e,n)}function a0(t,e,n,r){t.removeChild(e,n,r)}function Kd(t,e){return t.parentNode(e)}function c0(t,e){return t.nextSibling(e)}function u0(t,e,n){return d0(t,e,n)}function l0(t,e,n){return t.type&40?lt(t,n):null}var d0=l0,Ey;function Qd(t,e,n,r){let i=s0(t,r,e),s=e[Te],o=r.parent||e[wt],c=u0(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)wy(s,i,n[u],c,!1);else wy(s,i,n,c,!1);Ey!==void 0&&Ey(s,r,e,n,i)}function ha(t,e){if(e!==null){let n=e.type;if(n&3)return lt(e,t);if(n&4)return id(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ha(t,r);{let i=t[e.index];return Ht(i)?id(-1,i):St(i)}}else{if(n&32)return Wd(e,t)()||St(t[e.index]);{let r=i_(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=hs(t[At]);return ha(i,r)}else return ha(t,e.next)}}}return null}function i_(t,e){if(e!==null){let r=t[At][wt],i=e.projection;return r.projection[i]}return null}function id(t,e){let n=ct+t+1;if(n<e.length){let r=e[n],i=r[ne].firstChild;if(i!==null)return ha(r,i)}return e[Gn]}function h0(t,e,n){let r=Kd(t,e);r&&a0(t,r,e,n)}function Yd(t,e,n,r,i,s,o){for(;n!=null;){let c=r[n.index],u=n.type;if(o&&e===0&&(c&&Kn(St(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Yd(t,e,n.child,r,i,s,!1),Lr(e,t,i,c,s);else if(u&32){let d=Wd(n,r),f;for(;f=d();)Lr(e,t,i,f,s);Lr(e,t,i,c,s)}else u&16?f0(t,e,r,n,i,s):Lr(e,t,i,c,s);n=o?n.projectionNext:n.next}}function Ga(t,e,n,r,i,s){Yd(n,r,t.firstChild,e,i,s,!1)}function f0(t,e,n,r,i,s){let o=n[At],u=o[wt].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let f=u[d];Lr(e,t,i,f,s)}else{let d=u,f=o[Be];Gv(r)&&(d.flags|=128),Yd(t,e,d,f,i,s,!0)}}function p0(t,e,n,r,i){let s=n[Gn],o=St(n);s!==o&&Lr(e,t,r,s,i);for(let c=ct;c<n.length;c++){let u=n[c];Ga(u[ne],u,t,e,r,s)}}function g0(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Aa.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Aa.Important),t.setStyle(n,r,i,s))}}function m0(t,e,n){t.setAttribute(e,"style",n)}function s_(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function o_(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Hl(t,e,r),i!==null&&s_(t,e,i),s!==null&&m0(t,e,s)}var mn={};function qj(t=1){a_(Je(),fe(),Jr()+t,!1)}function a_(t,e,n,r){if(!r)if((e[$]&3)===3){let s=t.preOrderCheckHooks;s!==null&&la(e,s,n)}else{let s=t.preOrderHooks;s!==null&&da(e,s,0,n)}zn(n)}function K(t,e=ee.Default){let n=fe();if(n===null)return ge(t,e);let r=rt();return jv(r,n,ze(t),e)}function c_(t,e,n,r,i,s){let o=ae(null);try{let c=null;i&ke.SignalBased&&(c=e[r][nl]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&ke.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,c,s,n,r):pv(e,c,r,s)}finally{ae(o)}}function y0(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)zn(~i);else{let s=i,o=n[++r],c=n[++r];cC(o,s);let u=e[s];c(2,u)}}}finally{zn(-1)}}function za(t,e,n,r,i,s,o,c,u,d,f){let g=e.blueprint.slice();return g[qt]=i,g[$]=r|4|128|8|64,(d!==null||t&&t[$]&2048)&&(g[$]|=2048),Iv(g),g[Be]=g[Yr]=t,g[_t]=n,g[It]=o||t&&t[It],g[Te]=c||t&&t[Te],g[Gr]=u||t&&t[Gr]||null,g[wt]=s,g[Ua]=RC(),g[_a]=f,g[dv]=d,g[At]=e.type==2?t[At]:g,g}function Wa(t,e,n,r,i){let s=t.data[e];if(s===null)s=v0(t,e,n,r,i),aC()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=nC();s.injectorIndex=o===null?-1:o.injectorIndex}return ys(s,!0),s}function v0(t,e,n,r,i){let s=Dv(),o=Tv(),c=o?s:s&&s.parent,u=t.data[e]=D0(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function u_(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function l_(t,e,n,r,i){let s=Jr(),o=r&2;try{zn(-1),o&&e.length>dn&&a_(t,e,dn,!1),Tt(o?2:0,i),n(r,i)}finally{zn(s),Tt(o?3:1,i)}}function d_(t,e,n){if(fv(e)){let r=ae(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let u=n[o];c.contentQueries(1,u,o)}}}finally{ae(r)}}}function h_(t,e,n){Ev()&&(N0(t,e,n,lt(n,e)),(n.flags&64)===64&&y_(t,e,n))}function f_(t,e,n=lt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function p_(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Jd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Jd(t,e,n,r,i,s,o,c,u,d,f){let g=dn+r,_=g+i,E=_0(g,_),S=typeof d=="function"?d():d;return E[ne]={type:t,blueprint:E,template:n,queries:null,viewQuery:c,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function _0(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:mn);return n}function I0(t,e,n,r){let s=r.get(BC,Yv)||n===os.ShadowDom,o=t.selectRootElement(e,s);return w0(o),o}function w0(t){E0(t)}var E0=()=>null;function D0(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return Zb()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Dy(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=ke.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let d=s;if(i!==null){if(!i.hasOwnProperty(s))continue;d=i[s]}t===0?Ty(r,n,d,c,u):Ty(r,n,d,c)}return r}function Ty(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function T0(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,c=[],u=null,d=null;for(let f=r;f<i;f++){let g=s[f],_=n?n.get(g):null,E=_?_.inputs:null,S=_?_.outputs:null;u=Dy(0,g.inputs,f,u,E),d=Dy(1,g.outputs,f,d,S);let x=u!==null&&o!==null&&!Rd(e)?U0(u,f,o):null;c.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=d}function b0(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Xd(t,e,n,r,i,s,o,c){let u=lt(e,n),d=e.inputs,f;!c&&d!=null&&(f=d[r])?(Zd(t,n,f,r,i),Ba(e)&&C0(n,e.index)):e.type&3?(r=b0(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function C0(t,e){let n=pn(e,t);n[$]&16||(n[$]|=64)}function g_(t,e,n,r){if(Ev()){let i=r===null?null:{"":-1},s=x0(t,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&m_(t,e,n,o,i,c),i&&R0(n,r,i)}n.mergedAttrs=as(n.mergedAttrs,n.attrs)}function m_(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Xl(ba(n,e),t,r[d].type);O0(n,t.data.length,r.length);for(let d=0;d<r.length;d++){let f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,c=!1,u=u_(t,e,r.length,null);for(let d=0;d<r.length;d++){let f=r[d];n.mergedAttrs=as(n.mergedAttrs,f.hostAttrs),k0(t,n,e,u,f),P0(u,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!c&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}T0(t,n,s)}function A0(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;S0(o)!=c&&o.push(c),o.push(n,r,s)}}function S0(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function N0(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Ba(n)&&F0(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ba(n,e),Kn(r,e);let o=n.initialInputs;for(let c=i;c<s;c++){let u=t.data[c],d=Wr(e,t,c,n);if(Kn(d,e),o!==null&&j0(e,c-i,d,u,n,o),hn(u)){let f=pn(n.index,e);f[_t]=Wr(e,t,c,n)}}}function y_(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=uC();try{zn(s);for(let c=r;c<i;c++){let u=t.data[c],d=e[c];Yl(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&M0(u,d)}}finally{zn(-1),Yl(o)}}function M0(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function x0(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(gb(e,o.selectors,!1))if(r||(r=[]),hn(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;sd(t,e,u)}else r.unshift(o),sd(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function sd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function R0(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new te(-301,!1);r.push(e[i],s)}}}function P0(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;hn(e)&&(n[""]=t)}}function O0(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function k0(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=$r(i.type,!0)),o=new Wn(s,hn(i),K);t.blueprint[r]=o,n[r]=o,A0(t,e,r,u_(t,n,i.hostVars,mn),i)}function F0(t,e,n){let r=lt(e,t),i=p_(n),s=t[It].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=Ka(t,za(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=c}function V0(t,e,n,r,i,s){let o=lt(t,e);L0(e[Te],o,s,t.value,n,r,i)}function L0(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let c=o==null?Va(s):o(s,r||"",i);t.setAttribute(e,i,c,n)}}function j0(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],d=o[c++],f=o[c++],g=o[c++];c_(r,n,u,d,f,g)}}function U0(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function v_(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function __(t,e){let n=t.contentQueries;if(n!==null){let r=ae(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];bv(s),c.contentQueries(2,e[o],o)}}}finally{ae(r)}}}function Ka(t,e){return t[ls]?t[fy][vt]=e:t[ls]=e,t[fy]=e,e}function od(t,e,n){bv(0);let r=ae(null);try{e(t,n)}finally{ae(r)}}function B0(t){return t[us]||(t[us]=[])}function $0(t){return t.cleanup||(t.cleanup=[])}function I_(t,e){let n=t[Gr],r=n?n.get(Kr,null):null;r&&r.handleError(e)}function Zd(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],u=n[s++],d=e[o],f=t.data[o];c_(f,d,r,c,u,i)}}function q0(t,e,n){let r=vv(e,t);JC(t[Te],r,n)}function H0(t,e){let n=pn(e,t),r=n[ne];G0(r,n);let i=n[qt];i!==null&&n[_a]===null&&(n[_a]=Gd(i,n[Gr])),eh(r,n,n[_t])}function G0(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function eh(t,e,n){jd(e);try{let r=t.viewQuery;r!==null&&od(1,r,n);let i=t.template;i!==null&&l_(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[zr]?.finishViewCreation(t),t.staticContentQueries&&__(t,e),t.staticViewQueries&&od(2,t.viewQuery,n);let s=t.components;s!==null&&z0(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[$]&=-5,Ud()}}function z0(t,e){for(let n=0;n<e.length;n++)H0(t,e[n])}function W0(t,e,n,r){let i=ae(null);try{let s=e.tView,c=t[$]&4096?4096:16,u=za(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=t[e.index];u[ja]=d;let f=t[zr];return f!==null&&(u[zr]=f.createEmbeddedView(s)),eh(s,u,n),u}finally{ae(i)}}function by(t,e){return!e||e.firstChild===null||Gv(t)}function K0(t,e,n,r=!0){let i=e[ne];if(t0(i,e,t,n),r){let o=id(n,t),c=e[Te],u=Kd(c,t[Gn]);u!==null&&ZC(i,t[wt],c,e,u,o)}let s=e[_a];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Na(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(St(s)),Ht(s)&&Q0(s,r);let o=n.type;if(o&8)Na(t,e,n.child,r);else if(o&32){let c=Wd(n,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=i_(e,n);if(Array.isArray(c))r.push(...c);else{let u=hs(e[At]);Na(u[ne],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function Q0(t,e){for(let n=ct;n<t.length;n++){let r=t[n],i=r[ne].firstChild;i!==null&&Na(r[ne],r,i,e)}t[Gn]!==t[qt]&&e.push(t[Gn])}var w_=[];function Y0(t){return t[Hn]??J0(t)}function J0(t){let e=w_.pop()??Object.create(Z0);return e.lView=t,e}function X0(t){t.lView[Hn]!==t&&(t.lView=null,w_.push(t))}var Z0=Qe(Oe({},Em),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ds(t.lView)},consumerOnSignalRead(){this.lView[Hn]=this}}),E_=100;function D_(t,e=!0,n=0){let r=t[It],i=r.rendererFactory,s=!1;s||i.begin?.();try{eA(t,n)}catch(o){throw e&&I_(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function eA(t,e){ad(t,e);let n=0;for(;Ld(t);){if(n===E_)throw new te(103,!1);n++,ad(t,1)}}function tA(t,e,n,r){let i=e[$];if((i&256)===256)return;let s=!1;!s&&e[It].inlineEffectRunner?.flush(),jd(e);let o=null,c=null;!s&&nA(t)&&(c=Y0(e),o=Dm(c));try{Iv(e),sC(t.bindingStartIndex),n!==null&&l_(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let g=t.preOrderCheckHooks;g!==null&&la(e,g,null)}else{let g=t.preOrderHooks;g!==null&&da(e,g,0,null),Nl(e,0)}if(rA(e),T_(e,0),t.contentQueries!==null&&__(t,e),!s)if(u){let g=t.contentCheckHooks;g!==null&&la(e,g)}else{let g=t.contentHooks;g!==null&&da(e,g,1),Nl(e,1)}y0(t,e);let d=t.components;d!==null&&C_(e,d,0);let f=t.viewQuery;if(f!==null&&od(2,f,r),!s)if(u){let g=t.viewCheckHooks;g!==null&&la(e,g)}else{let g=t.viewHooks;g!==null&&da(e,g,2),Nl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Sl]){for(let g of e[Sl])g();e[Sl]=null}s||(e[$]&=-73)}catch(u){throw ds(e),u}finally{c!==null&&(Tm(c,o),X0(c)),Ud()}}function nA(t){return t.type!==2}function T_(t,e){for(let n=Wv(t);n!==null;n=Kv(n))for(let r=ct;r<n.length;r++){let i=n[r];b_(i,e)}}function rA(t){for(let e=Wv(t);e!==null;e=Kv(e)){if(!(e[$]&kd.HasTransplantedViews))continue;let n=e[wa];for(let r=0;r<n.length;r++){let i=n[r],s=i[Be];Wb(i)}}}function iA(t,e,n){let r=pn(e,t);b_(r,n)}function b_(t,e){Vd(t)&&ad(t,e)}function ad(t,e){let r=t[ne],i=t[$],s=t[Hn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&rl(s)),s&&(s.dirty=!1),t[$]&=-9217,o)tA(r,t,r.template,t[_t]);else if(i&8192){T_(t,1);let c=r.components;c!==null&&C_(t,c,1)}}function C_(t,e,n){for(let r=0;r<e.length;r++)iA(t,e[r],n)}function th(t){for(t[It].changeDetectionScheduler?.notify();t;){t[$]|=64;let e=hs(t);if(Lb(t)&&!e)return t;t=e}return null}var Qn=class{get rootNodes(){let e=this._lView,n=e[ne];return Na(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_t]}set context(e){this._lView[_t]=e}get destroyed(){return(this._lView[$]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Be];if(Ht(e)){let n=e[Ia],r=n?n.indexOf(this):-1;r>-1&&(rd(e,r),ma(n,r))}this._attachedToViewContainer=!1}n_(this._lView[ne],this._lView)}onDestroy(e){wv(this._lView,e)}markForCheck(){th(this._cdRefInjectingView||this._lView)}detach(){this._lView[$]&=-129}reattach(){Ql(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,D_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,e_(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e,Ql(this._lView)}},Qa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=aA;let t=e;return t})(),sA=Qa,oA=class extends sA{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=W0(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Qn(i)}};function aA(){return cA(rt(),fe())}function cA(t,e){return t.type&4?new oA(e,t,Ha(t,e)):null}var Gj=new RegExp(`^(\\d+)*(${jC}|${LC})*(.*)`);var uA=()=>null;function Cy(t,e){return uA(t,e)}var cd=class{},ud=class{},Ma=class{};function lA(t){let e=Error(`No component factory found for ${We(t)}.`);return e[dA]=t,e}var dA="ngComponent";var ld=class{resolveComponentFactory(e){throw lA(e)}},Ya=(()=>{let e=class e{};e.NULL=new ld;let t=e;return t})(),dd=class{},nr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>hA();let t=e;return t})();function hA(){let t=fe(),e=rt(),n=pn(e.index,t);return(Bn(n)?n:t)[Te]}var fA=(()=>{let e=class e{};e.\u0275prov=oe({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Ol={};var Ay=new Set;function nh(t){Ay.has(t)||(Ay.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Sy(...t){}function pA(){let t=typeof jr.requestAnimationFrame=="function",e=jr[t?"requestAnimationFrame":"setTimeout"],n=jr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Me=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=pA().nativeRequestAnimationFrame,yA(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new te(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,gA,Sy,Sy);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},gA={};function rh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mA(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(jr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,hd(t),t.isCheckStableRunning=!0,rh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),hd(t))}function yA(t){let e=()=>{mA(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,c)=>{if(vA(c))return n.invokeTask(i,s,o,c);try{return Ny(t),n.invokeTask(i,s,o,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),My(t)}},onInvoke:(n,r,i,s,o,c,u)=>{try{return Ny(t),n.invoke(i,s,o,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),My(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,hd(t),rh(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function hd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Ny(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function My(t){t._nesting--,rh(t)}function vA(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var A_=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=oe({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function fd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=ry(i,c);else if(s==2){let u=c,d=e[++o];r=ry(r,u+": "+d+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var xa=class extends Ya{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=qn(e);return new fs(n,this.ngModule)}};function xy(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function _A(t){let e=t.toLowerCase();return e==="svg"?$b:e==="math"?qb:null}var pd=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=La(r);let i=this.injector.get(e,Ol,r);return i!==Ol||n===Ol?i:this.parentInjector.get(e,n,r)}},fs=class extends Ma{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=xy(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return xy(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=_b(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ae(null);try{i=i||this.ngModule;let o=i instanceof Ct?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new pd(e,o):e,u=c.get(dd,null);if(u===null)throw new te(407,!1);let d=c.get(fA,null),f=c.get(A_,null),g=c.get(cd,null),_={rendererFactory:u,sanitizer:d,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:g},E=u.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",x=r?I0(E,r,this.componentDef.encapsulation,c):Zv(E,S,_A(S)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let P=null;x!==null&&(P=Gd(x,c,!0));let L=Jd(0,null,null,1,0,null,null,null,null,null,null),V=za(null,L,null,N,null,null,_,E,c,null,P);jd(V);let j,pe;try{let q=this.componentDef,w,m=null;q.findHostDirectiveDefs?(w=[],m=new Map,q.findHostDirectiveDefs(q,w,m),w.push(q)):w=[q];let y=IA(V,x),I=wA(y,x,q,w,V,_,E);pe=_v(L,dn),x&&TA(E,q,x,r),n!==void 0&&bA(pe,this.ngContentSelectors,n),j=DA(I,q,w,m,V,[CA]),eh(L,V,null)}finally{Ud()}return new gd(this.componentType,j,Ha(pe,V),V,pe)}finally{ae(s)}}},gd=class extends ud{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Qn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Zd(s[ne],s,i,e,n),this.previousInputValues.set(e,n);let o=pn(this._tNode.index,s);th(o)}}get injector(){return new $n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function IA(t,e){let n=t[ne],r=dn;return t[r]=e,Wa(n,r,2,"#host",null)}function wA(t,e,n,r,i,s,o){let c=i[ne];EA(r,t,e,o);let u=null;e!==null&&(u=Gd(e,i[Gr]));let d=s.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let g=za(i,p_(n),null,f,i[t.index],t,s,d,null,null,u);return c.firstCreatePass&&sd(c,t,r.length-1),Ka(i,g),i[t.index]=g}function EA(t,e,n,r){for(let i of t)e.mergedAttrs=as(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(fd(e,e.mergedAttrs,!0),n!==null&&o_(r,n,e))}function DA(t,e,n,r,i,s){let o=rt(),c=i[ne],u=lt(o,i);m_(c,i,o,n,null,r);for(let f=0;f<n.length;f++){let g=o.directiveStart+f,_=Wr(i,c,g,o);Kn(_,i)}y_(c,i,o),u&&Kn(u,i);let d=Wr(i,c,o.directiveStart+o.componentOffset,o);if(t[_t]=i[_t]=d,s!==null)for(let f of s)f(d,e);return d_(c,o,i),d}function TA(t,e,n,r){if(r)Hl(t,n,["ng-version","17.3.10"]);else{let{attrs:i,classes:s}=Ib(e.selectors[0]);i&&Hl(t,n,i),s&&s.length>0&&s_(t,n,s.join(" "))}}function bA(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function CA(){let t=rt();qd(fe()[ne],t)}var Ja=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=AA;let t=e;return t})();function AA(){let t=rt();return NA(t,fe())}var SA=Ja,S_=class extends SA{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ha(this._hostTNode,this._hostLView)}get injector(){return new $n(this._hostTNode,this._hostLView)}get parentInjector(){let e=Hd(this._hostTNode,this._hostLView);if(Pv(e)){let n=Ta(e,this._hostLView),r=Da(e),i=n[ne].data[r+8];return new $n(i,n)}else return new $n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Ry(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Cy(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,by(this._hostTNode,o)),c}createComponent(e,n,r,i,s){let o=e&&!Vb(e),c;if(o)c=n;else{let S=n||{};c=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}let u=o?e:new fs(qn(e)),d=r||this.parentInjector;if(!s&&u.ngModule==null){let x=(o?d:this.parentInjector).get(Ct,null);x&&(s=x)}let f=qn(u.componentType??{}),g=Cy(this._lContainer,f?.id??null),_=g?.firstChild??null,E=u.create(d,i,_,s);return this.insertImpl(E.hostView,c,by(this._hostTNode,g)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(zb(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Be],d=new S_(u,u[wt],u[Be]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return K0(o,i,s,r),e.attachToViewContainerRef(),Qy(kl(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Ry(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=rd(this._lContainer,n);r&&(ma(kl(this._lContainer),n),n_(r[ne],r))}detach(e){let n=this._adjustIndex(e,-1),r=rd(this._lContainer,n);return r&&ma(kl(this._lContainer),n)!=null?new Qn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Ry(t){return t[Ia]}function kl(t){return t[Ia]||(t[Ia]=[])}function NA(t,e){let n,r=e[t.index];return Ht(r)?n=r:(n=v_(r,e,null,t),e[t.index]=n,Ka(e,n)),xA(n,e,t,r),new S_(n,t,e)}function MA(t,e){let n=t[Te],r=n.createComment(""),i=lt(e,t),s=Kd(n,i);return Sa(n,s,r,c0(n,i),!1),r}var xA=OA,RA=()=>!1;function PA(t,e,n){return RA(t,e,n)}function OA(t,e,n,r){if(t[Gn])return;let i;n.type&8?i=St(r):i=MA(e,n),t[Gn]=i}function kA(t){return typeof t=="function"&&t[nl]!==void 0}function N_(t){return kA(t)&&typeof t.set=="function"}function FA(t){return Object.getPrototypeOf(t.prototype).constructor}function Xe(t){let e=FA(t.type),n=!0,r=[t];for(;e;){let i;if(hn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=aa(t.inputs),o.inputTransforms=aa(t.inputTransforms),o.declaredInputs=aa(t.declaredInputs),o.outputs=aa(t.outputs);let c=i.hostBindings;c&&BA(t,c);let u=i.viewQuery,d=i.contentQueries;if(u&&jA(t,u),d&&UA(t,d),VA(t,i),jT(t.outputs,i.outputs),hn(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let c=s[o];c&&c.ngInherit&&c(t),c===Xe&&(n=!1)}}e=Object.getPrototypeOf(e)}LA(r)}function VA(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function LA(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=as(i.hostAttrs,n=as(n,i.hostAttrs))}}function aa(t){return t===qr?{}:t===at?[]:t}function jA(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function UA(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function BA(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var fn=class{},md=class{};var yd=class extends fn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xa(this);let i=nv(e);this._bootstrapComponents=Xv(i.bootstrap),this._r3Injector=$v(e,n,[{provide:fn,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver},...r],We(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vd=class extends md{constructor(e){super(),this.moduleType=e}create(e){return new yd(this.moduleType,e,[])}};var Ra=class extends fn{constructor(e){super(),this.componentFactoryResolver=new xa(this),this.instance=null;let n=new cs([...e.providers,{provide:fn,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver}],e.parent||Od(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function $A(t,e,n=null){return new Ra({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Xa=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new es(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function M_(t){return HA(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function qA(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function HA(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function GA(t,e,n){return t[e]=n}function Xr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function zA(t){return(t.flags&32)===32}function WA(t,e,n,r,i,s,o,c,u){let d=e.consts,f=Wa(e,t,4,o||null,Ea(d,c));g_(e,n,f,Ea(d,u)),qd(e,f);let g=f.tView=Jd(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}function KA(t,e,n,r,i,s,o,c){let u=fe(),d=Je(),f=t+dn,g=d.firstCreatePass?WA(f,d,u,e,n,r,i,s,o):d.data[f];ys(g,!1);let _=QA(d,u,g,t);Bd()&&Qd(d,u,_,g),Kn(_,u);let E=v_(_,u,_,g);return u[f]=E,Ka(u,E),PA(E,g,u),Fd(g)&&h_(d,u,g),o!=null&&f_(u,g,c),KA}var QA=YA;function YA(t,e,n,r){return $d(!0),e[Te].createComment("")}function ih(t,e,n,r){let i=fe(),s=$a();if(Xr(i,s,e)){let o=Je(),c=qa();V0(c,i,t,e,n,r)}return ih}function x_(t,e,n,r){return Xr(t,$a(),n)?e+Va(n)+r:mn}function ca(t,e){return t<<17|e<<2}function Yn(t){return t>>17&32767}function JA(t){return(t&2)==2}function XA(t,e){return t&131071|e<<17}function _d(t){return t|2}function Qr(t){return(t&131068)>>2}function Fl(t,e){return t&-131069|e<<2}function ZA(t){return(t&1)===1}function Id(t){return t|1}function eS(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,c=Yn(o),u=Qr(o);t[r]=n;let d=!1,f;if(Array.isArray(n)){let g=n;f=g[1],(f===null||ms(g,f)>0)&&(d=!0)}else f=n;if(i)if(u!==0){let _=Yn(t[c+1]);t[r+1]=ca(_,c),_!==0&&(t[_+1]=Fl(t[_+1],r)),t[c+1]=XA(t[c+1],r)}else t[r+1]=ca(c,0),c!==0&&(t[c+1]=Fl(t[c+1],r)),c=r;else t[r+1]=ca(u,0),c===0?c=r:t[u+1]=Fl(t[u+1],r),u=r;d&&(t[r+1]=_d(t[r+1])),Py(t,f,r,!0),Py(t,f,r,!1),tS(e,f,t,r,s),o=ca(c,u),s?e.classBindings=o:e.styleBindings=o}function tS(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ms(s,e)>=0&&(n[r+1]=Id(n[r+1]))}function Py(t,e,n,r){let i=t[n+1],s=e===null,o=r?Yn(i):Qr(i),c=!1;for(;o!==0&&(c===!1||s);){let u=t[o],d=t[o+1];nS(u,e)&&(c=!0,t[o+1]=r?Id(d):_d(d)),o=r?Yn(d):Qr(d)}c&&(t[n+1]=r?_d(i):Id(i))}function nS(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ms(t,e)>=0:!1}function rS(t,e,n){let r=fe(),i=$a();if(Xr(r,i,e)){let s=Je(),o=qa();Xd(s,o,r,t,e,r[Te],n,!1)}return rS}function Oy(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Zd(t,n,s[o],o,r)}function Za(t,e){return iS(t,e,null,!0),Za}function iS(t,e,n,r){let i=fe(),s=Je(),o=oC(2);if(s.firstUpdatePass&&oS(s,t,o,r),e!==mn&&Xr(i,o,e)){let c=s.data[Jr()];dS(s,c,i,i[Te],t,i[o+1]=hS(e,n),r,o)}}function sS(t,e){return e>=t.expandoStartIndex}function oS(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Jr()],o=sS(t,n);fS(s,r)&&e===null&&!o&&(e=!1),e=aS(i,s,e,r),eS(i,s,e,n,o,r)}}function aS(t,e,n,r){let i=lC(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Vl(null,t,e,n,r),n=ps(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Vl(i,t,e,n,r),s===null){let u=cS(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Vl(null,t,e,u[1],r),u=ps(u,e.attrs,r),uS(t,e,r,u))}else s=lS(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function cS(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Qr(r)!==0)return t[Yn(r)]}function uS(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Yn(i)]=r}function lS(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ps(r,o,n)}return ps(r,e.attrs,n)}function Vl(t,e,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=e[c],r=ps(r,s.hostAttrs,i),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ps(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ob(t,o,n?!0:e[++s]))}return t===void 0?null:t}function dS(t,e,n,r,i,s,o,c){if(!(e.type&3))return;let u=t.data,d=u[c+1],f=ZA(d)?ky(u,e,n,i,Qr(d),o):void 0;if(!Pa(f)){Pa(s)||JA(d)&&(s=ky(u,null,n,i,c,o));let g=vv(Jr(),n);g0(r,o,g,i,s)}}function ky(t,e,n,r,i,s){let o=e===null,c;for(;i>0;){let u=t[i],d=Array.isArray(u),f=d?u[1]:u,g=f===null,_=n[i+1];_===mn&&(_=g?at:void 0);let E=g?Cl(_,r):f===r?_:void 0;if(d&&!Pa(E)&&(E=Cl(u,r)),Pa(E)&&(c=E,o))return c;let S=t[i+1];i=o?Yn(S):Qr(S)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=Cl(u,r))}return c}function Pa(t){return t!==void 0}function hS(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=We(zd(t)))),t}function fS(t,e){return(t.flags&(e?8:16))!==0}function pS(t,e,n,r,i,s){let o=e.consts,c=Ea(o,i),u=Wa(e,t,2,r,c);return g_(e,n,u,Ea(o,s)),u.attrs!==null&&fd(u,u.attrs,!1),u.mergedAttrs!==null&&fd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function R_(t,e,n,r){let i=fe(),s=Je(),o=dn+t,c=i[Te],u=s.firstCreatePass?pS(o,s,i,e,n,r):s.data[o],d=mS(s,i,u,c,e,t);i[o]=d;let f=Fd(u);return ys(u,!0),o_(c,d,u),!zA(u)&&Bd()&&Qd(s,i,d,u),Yb()===0&&Kn(d,i),Jb(),f&&(h_(s,i,u),d_(s,u,i)),r!==null&&f_(i,u),R_}function P_(){let t=rt();Tv()?rC():(t=t.parent,ys(t,!1));let e=t;eC(e)&&tC(),Xb();let n=Je();return n.firstCreatePass&&(qd(n,t),fv(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&yC(e)&&Oy(n,e,fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&vC(e)&&Oy(n,e,fe(),e.stylesWithoutHost,!1),P_}function gS(t,e,n,r){return R_(t,e,n,r),P_(),gS}var mS=(t,e,n,r,i,s)=>($d(!0),Zv(r,i,fC()));function Wj(){return fe()}var Oa="en-US";var yS=Oa;function vS(t){typeof t=="string"&&(yS=t.toLowerCase().replace(/_/g,"-"))}function yn(t,e,n,r){let i=fe(),s=Je(),o=rt();return O_(s,i,i[Te],o,t,e,r),yn}function _S(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[us],u=i[s+2];return c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function O_(t,e,n,r,i,s,o){let c=Fd(r),d=t.firstCreatePass&&$0(t),f=e[_t],g=B0(e),_=!0;if(r.type&3||o){let x=lt(r,e),N=o?o(x):x,P=g.length,L=o?j=>o(St(j[r.index])):r.index,V=null;if(!o&&c&&(V=_S(t,e,i,r.index)),V!==null){let j=V.__ngLastListenerFn__||V;j.__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,_=!1}else{s=Vy(r,e,f,s,!1);let j=n.listen(N,i,s);g.push(s,j),d&&d.push(i,L,P,P+1)}}else s=Vy(r,e,f,s,!1);let E=r.outputs,S;if(_&&E!==null&&(S=E[i])){let x=S.length;if(x)for(let N=0;N<x;N+=2){let P=S[N],L=S[N+1],pe=e[P][L].subscribe(s),q=g.length;g.push(s,pe),d&&d.push(i,r.index,q,-(q+1))}}}function Fy(t,e,n,r){let i=ae(null);try{return Tt(6,e,n),n(r)!==!1}catch(s){return I_(t,s),!1}finally{Tt(7,e,n),ae(i)}}function Vy(t,e,n,r,i){return function s(o){if(o===Function)return r;let c=t.componentOffset>-1?pn(t.index,e):e;th(c);let u=Fy(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=Fy(e,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function Kj(t=1){return hC(t)}function IS(t,e,n){return k_(t,"",e,"",n),IS}function k_(t,e,n,r,i){let s=fe(),o=x_(s,e,n,r);if(o!==mn){let c=Je(),u=qa();Xd(c,u,s,t,o,s[Te],i,!1)}return k_}function Qj(t,e=""){let n=fe(),r=Je(),i=t+dn,s=r.firstCreatePass?Wa(r,i,1,e,null):r.data[i],o=wS(r,n,s,e,t);n[i]=o,Bd()&&Qd(r,n,o,s),ys(s,!1)}var wS=(t,e,n,r,i)=>($d(!0),YC(e[Te],r));function ES(t){return F_("",t,""),ES}function F_(t,e,n){let r=fe(),i=x_(r,t,e,n);return i!==mn&&q0(r,Jr(),i),F_}function DS(t,e,n){N_(e)&&(e=e());let r=fe(),i=$a();if(Xr(r,i,e)){let s=Je(),o=qa();Xd(s,o,r,t,e,r[Te],n,!1)}return DS}function Yj(t,e){let n=N_(t);return n&&t.set(e),n}function TS(t,e){let n=fe(),r=Je(),i=rt();return O_(r,n,n[Te],i,t,e),TS}function bS(t,e,n){let r=Je();if(r.firstCreatePass){let i=hn(t);wd(n,r.data,r.blueprint,i,!0),wd(e,r.data,r.blueprint,i,!1)}}function wd(t,e,n,r,i){if(t=ze(t),Array.isArray(t))for(let s=0;s<t.length;s++)wd(t[s],e,n,r,i);else{let s=Je(),o=fe(),c=rt(),u=Hr(t)?t:ze(t.provide),d=uv(t),f=c.providerIndexes&1048575,g=c.directiveStart,_=c.providerIndexes>>20;if(Hr(t)||!t.multi){let E=new Wn(d,i,K),S=jl(u,e,i?f:f+_,g);S===-1?(Xl(ba(c,o),s,u),Ll(s,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(E),o.push(E)):(n[S]=E,o[S]=E)}else{let E=jl(u,e,f+_,g),S=jl(u,e,f,f+_),x=E>=0&&n[E],N=S>=0&&n[S];if(i&&!N||!i&&!x){Xl(ba(c,o),s,u);let P=SS(i?AS:CS,n.length,i,r,d);!i&&N&&(n[S].providerFactory=P),Ll(s,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(P),o.push(P)}else{let P=V_(n[i?S:E],d,!i&&r);Ll(s,t,E>-1?E:S,P)}!i&&r&&N&&n[S].componentProviders++}}}function Ll(t,e,n,r){let i=Hr(e),s=Nb(e);if(i||s){let u=(s?ze(e.useClass):e).prototype.ngOnDestroy;if(u){let d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=d.indexOf(n);f===-1?d.push(n,[r,u]):d[f+1].push(r,u)}else d.push(n,u)}}}function V_(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function jl(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function CS(t,e,n,r){return Ed(this.multi,[])}function AS(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,c=Wr(n,n[ne],this.providerFactory.index,r);s=c.slice(0,o),Ed(i,s);for(let u=o;u<c.length;u++)s.push(c[u])}else s=[],Ed(i,s);return s}function Ed(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function SS(t,e,n,r,i){let s=new Wn(t,n,K);return s.multi=[],s.index=e,s.componentProviders=0,V_(s,i,r&&!n),s}function Nt(t,e=[]){return n=>{n.providersResolver=(r,i)=>bS(r,i?i(t):t,e)}}var NS=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=sv(!1,r.type),s=i.length>0?$A([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=oe({token:e,providedIn:"environment",factory:()=>new e(ge(Ct))});let t=e;return t})();function Jj(t){nh("NgStandalone"),t.getStandaloneInjector=e=>e.get(NS).getOrCreateStandaloneInjector(t)}function Xj(t,e,n,r){return xS(fe(),iC(),t,e,n,r)}function MS(t,e){let n=t[e];return n===mn?void 0:n}function xS(t,e,n,r,i,s){let o=e+n;return Xr(t,o,i)?GA(t,o+1,s?r.call(s,i):r(i)):MS(t,o+1)}var Jn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},L_=new Jn("17.3.10"),Zj=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var RS=new W("");function Is(t){return!!t&&typeof t.then=="function"}function j_(t){return!!t&&typeof t.subscribe=="function"}var PS=new W(""),U_=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=le(PS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Is(o))r.push(o);else if(j_(o)){let c=new Promise((u,d)=>{o.subscribe({complete:u,error:d})});r.push(c)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),B_=new W("");function OS(){Cm(()=>{throw new te(600,!1)})}function kS(t){return t.isBoundToModule}function FS(t,e,n){try{let r=n();return Is(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var sh=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=le(qv),this.afterRenderEffectManager=le(A_),this.externalTestViews=new Set,this.beforeRender=new rn,this.afterTick=new rn,this.componentTypes=[],this.components=[],this.isStable=le(Xa).hasPendingTasks.pipe(_e(r=>!r)),this._injector=le(Ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Ma;if(!this._injector.get(U_).done){let E=!s&&Db(r),S=!1;throw new te(405,S)}let c;s?c=r:c=this._injector.get(Ya).resolveComponentFactory(r),this.componentTypes.push(c.componentType);let u=kS(c)?void 0:this._injector.get(fn),d=i||c.selector,f=c.create(Gt.NULL,[],d,u),g=f.location.nativeElement,_=f.injector.get(RS,null);return _?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),Ul(this.components,f),_?.unregisterApplication(g)}),this._loadComponent(f),f}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new te(101,!1);let i=ae(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,ae(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===E_)throw new te(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:c,notifyErrorHandler:u}of this._views)VS(c,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Dd(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Dd(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ul(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(B_,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ul(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new te(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ul(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function VS(t,e,n){!e&&!Dd(t)||LS(t,n,e)}function Dd(t){return Ld(t)}function LS(t,e,n){let r;n?(r=0,t[$]|=1024):t[$]&64?r=0:r=1,D_(t,e,r)}var Td=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},eU=(()=>{let e=class e{compileModuleSync(r){return new vd(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=nv(r),o=Xv(s.declarations).reduce((c,u)=>{let d=qn(u);return d&&c.push(new fs(d)),c},[]);return new Td(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jS=(()=>{let e=class e{constructor(){this.zone=le(Me),this.applicationRef=le(sh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function US(t){return[{provide:Me,useFactory:t},{provide:ya,multi:!0,useFactory:()=>{let e=le(jS,{optional:!0});return()=>e.initialize()}},{provide:ya,multi:!0,useFactory:()=>{let e=le(HS);return()=>{e.initialize()}}},{provide:qv,useFactory:BS}]}function BS(){let t=le(Me),e=le(Kr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function $S(t){let e=US(()=>new Me(qS(t)));return er([[],e])}function qS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var HS=(()=>{let e=class e{constructor(){this.subscription=new Se,this.initialized=!1,this.zone=le(Me),this.pendingTasks=le(Xa)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Me.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Me.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GS(){return typeof $localize<"u"&&$localize.locale||Oa}var oh=new W("",{providedIn:"root",factory:()=>le(oh,ee.Optional|ee.SkipSelf)||GS()});var $_=new W("");var fa=null;function zS(t=[],e){return Gt.create({name:e,providers:[{provide:cv,useValue:"platform"},{provide:$_,useValue:new Set([()=>fa=null])},...t]})}function WS(t=[]){if(fa)return fa;let e=zS(t);return fa=e,OS(),KS(e),e}function KS(t){t.get(VC,null)?.forEach(n=>n())}var ec=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=QS;let t=e;return t})();function QS(t){return YS(rt(),fe(),(t&16)===16)}function YS(t,e,n){if(Ba(t)&&!n){let r=pn(t.index,e);return new Qn(r,r)}else if(t.type&47){let r=e[At];return new Qn(r,e)}return null}var bd=class{constructor(){}supports(e){return M_(e)}create(e){return new Cd(e)}},JS=(t,e)=>e,Cd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||JS}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<Ly(r,i,s)?n:r,c=Ly(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let d=c-i,f=u-i;if(d!=f){for(let _=0;_<d;_++){let E=_<s.length?s[_]:s[_]=0,S=E+_;f<=S&&S<d&&(s[_]=E+1)}let g=o.previousIndex;s[g]=f-d}}c!==u&&e(o,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!M_(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,c),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,qA(e,c=>{o=this._trackByFn(i,c),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,c,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,o,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Ad(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ka),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ka),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ad=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Sd=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ka=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Sd,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Ly(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function jy(){return new ah([new bd])}var ah=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||jy()),deps:[[e,new ib,new $t]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new te(901,!1)}};e.\u0275prov=oe({token:e,providedIn:"root",factory:jy});let t=e;return t})();function tU(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=WS(r),s=[$S(),...n||[]],c=new Ra({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(Me);return u.run(()=>{c.resolveInjectorInitializers();let d=c.get(Kr,null),f;u.runOutsideAngular(()=>{f=u.onError.subscribe({next:E=>{d.handleError(E)}})});let g=()=>c.destroy(),_=i.get($_);return _.add(g),c.onDestroy(()=>{f.unsubscribe(),_.delete(g)}),FS(d,u,()=>{let E=c.get(U_);return E.runInitializers(),E.donePromise.then(()=>{let S=c.get(oh,Oa);vS(S||Oa);let x=c.get(sh);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function tc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Q_=null;function Zr(){return Q_}function NU(t){Q_??=t}var q_=class{};var rc=new W(""),Y_=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:()=>le(XS),providedIn:"platform"});let t=e;return t})();var XS=(()=>{let e=class e extends Y_{constructor(){super(),this._doc=le(rc),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zr().getBaseHref(this._doc)}onPopState(r){let i=Zr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Zr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function J_(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function H_(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function rr(t){return t&&t[0]!=="?"?"?"+t:t}var dh=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:()=>le(eN),providedIn:"root"});let t=e;return t})(),ZS=new W(""),eN=(()=>{let e=class e extends dh{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??le(rc).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return J_(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+rr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let c=this.prepareExternalUrl(s+rr(o));this._platformLocation.pushState(r,i,c)}replaceState(r,i,s,o){let c=this.prepareExternalUrl(s+rr(o));this._platformLocation.replaceState(r,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(ge(Y_),ge(ZS,8))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var tN=(()=>{let e=class e{constructor(r){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=iN(H_(G_(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+rr(i))}normalize(r){return e.stripTrailingSlash(rN(this._basePath,G_(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+rr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+rr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=rr,e.joinWithSlash=J_,e.stripTrailingSlash=H_,e.\u0275fac=function(i){return new(i||e)(ge(dh))},e.\u0275prov=oe({token:e,factory:()=>nN(),providedIn:"root"});let t=e;return t})();function nN(){return new tN(ge(dh))}function rN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function G_(t){return t.replace(/\/index.html$/,"")}function iN(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function X_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var ch=/\s+/,z_=[],MU=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=z_,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(ch):z_}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(ch):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(ch).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(K(gn),K(nr))},e.\u0275dir=be({type:e,selectors:[["","ngClass",""]],inputs:{klass:[ke.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var uh=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},xU=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,c)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new uh(s.item,this._ngForOf,-1,-1),c===null?void 0:c);else if(c==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,c),W_(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);W_(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(K(Ja),K(Qa),K(ah))},e.\u0275dir=be({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function W_(t,e){t.context.$implicit=e.item}var RU=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new lh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){K_("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){K_("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(K(Ja),K(Qa))},e.\u0275dir=be({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),lh=class{constructor(){this.$implicit=null,this.ngIf=null}};function K_(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${We(e)}'.`)}var PU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Zn({type:e}),e.\u0275inj=Xn({});let t=e;return t})(),OU="browser",sN="server";function oN(t){return t===sN}var nc=class{};var cI=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(K(nr),K(gn))},e.\u0275dir=be({type:e});let t=e;return t})(),hc=(()=>{let e=class e extends cI{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=vs(e)))(s||e)}})(),e.\u0275dir=be({type:e,features:[Xe]});let t=e;return t})(),ri=new W(""),cN={provide:ri,useExisting:ut(()=>uN),multi:!0},uN=(()=>{let e=class e extends hc{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=vs(e)))(s||e)}})(),e.\u0275dir=be({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,s){i&1&&yn("change",function(c){return s.onChange(c.target.checked)})("blur",function(){return s.onTouched()})},features:[Nt([cN]),Xe]});let t=e;return t})(),lN={provide:ri,useExisting:ut(()=>uI),multi:!0};function dN(){let t=Zr()?Zr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hN=new W(""),uI=(()=>{let e=class e extends cI{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dN())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(K(nr),K(gn),K(hN,8))},e.\u0275dir=be({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&yn("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[Nt([lN]),Xe]});let t=e;return t})();function vn(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function lI(t){return t!=null&&typeof t.length=="number"}var Cs=new W(""),fc=new W(""),fN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Z_=class{static min(e){return pN(e)}static max(e){return gN(e)}static required(e){return dI(e)}static requiredTrue(e){return mN(e)}static email(e){return yN(e)}static minLength(e){return vN(e)}static maxLength(e){return _N(e)}static pattern(e){return IN(e)}static nullValidator(e){return sc(e)}static compose(e){return yI(e)}static composeAsync(e){return vI(e)}};function pN(t){return e=>{if(vn(e.value)||vn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function gN(t){return e=>{if(vn(e.value)||vn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function dI(t){return vn(t.value)?{required:!0}:null}function mN(t){return t.value===!0?null:{required:!0}}function yN(t){return vn(t.value)||fN.test(t.value)?null:{email:!0}}function vN(t){return e=>vn(e.value)||!lI(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function _N(t){return e=>lI(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function IN(t){if(!t)return sc;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(vn(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function sc(t){return null}function hI(t){return t!=null}function fI(t){return Is(t)?tt(t):t}function pI(t){let e={};return t.forEach(n=>{e=n!=null?Oe(Oe({},e),n):e}),Object.keys(e).length===0?null:e}function gI(t,e){return e.map(n=>n(t))}function wN(t){return!t.validate}function mI(t){return t.map(e=>wN(e)?e:n=>e.validate(n))}function yI(t){if(!t)return null;let e=t.filter(hI);return e.length==0?null:function(n){return pI(gI(n,e))}}function gh(t){return t!=null?yI(mI(t)):null}function vI(t){if(!t)return null;let e=t.filter(hI);return e.length==0?null:function(n){let r=gI(n,e).map(fI);return Il(r).pipe(_e(pI))}}function mh(t){return t!=null?vI(mI(t)):null}function eI(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function _I(t){return t._rawValidators}function II(t){return t._rawAsyncValidators}function hh(t){return t?Array.isArray(t)?t:[t]:[]}function oc(t,e){return Array.isArray(t)?t.includes(e):t===e}function tI(t,e){let n=hh(e);return hh(t).forEach(i=>{oc(n,i)||n.push(i)}),n}function nI(t,e){return hh(e).filter(n=>!oc(t,n))}var ac=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},zt=class extends ac{get formDirective(){return null}get path(){return null}},_n=class extends ac{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},cc=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},EN={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},JU=Qe(Oe({},EN),{"[class.ng-submitted]":"isSubmitted"}),XU=(()=>{let e=class e extends cc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(K(_n,2))},e.\u0275dir=be({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Za("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Xe]});let t=e;return t})(),ZU=(()=>{let e=class e extends cc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(K(zt,10))},e.\u0275dir=be({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Za("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Xe]});let t=e;return t})();var Es="VALID",ic="INVALID",ei="PENDING",Ds="DISABLED";function yh(t){return(pc(t)?t.validators:t)||null}function DN(t){return Array.isArray(t)?gh(t):t||null}function vh(t,e){return(pc(e)?e.asyncValidators:t)||null}function TN(t){return Array.isArray(t)?mh(t):t||null}function pc(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function wI(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[n])throw new te(1001,"")}function EI(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new te(1002,"")})}var ti=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Es}get invalid(){return this.status===ic}get pending(){return this.status==ei}get disabled(){return this.status===Ds}get enabled(){return this.status!==Ds}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nI(e,this._rawAsyncValidators))}hasValidator(e){return oc(this._rawValidators,e)}hasAsyncValidator(e){return oc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ei,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ds,this.errors=null,this._forEachChild(r=>{r.disable(Qe(Oe({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Qe(Oe({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Es,this._forEachChild(r=>{r.enable(Qe(Oe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Qe(Oe({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Es||this.status===ei)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ds:Es}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ei,this._hasOwnPendingAsyncValidator=!0;let n=fI(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Ds:this.errors?ic:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ei)?ei:this._anyControlsHaveStatus(ic)?ic:Es}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DN(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=TN(this._rawAsyncValidators)}},ni=class extends ti{constructor(e,n,r){super(yh(n),vh(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){EI(this,!0,e),Object.keys(e).forEach(r=>{wI(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var fh=class extends ni{};var ii=new W("CallSetDisabledState",{providedIn:"root",factory:()=>As}),As="always";function DI(t,e){return[...e.path,t]}function uc(t,e,n=As){_h(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),CN(t,e),SN(t,e),AN(t,e),bN(t,e)}function rI(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),dc(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function lc(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function bN(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function _h(t,e){let n=_I(t);e.validator!==null?t.setValidators(eI(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=II(t);e.asyncValidator!==null?t.setAsyncValidators(eI(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();lc(e._rawValidators,i),lc(e._rawAsyncValidators,i)}function dc(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=_I(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=II(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return lc(e._rawValidators,r),lc(e._rawAsyncValidators,r),n}function CN(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&TI(t,e)})}function AN(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&TI(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function TI(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function SN(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function bI(t,e){t==null,_h(t,e)}function NN(t,e){return dc(t,e)}function CI(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function MN(t){return Object.getPrototypeOf(t.constructor)===hc}function AI(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function SI(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===uI?n=s:MN(s)?r=s:i=s}),i||r||n||null}function xN(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var RN={provide:zt,useExisting:ut(()=>PN)},Ts=Promise.resolve(),PN=(()=>{let e=class e extends zt{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new nt,this.form=new ni({},gh(r),mh(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Ts.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),uc(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Ts.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Ts.then(()=>{let i=this._findContainer(r.path),s=new ni({});bI(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Ts.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Ts.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,AI(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(K(Cs,10),K(fc,10),K(ii,8))},e.\u0275dir=be({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&yn("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:[ke.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Nt([RN]),Xe]});let t=e;return t})();function iI(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sI(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var bs=class extends ti{constructor(e=null,n,r){super(yh(n),vh(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ON=t=>t instanceof bs;var kN={provide:_n,useExisting:ut(()=>FN)},oI=Promise.resolve(),FN=(()=>{let e=class e extends _n{constructor(r,i,s,o,c,u){super(),this._changeDetectorRef=c,this.callSetDisabledState=u,this.control=new bs,this._registered=!1,this.name="",this.update=new nt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=SI(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),CI(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){oI.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&tc(i);oI.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?DI(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(K(zt,9),K(Cs,10),K(fc,10),K(ri,10),K(ec,8),K(ii,8))},e.\u0275dir=be({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ke.None,"disabled","isDisabled"],model:[ke.None,"ngModel","model"],options:[ke.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Nt([kN]),Xe,tr]});let t=e;return t})(),tB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=be({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),VN={provide:ri,useExisting:ut(()=>LN),multi:!0},LN=(()=>{let e=class e extends hc{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=vs(e)))(s||e)}})(),e.\u0275dir=be({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&yn("input",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},features:[Nt([VN]),Xe]});let t=e;return t})(),jN={provide:ri,useExisting:ut(()=>BN),multi:!0};var UN=(()=>{let e=class e{constructor(){this._accessors=[]}add(r,i){this._accessors.push([r,i])}remove(r){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===r){this._accessors.splice(i,1);return}}select(r){this._accessors.forEach(i=>{this._isSameGroup(i,r)&&i[1]!==r&&i[1].fireUncheck(r.value)})}_isSameGroup(r,i){return r[0].control?r[0]._parent===i._control._parent&&r[1].name===i.name:!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BN=(()=>{let e=class e extends hc{constructor(r,i,s,o){super(r,i),this._registry=s,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=le(ii,{optional:!0})??As}ngOnInit(){this._control=this._injector.get(_n),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(r){this._state=r===this.value,this.setProperty("checked",this._state)}registerOnChange(r){this._fn=r,this.onChange=()=>{r(this.value),this._registry.select(this)}}setDisabledState(r){(this.setDisabledStateFired||r||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",r),this.setDisabledStateFired=!0}fireUncheck(r){this.writeValue(r)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(i){return new(i||e)(K(nr),K(gn),K(UN),K(Gt))},e.\u0275dir=be({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,s){i&1&&yn("change",function(){return s.onChange()})("blur",function(){return s.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Nt([jN]),Xe]});let t=e;return t})();var NI=new W("");var $N={provide:zt,useExisting:ut(()=>qN)},qN=(()=>{let e=class e extends zt{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new nt,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return uc(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){rI(r.control||null,r,!1),xN(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,AI(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(rI(i||null,r),ON(s)&&(uc(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);bI(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&NN(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_h(this.form,this),this._oldForm&&dc(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(K(Cs,10),K(fc,10),K(ii,8))},e.\u0275dir=be({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&yn("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{form:[ke.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Nt([$N]),Xe,tr]});let t=e;return t})();var HN={provide:_n,useExisting:ut(()=>GN)},GN=(()=>{let e=class e extends _n{set isDisabled(r){}constructor(r,i,s,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new nt,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=SI(this,o)}ngOnChanges(r){this._added||this._setUpControl(),CI(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return DI(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(K(zt,13),K(Cs,10),K(fc,10),K(ri,10),K(NI,8))},e.\u0275dir=be({type:e,selectors:[["","formControlName",""]],inputs:{name:[ke.None,"formControlName","name"],isDisabled:[ke.None,"disabled","isDisabled"],model:[ke.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Nt([HN]),Xe,tr]});let t=e;return t})();var zN=(()=>{let e=class e{constructor(){this._validator=sc}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):sc,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=be({type:e,features:[tr]});let t=e;return t})();var WN={provide:Cs,useExisting:ut(()=>KN),multi:!0};var KN=(()=>{let e=class e extends zN{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=tc,this.createValidator=r=>dI}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=vs(e)))(s||e)}})(),e.\u0275dir=be({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&ih("required",s._enabled?"":null)},inputs:{required:"required"},features:[Nt([WN]),Xe]});let t=e;return t})();var MI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Zn({type:e}),e.\u0275inj=Xn({});let t=e;return t})(),ph=class extends ti{constructor(e,n,r){super(yh(n),vh(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){EI(this,!1,e),e.forEach((r,i)=>{wI(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function aI(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var nB=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return aI(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new ni(s,o)}record(r,i=null){let s=this._reduceControls(r);return new fh(s,i)}control(r,i,s){let o={};return this.useNonNullable?(aI(i)?o=i:(o.validators=i,o.asyncValidators=s),new bs(r,Qe(Oe({},o),{nonNullable:!0}))):new bs(r,i,s)}array(r,i,s){let o=r.map(c=>this._createControl(c));return new ph(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof bs)return r;if(r instanceof ti)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rB=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ii,useValue:r.callSetDisabledState??As}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Zn({type:e}),e.\u0275inj=Xn({imports:[MI]});let t=e;return t})(),iB=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:NI,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:ii,useValue:r.callSetDisabledState??As}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Zn({type:e}),e.\u0275inj=Xn({imports:[MI]});let t=e;return t})();var RI=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},QN=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},PI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,g=(s&3)<<4|c>>4,_=(c&15)<<2|d>>6,E=d&63;u||(E=64,o||(_=64)),r.push(n[f],n[g],n[_],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let d=i<t.length?n[t.charAt(i)]:64;++i;let g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||g==null)throw new wh;let _=s<<2|c>>4;if(r.push(_),d!==64){let E=c<<4&240|d>>2;if(r.push(E),g!==64){let S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},wh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},YN=function(t){let e=RI(t);return PI.encodeByteArray(e,!0)},Ss=function(t){return YN(t).replace(/\./g,"")},Dh=function(t){try{return PI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var XN=()=>JN().__FIREBASE_DEFAULTS__,ZN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Dh(t[1]);return e&&JSON.parse(e)},mc=()=>{try{return XN()||ZN()||eM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OI=t=>{var e,n;return(n=(e=mc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kI=t=>{let e=OI(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Th=()=>{var t;return(t=mc())===null||t===void 0?void 0:t.config},FI=t=>{var e;return(e=mc())===null||e===void 0?void 0:e[`_${t}`]};var gc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function VI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ss(JSON.stringify(n)),Ss(JSON.stringify(o)),""].join(".")}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function tM(){var t;let e=(t=mc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jI(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BI(){return!tM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bh(){try{return typeof indexedDB=="object"}catch{return!1}}function $I(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var nM="FirebaseError",dt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}},Wt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?rM(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new dt(i,c,r)}};function rM(t,e){return t.replace(iM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var iM=/\{\$([^}]+)}/g;function si(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(xI(s)&&xI(o)){if(!si(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function xI(t){return t!==null&&typeof t=="object"}function Ch(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qI(t,e){let n=new Eh(t,e);return n.subscribe.bind(n)}var Eh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ih),i.error===void 0&&(i.error=Ih),i.complete===void 0&&(i.complete=Ih);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function sM(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ih(){}var aB=4*60*60*1e3;function ht(t){return t&&t._delegate?t._delegate:t}var ft=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ir="[DEFAULT]";var Ah=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new gc;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aM(e))try{this.getOrInitializeService({instanceIdentifier:ir})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ir){return this.instances.has(e)}getOptions(e=ir){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ir){return this.component?this.component.multipleInstances?e:ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function oM(t){return t===ir?void 0:t}function aM(t){return t.instantiationMode==="EAGER"}var yc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ah(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var cM=[],X=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(X||{}),uM={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},lM=X.INFO,dM={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},hM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=dM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},In=class{constructor(e){this.name=e,this._logLevel=lM,this._logHandler=hM,this._userLogHandler=null,cM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}};var fM=(t,e)=>e.some(n=>t instanceof n),HI,GI;function pM(){return HI||(HI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gM(){return GI||(GI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var zI=new WeakMap,Nh=new WeakMap,WI=new WeakMap,Sh=new WeakMap,xh=new WeakMap;function mM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Mt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zI.set(n,t)}).catch(()=>{}),xh.set(e,t),e}function yM(t){if(Nh.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Nh.set(t,e)}var Mh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KI(t){Mh=t(Mh)}function vM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(vc(this),e,...n);return WI.set(r,e.sort?e.sort():[e]),Mt(r)}:gM().includes(t)?function(...e){return t.apply(vc(this),e),Mt(zI.get(this))}:function(...e){return Mt(t.apply(vc(this),e))}}function _M(t){return typeof t=="function"?vM(t):(t instanceof IDBTransaction&&yM(t),fM(t,pM())?new Proxy(t,Mh):t)}function Mt(t){if(t instanceof IDBRequest)return mM(t);if(Sh.has(t))return Sh.get(t);let e=_M(t);return e!==t&&(Sh.set(t,e),xh.set(e,t)),e}var vc=t=>xh.get(t);function YI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=Mt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Mt(o.result),u.oldVersion,u.newVersion,Mt(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var IM=["get","getKey","getAll","getAllKeys","count"],wM=["put","add","delete","clear"],Rh=new Map;function QI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rh.get(e))return Rh.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=wM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IM.includes(n)))return;let s=function(o,...c){return C(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]})};return Rh.set(e,s),s}KI(t=>Qe(Oe({},t),{get:(e,n,r)=>QI(e,n)||t.get(e,n,r),has:(e,n)=>!!QI(e,n)||t.has(e,n)}));var Oh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EM(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function EM(t){let e=t.getComponent();return e?.type==="VERSION"}var kh="@firebase/app",JI="0.10.5";var sr=new In("@firebase/app"),DM="@firebase/app-compat",TM="@firebase/analytics-compat",bM="@firebase/analytics",CM="@firebase/app-check-compat",AM="@firebase/app-check",SM="@firebase/auth",NM="@firebase/auth-compat",MM="@firebase/database",xM="@firebase/database-compat",RM="@firebase/functions",PM="@firebase/functions-compat",OM="@firebase/installations",kM="@firebase/installations-compat",FM="@firebase/messaging",VM="@firebase/messaging-compat",LM="@firebase/performance",jM="@firebase/performance-compat",UM="@firebase/remote-config",BM="@firebase/remote-config-compat",$M="@firebase/storage",qM="@firebase/storage-compat",HM="@firebase/firestore",GM="@firebase/vertexai-preview",zM="@firebase/firestore-compat",WM="firebase",KM="10.12.2";var Fh="[DEFAULT]",QM={[kh]:"fire-core",[DM]:"fire-core-compat",[bM]:"fire-analytics",[TM]:"fire-analytics-compat",[AM]:"fire-app-check",[CM]:"fire-app-check-compat",[SM]:"fire-auth",[NM]:"fire-auth-compat",[MM]:"fire-rtdb",[xM]:"fire-rtdb-compat",[RM]:"fire-fn",[PM]:"fire-fn-compat",[OM]:"fire-iid",[kM]:"fire-iid-compat",[FM]:"fire-fcm",[VM]:"fire-fcm-compat",[LM]:"fire-perf",[jM]:"fire-perf-compat",[UM]:"fire-rc",[BM]:"fire-rc-compat",[$M]:"fire-gcs",[qM]:"fire-gcs-compat",[HM]:"fire-fst",[zM]:"fire-fst-compat",[GM]:"fire-vertex","fire-js":"fire-js",[WM]:"fire-js-all"};var Ns=new Map,YM=new Map,Vh=new Map;function XI(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function En(t){let e=t.name;if(Vh.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Vh.set(e,t);for(let n of Ns.values())XI(n,t);for(let n of YM.values())XI(n,t);return!0}function Bh(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function oi(t){return t.settings!==void 0}var JM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wn=new Wt("app","Firebase",JM);var Lh=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}};var ai=KM;function $h(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Fh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw wn.create("bad-app-name",{appName:String(i)});if(n||(n=Th()),!n)throw wn.create("no-options");let s=Ns.get(i);if(s){if(si(n,s.options)&&si(r,s.config))return s;throw wn.create("duplicate-app",{appName:i})}let o=new yc(i);for(let u of Vh.values())o.addComponent(u);let c=new Lh(n,r,o);return Ns.set(i,c),c}function xs(t=Fh){let e=Ns.get(t);if(!e&&t===Fh&&Th())return $h();if(!e)throw wn.create("no-app",{appName:t});return e}function _c(){return Array.from(Ns.values())}function xe(t,e,n){var r;let i=(r=QM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(c.join(" "));return}En(new ft(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var XM="firebase-heartbeat-database",ZM=1,Ms="firebase-heartbeat-store",Ph=null;function nw(){return Ph||(Ph=YI(XM,ZM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ms)}catch(n){console.warn(n)}}}}).catch(t=>{throw wn.create("idb-open",{originalErrorMessage:t.message})})),Ph}function ex(t){return C(this,null,function*(){try{let n=(yield nw()).transaction(Ms),r=yield n.objectStore(Ms).get(rw(t));return yield n.done,r}catch(e){if(e instanceof dt)sr.warn(e.message);else{let n=wn.create("idb-get",{originalErrorMessage:e?.message});sr.warn(n.message)}}})}function ZI(t,e){return C(this,null,function*(){try{let r=(yield nw()).transaction(Ms,"readwrite");yield r.objectStore(Ms).put(e,rw(t)),yield r.done}catch(n){if(n instanceof dt)sr.warn(n.message);else{let r=wn.create("idb-set",{originalErrorMessage:n?.message});sr.warn(r.message)}}})}function rw(t){return`${t.name}!${t.options.appId}`}var tx=1024,nx=30*24*60*60*1e3,jh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Uh(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ew();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=nx}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return C(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=ew(),{heartbeatsToSend:r,unsentEntries:i}=rx(this._heartbeatsCache.heartbeats),s=Ss(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function ew(){return new Date().toISOString().substring(0,10)}function rx(t,e=tx){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Uh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return bh()?$I().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield ex(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ZI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function tw(t){return Ss(JSON.stringify({version:2,heartbeats:t})).length}function ix(t){En(new ft("platform-logger",e=>new Oh(e),"PRIVATE")),En(new ft("heartbeat",e=>new jh(e),"PRIVATE")),xe(kh,JI,t),xe(kh,JI,"esm2017"),xe("fire-js","")}ix("");var iw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sw={};var Dn,qh;(function(){var t;function e(w,m){function y(){}y.prototype=m.prototype,w.D=m.prototype,w.prototype=new y,w.prototype.constructor=w,w.C=function(I,D,b){for(var v=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)v[jt-2]=arguments[jt];return m.prototype[D].apply(I,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,m,y){y||(y=0);var I=Array(16);if(typeof m=="string")for(var D=0;16>D;++D)I[D]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(D=0;16>D;++D)I[D]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=w.g[0],y=w.g[1],D=w.g[2];var b=w.g[3],v=m+(b^y&(D^b))+I[0]+3614090360&4294967295;m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+I[1]+3905402710&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+I[2]+606105819&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+I[3]+3250441966&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(b^y&(D^b))+I[4]+4118548399&4294967295,m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+I[5]+1200080426&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+I[6]+2821735955&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+I[7]+4249261313&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(b^y&(D^b))+I[8]+1770035416&4294967295,m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+I[9]+2336552879&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+I[10]+4294925233&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+I[11]+2304563134&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(b^y&(D^b))+I[12]+1804603682&4294967295,m=y+(v<<7&4294967295|v>>>25),v=b+(D^m&(y^D))+I[13]+4254626195&4294967295,b=m+(v<<12&4294967295|v>>>20),v=D+(y^b&(m^y))+I[14]+2792965006&4294967295,D=b+(v<<17&4294967295|v>>>15),v=y+(m^D&(b^m))+I[15]+1236535329&4294967295,y=D+(v<<22&4294967295|v>>>10),v=m+(D^b&(y^D))+I[1]+4129170786&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+I[6]+3225465664&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+I[11]+643717713&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+I[0]+3921069994&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(D^b&(y^D))+I[5]+3593408605&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+I[10]+38016083&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+I[15]+3634488961&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+I[4]+3889429448&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(D^b&(y^D))+I[9]+568446438&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+I[14]+3275163606&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+I[3]+4107603335&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+I[8]+1163531501&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(D^b&(y^D))+I[13]+2850285829&4294967295,m=y+(v<<5&4294967295|v>>>27),v=b+(y^D&(m^y))+I[2]+4243563512&4294967295,b=m+(v<<9&4294967295|v>>>23),v=D+(m^y&(b^m))+I[7]+1735328473&4294967295,D=b+(v<<14&4294967295|v>>>18),v=y+(b^m&(D^b))+I[12]+2368359562&4294967295,y=D+(v<<20&4294967295|v>>>12),v=m+(y^D^b)+I[5]+4294588738&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+I[8]+2272392833&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+I[11]+1839030562&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+I[14]+4259657740&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(y^D^b)+I[1]+2763975236&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+I[4]+1272893353&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+I[7]+4139469664&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+I[10]+3200236656&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(y^D^b)+I[13]+681279174&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+I[0]+3936430074&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+I[3]+3572445317&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+I[6]+76029189&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(y^D^b)+I[9]+3654602809&4294967295,m=y+(v<<4&4294967295|v>>>28),v=b+(m^y^D)+I[12]+3873151461&4294967295,b=m+(v<<11&4294967295|v>>>21),v=D+(b^m^y)+I[15]+530742520&4294967295,D=b+(v<<16&4294967295|v>>>16),v=y+(D^b^m)+I[2]+3299628645&4294967295,y=D+(v<<23&4294967295|v>>>9),v=m+(D^(y|~b))+I[0]+4096336452&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+I[7]+1126891415&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+I[14]+2878612391&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+I[5]+4237533241&4294967295,y=D+(v<<21&4294967295|v>>>11),v=m+(D^(y|~b))+I[12]+1700485571&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+I[3]+2399980690&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+I[10]+4293915773&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+I[1]+2240044497&4294967295,y=D+(v<<21&4294967295|v>>>11),v=m+(D^(y|~b))+I[8]+1873313359&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+I[15]+4264355552&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+I[6]+2734768916&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+I[13]+1309151649&4294967295,y=D+(v<<21&4294967295|v>>>11),v=m+(D^(y|~b))+I[4]+4149444226&4294967295,m=y+(v<<6&4294967295|v>>>26),v=b+(y^(m|~D))+I[11]+3174756917&4294967295,b=m+(v<<10&4294967295|v>>>22),v=D+(m^(b|~y))+I[2]+718787259&4294967295,D=b+(v<<15&4294967295|v>>>17),v=y+(b^(D|~m))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(D+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.u=function(w,m){m===void 0&&(m=w.length);for(var y=m-this.blockSize,I=this.B,D=this.h,b=0;b<m;){if(D==0)for(;b<=y;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<m;)if(I[D++]=w.charCodeAt(b++),D==this.blockSize){i(this,I),D=0;break}}else for(;b<m;)if(I[D++]=w[b++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=m},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;var y=8*this.o;for(m=w.length-8;m<w.length;++m)w[m]=y&255,y/=256;for(this.u(w),w=Array(16),m=y=0;4>m;++m)for(var I=0;32>I;I+=8)w[y++]=this.g[m]>>>I&255;return w};function s(w,m){var y=c;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=m(w)}function o(w,m){this.h=m;for(var y=[],I=!0,D=w.length-1;0<=D;D--){var b=w[D]|0;I&&b==m||(y[D]=b,I=!1)}this.g=y}var c={};function u(w){return-128<=w&&128>w?s(w,function(m){return new o([m|0],0>m?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return N(d(-w));for(var m=[],y=1,I=0;w>=y;I++)m[I]=w/y|0,y*=4294967296;return new o(m,0)}function f(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return N(f(w.substring(1),m));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(m,8)),I=g,D=0;D<w.length;D+=8){var b=Math.min(8,w.length-D),v=parseInt(w.substring(D,D+b),m);8>b?(b=d(Math.pow(m,b)),I=I.j(b).add(d(v))):(I=I.j(y),I=I.add(d(v)))}return I}var g=u(0),_=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-N(this).m();for(var w=0,m=1,y=0;y<this.g.length;y++){var I=this.i(y);w+=(0<=I?I:4294967296+I)*m,m*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(x(this))return"-"+N(this).toString(w);for(var m=d(Math.pow(w,6)),y=this,I="";;){var D=j(y,m).g;y=P(y,D.j(m));var b=((0<y.g.length?y.g[0]:y.h)>>>0).toString(w);if(y=D,S(y))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function x(w){return w.h==-1}t.l=function(w){return w=P(this,w),x(w)?-1:S(w)?0:1};function N(w){for(var m=w.g.length,y=[],I=0;I<m;I++)y[I]=~w.g[I];return new o(y,~w.h).add(_)}t.abs=function(){return x(this)?N(this):this},t.add=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],I=0,D=0;D<=m;D++){var b=I+(this.i(D)&65535)+(w.i(D)&65535),v=(b>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);I=v>>>16,b&=65535,v&=65535,y[D]=v<<16|b}return new o(y,y[y.length-1]&-2147483648?-1:0)};function P(w,m){return w.add(N(m))}t.j=function(w){if(S(this)||S(w))return g;if(x(this))return x(w)?N(this).j(N(w)):N(N(this).j(w));if(x(w))return N(this.j(N(w)));if(0>this.l(E)&&0>w.l(E))return d(this.m()*w.m());for(var m=this.g.length+w.g.length,y=[],I=0;I<2*m;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<w.g.length;D++){var b=this.i(I)>>>16,v=this.i(I)&65535,jt=w.i(D)>>>16,Oi=w.i(D)&65535;y[2*I+2*D]+=v*Oi,L(y,2*I+2*D),y[2*I+2*D+1]+=b*Oi,L(y,2*I+2*D+1),y[2*I+2*D+1]+=v*jt,L(y,2*I+2*D+1),y[2*I+2*D+2]+=b*jt,L(y,2*I+2*D+2)}for(I=0;I<m;I++)y[I]=y[2*I+1]<<16|y[2*I];for(I=m;I<2*m;I++)y[I]=0;return new o(y,0)};function L(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function V(w,m){this.g=w,this.h=m}function j(w,m){if(S(m))throw Error("division by zero");if(S(w))return new V(g,g);if(x(w))return m=j(N(w),m),new V(N(m.g),N(m.h));if(x(m))return m=j(w,N(m)),new V(N(m.g),m.h);if(30<w.g.length){if(x(w)||x(m))throw Error("slowDivide_ only works with positive integers.");for(var y=_,I=m;0>=I.l(w);)y=pe(y),I=pe(I);var D=q(y,1),b=q(I,1);for(I=q(I,2),y=q(y,2);!S(I);){var v=b.add(I);0>=v.l(w)&&(D=D.add(y),b=v),I=q(I,1),y=q(y,1)}return m=P(w,D.j(m)),new V(D,m)}for(D=g;0<=w.l(m);){for(y=Math.max(1,Math.floor(w.m()/m.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=d(y),v=b.j(m);x(v)||0<v.l(w);)y-=I,b=d(y),v=b.j(m);S(b)&&(b=_),D=D.add(b),w=P(w,v)}return new V(D,w)}t.A=function(w){return j(this,w).h},t.and=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],I=0;I<m;I++)y[I]=this.i(I)&w.i(I);return new o(y,this.h&w.h)},t.or=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],I=0;I<m;I++)y[I]=this.i(I)|w.i(I);return new o(y,this.h|w.h)},t.xor=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],I=0;I<m;I++)y[I]=this.i(I)^w.i(I);return new o(y,this.h^w.h)};function pe(w){for(var m=w.g.length+1,y=[],I=0;I<m;I++)y[I]=w.i(I)<<1|w.i(I-1)>>>31;return new o(y,w.h)}function q(w,m){var y=m>>5;m%=32;for(var I=w.g.length-y,D=[],b=0;b<I;b++)D[b]=0<m?w.i(b+y)>>>m|w.i(b+y+1)<<32-m:w.i(b+y);return new o(D,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qh=sw.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Dn=sw.Integer=o}).apply(typeof iw<"u"?iw:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kt={};var Hh,Gh,ci,zh,Rs,wc,Wh,Kh,Qh;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in h))break e;h=h[T]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,p=!1,T={next:function(){if(!p&&h<a.length){var A=h++;return{value:l(A,a[A]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function _(a,l,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,_.apply(null,arguments)}function E(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function S(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,T,A){for(var O=Array(arguments.length-2),de=2;de<arguments.length;de++)O[de-2]=arguments[de];return l.prototype[T].apply(p,O)}}function x(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function N(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(u(p)){let T=a.length||0,A=p.length||0;a.length=T+A;for(let O=0;O<A;O++)a[T+O]=p[O]}else a.push(p)}}class P{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function L(a){return/^[\s\xa0]*$/.test(a)}function V(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var pe=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function q(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function w(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function m(a){let l={};for(let h in a)l[h]=a[h];return l}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,l){let h,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(h in p)a[h]=p[h];for(let A=0;A<y.length;A++)h=y[A],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function D(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function b(a){c.setTimeout(()=>{throw a},0)}function v(){var a=Mu;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class jt{constructor(){this.h=this.g=null}add(l,h){let p=Oi.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Oi=new P(()=>new wD,a=>a.reset());class wD{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ki,Fi=!1,Mu=new jt,vg=()=>{let a=c.Promise.resolve(void 0);ki=()=>{a.then(ED)}};var ED=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){b(h)}var l=Oi;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}Fi=!1};function Zt(){this.s=this.s,this.C=this.C}Zt.prototype.s=!1,Zt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var DD=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function Vi(a,l){if(Ve.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(pe){e:{try{j(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:TD[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Vi.aa.h.call(this)}}S(Vi,Ve);var TD={2:"touch",3:"pen",4:"mouse"};Vi.prototype.h=function(){Vi.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Li="closure_listenable_"+(1e6*Math.random()|0),bD=0;function CD(a,l,h,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=T,this.key=++bD,this.da=this.fa=!1}function go(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function mo(a){this.src=a,this.g={},this.h=0}mo.prototype.add=function(a,l,h,p,T){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var O=Ru(a,l,p,T);return-1<O?(l=a[O],h||(l.fa=!1)):(l=new CD(l,this.src,A,!!p,T),l.fa=h,a.push(l)),l};function xu(a,l){var h=l.type;if(h in a.g){var p=a.g[h],T=Array.prototype.indexOf.call(p,l,void 0),A;(A=0<=T)&&Array.prototype.splice.call(p,T,1),A&&(go(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Ru(a,l,h,p){for(var T=0;T<a.length;++T){var A=a[T];if(!A.da&&A.listener==l&&A.capture==!!h&&A.ha==p)return T}return-1}var Pu="closure_lm_"+(1e6*Math.random()|0),Ou={};function _g(a,l,h,p,T){if(p&&p.once)return wg(a,l,h,p,T);if(Array.isArray(l)){for(var A=0;A<l.length;A++)_g(a,l[A],h,p,T);return null}return h=Lu(h),a&&a[Li]?a.K(l,h,d(p)?!!p.capture:!!p,T):Ig(a,l,h,!1,p,T)}function Ig(a,l,h,p,T,A){if(!l)throw Error("Invalid event type");var O=d(T)?!!T.capture:!!T,de=Fu(a);if(de||(a[Pu]=de=new mo(a)),h=de.add(l,h,p,O,A),h.proxy)return h;if(p=AD(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)DD||(T=O),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(Dg(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function AD(){function a(h){return l.call(a.src,a.listener,h)}let l=SD;return a}function wg(a,l,h,p,T){if(Array.isArray(l)){for(var A=0;A<l.length;A++)wg(a,l[A],h,p,T);return null}return h=Lu(h),a&&a[Li]?a.L(l,h,d(p)?!!p.capture:!!p,T):Ig(a,l,h,!0,p,T)}function Eg(a,l,h,p,T){if(Array.isArray(l))for(var A=0;A<l.length;A++)Eg(a,l[A],h,p,T);else p=d(p)?!!p.capture:!!p,h=Lu(h),a&&a[Li]?(a=a.i,l=String(l).toString(),l in a.g&&(A=a.g[l],h=Ru(A,h,p,T),-1<h&&(go(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete a.g[l],a.h--)))):a&&(a=Fu(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Ru(l,h,p,T)),(h=-1<a?l[a]:null)&&ku(h))}function ku(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[Li])xu(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent(Dg(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=Fu(l))?(xu(h,a),h.h==0&&(h.src=null,l[Pu]=null)):go(a)}}}function Dg(a){return a in Ou?Ou[a]:Ou[a]="on"+a}function SD(a,l){if(a.da)a=!0;else{l=new Vi(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&ku(a),a=h.call(p,l)}return a}function Fu(a){return a=a[Pu],a instanceof mo?a:null}var Vu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lu(a){return typeof a=="function"?a:(a[Vu]||(a[Vu]=function(l){return a.handleEvent(l)}),a[Vu])}function Le(){Zt.call(this),this.i=new mo(this),this.M=this,this.F=null}S(Le,Zt),Le.prototype[Li]=!0,Le.prototype.removeEventListener=function(a,l,h,p){Eg(this,a,l,h,p)};function He(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Ve(l,a);else if(l instanceof Ve)l.target=l.target||a;else{var T=l;l=new Ve(p,a),I(l,T)}if(T=!0,h)for(var A=h.length-1;0<=A;A--){var O=l.g=h[A];T=yo(O,p,!0,l)&&T}if(O=l.g=a,T=yo(O,p,!0,l)&&T,T=yo(O,p,!1,l)&&T,h)for(A=0;A<h.length;A++)O=l.g=h[A],T=yo(O,p,!1,l)&&T}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)go(h[p]);delete a.g[l],a.h--}}this.F=null},Le.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},Le.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function yo(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,A=0;A<l.length;++A){var O=l[A];if(O&&!O.da&&O.capture==h){var de=O.listener,Pe=O.ha||O.src;O.fa&&xu(a.i,O),T=de.call(Pe,p)!==!1&&T}}return T&&!p.defaultPrevented}function Tg(a,l,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function bg(a){a.g=Tg(()=>{a.g=null,a.i&&(a.i=!1,bg(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class ND extends Zt{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:bg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(a){Zt.call(this),this.h=a,this.g={}}S(ji,Zt);var Cg=[];function Ag(a){q(a.g,function(l,h){this.g.hasOwnProperty(h)&&ku(l)},a),a.g={}}ji.prototype.N=function(){ji.aa.N.call(this),Ag(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ju=c.JSON.stringify,MD=c.JSON.parse,xD=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Uu(){}Uu.prototype.h=null;function Sg(a){return a.h||(a.h=a.i())}function Ng(){}var Ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bu(){Ve.call(this,"d")}S(Bu,Ve);function $u(){Ve.call(this,"c")}S($u,Ve);var xn={},Mg=null;function vo(){return Mg=Mg||new Le}xn.La="serverreachability";function xg(a){Ve.call(this,xn.La,a)}S(xg,Ve);function Bi(a){let l=vo();He(l,new xg(l))}xn.STAT_EVENT="statevent";function Rg(a,l){Ve.call(this,xn.STAT_EVENT,a),this.stat=l}S(Rg,Ve);function Ge(a){let l=vo();He(l,new Rg(l,a))}xn.Ma="timingevent";function Pg(a,l){Ve.call(this,xn.Ma,a),this.size=l}S(Pg,Ve);function $i(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function qi(){this.g=!0}qi.prototype.xa=function(){this.g=!1};function RD(a,l,h,p,T,A){a.info(function(){if(a.g)if(A)for(var O="",de=A.split("&"),Pe=0;Pe<de.length;Pe++){var se=de[Pe].split("=");if(1<se.length){var je=se[0];se=se[1];var Ue=je.split("_");O=2<=Ue.length&&Ue[1]=="type"?O+(je+"="+se+"&"):O+(je+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+h+`
`+O})}function PD(a,l,h,p,T,A,O){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+h+`
`+A+" "+O})}function Tr(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+kD(a,h)+(p?" "+p:"")})}function OD(a,l){a.info(function(){return"TIMEOUT: "+l})}qi.prototype.info=function(){};function kD(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return ju(h)}catch{return l}}var _o={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Og={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qu;function Io(){}S(Io,Uu),Io.prototype.g=function(){return new XMLHttpRequest},Io.prototype.i=function(){return{}},qu=new Io;function en(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kg}function kg(){this.i=null,this.g="",this.h=!1}var Fg={},Hu={};function Gu(a,l,h){a.L=1,a.v=To(Ut(l)),a.m=h,a.P=!0,Vg(a,null)}function Vg(a,l){a.F=Date.now(),wo(a),a.A=Ut(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Jg(h.i,"t",p),a.C=0,h=a.j.J,a.h=new kg,a.g=gm(a.j,h?l:null,!a.m),0<a.O&&(a.M=new ND(_(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(Cg[0]=T.toString()),T=Cg);for(var A=0;A<T.length;A++){var O=_g(h,T[A],p||l.handleEvent,!1,l.h||l);if(!O)break;l.g[O.key]=O}l=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),Bi(),RD(a.i,a.u,a.A,a.l,a.R,a.m)}en.prototype.ca=function(a){a=a.target;let l=this.M;l&&Bt(a)==3?l.j():this.Y(a)},en.prototype.Y=function(a){try{if(a==this.g)e:{let Ue=Bt(this.g);var l=this.g.Ba();let Ar=this.g.Z();if(!(3>Ue)&&(Ue!=3||this.g&&(this.h.h||this.g.oa()||im(this.g)))){this.J||Ue!=4||l==7||(l==8||0>=Ar?Bi(3):Bi(2)),zu(this);var h=this.g.Z();this.X=h;t:if(Lg(this)){var p=im(this.g);a="";var T=p.length,A=Bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),Hi(this);var O="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(A&&l==T-1)});p.length=0,this.h.g+=a,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=h==200,PD(this.i,this.u,this.A,this.l,this.R,Ue,h),this.o){if(this.T&&!this.K){t:{if(this.g){var de,Pe=this.g;if((de=Pe.g?Pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(de)){var se=de;break t}}se=null}if(h=se)Tr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wu(this,h);else{this.o=!1,this.s=3,Ge(12),Rn(this),Hi(this);break e}}if(this.P){h=!0;let gt;for(;!this.J&&this.C<O.length;)if(gt=FD(this,O),gt==Hu){Ue==4&&(this.s=4,Ge(14),h=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Fg){this.s=4,Ge(15),Tr(this.i,this.l,O,"[Invalid Chunk]"),h=!1;break}else Tr(this.i,this.l,gt,null),Wu(this,gt);if(Lg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||O.length!=0||this.h.h||(this.s=1,Ge(16),h=!1),this.o=this.o&&h,!h)Tr(this.i,this.l,O,"[Invalid Chunked Response]"),Rn(this),Hi(this);else if(0<O.length&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.ba&&!je.M&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Zu(je),je.M=!0,Ge(11))}}else Tr(this.i,this.l,O,null),Wu(this,O);Ue==4&&Rn(this),this.o&&!this.J&&(Ue==4?dm(this.j,this):(this.o=!1,wo(this)))}else ZD(this.g),h==400&&0<O.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Rn(this),Hi(this)}}}catch{}finally{}};function Lg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function FD(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?Hu:(h=Number(l.substring(h,p)),isNaN(h)?Fg:(p+=1,p+h>l.length?Hu:(l=l.slice(p,p+h),a.C=p+h,l)))}en.prototype.cancel=function(){this.J=!0,Rn(this)};function wo(a){a.S=Date.now()+a.I,jg(a,a.I)}function jg(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=$i(_(a.ba,a),l)}function zu(a){a.B&&(c.clearTimeout(a.B),a.B=null)}en.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(OD(this.i,this.A),this.L!=2&&(Bi(),Ge(17)),Rn(this),this.s=2,Hi(this)):jg(this,this.S-a)};function Hi(a){a.j.G==0||a.J||dm(a.j,a)}function Rn(a){zu(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,Ag(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function Wu(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||Ku(h.h,a))){if(!a.K&&Ku(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)No(h),Ao(h);else break e;Xu(h),Ge(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=$i(_(h.Za,h),6e3));if(1>=$g(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else On(h,11)}else if((a.K||h.g==a)&&No(h),!L(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let se=T[l];if(h.T=se[0],se=se[1],h.G==2)if(se[0]=="c"){h.K=se[1],h.ia=se[2];let je=se[3];je!=null&&(h.la=je,h.j.info("VER="+h.la));let Ue=se[4];Ue!=null&&(h.Aa=Ue,h.j.info("SVER="+h.Aa));let Ar=se[5];Ar!=null&&typeof Ar=="number"&&0<Ar&&(p=1.5*Ar,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let gt=a.g;if(gt){let xo=gt.g?gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var A=p.h;A.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Qu(A,A.h),A.h=null))}if(p.D){let el=gt.g?gt.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(p.ya=el,ye(p.I,p.D,el))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var O=a;if(p.qa=pm(p,p.J?p.ia:null,p.W),O.K){qg(p.h,O);var de=O,Pe=p.L;Pe&&(de.I=Pe),de.B&&(zu(de),wo(de)),p.g=O}else um(p);0<h.i.length&&So(h)}else se[0]!="stop"&&se[0]!="close"||On(h,7);else h.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?On(h,7):Ju(h):se[0]!="noop"&&h.l&&h.l.ta(se),h.v=0)}}Bi(4)}catch{}}var VD=class{constructor(a,l){this.g=a,this.map=l}};function Ug(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function $g(a){return a.h?1:a.g?a.g.size:0}function Ku(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function Qu(a,l){a.g?a.g.add(l):a.h=l}function qg(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}Ug.prototype.cancel=function(){if(this.i=Hg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Hg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return x(a.i)}function LD(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function jD(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function Gg(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=jD(a),p=LD(a),T=p.length,A=0;A<T;A++)l.call(void 0,p[A],h&&h[A],a)}var zg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UD(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),T=null;if(0<=p){var A=a[h].substring(0,p);T=a[h].substring(p+1)}else A=a[h];l(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Pn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Pn){this.h=a.h,Eo(this,a.j),this.o=a.o,this.g=a.g,Do(this,a.s),this.l=a.l;var l=a.i,h=new Wi;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),Wg(this,h),this.m=a.m}else a&&(l=String(a).match(zg))?(this.h=!1,Eo(this,l[1]||"",!0),this.o=Gi(l[2]||""),this.g=Gi(l[3]||"",!0),Do(this,l[4]),this.l=Gi(l[5]||"",!0),Wg(this,l[6]||"",!0),this.m=Gi(l[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}Pn.prototype.toString=function(){var a=[],l=this.j;l&&a.push(zi(l,Kg,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(zi(l,Kg,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(zi(h,h.charAt(0)=="/"?qD:$D,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",zi(h,GD)),a.join("")};function Ut(a){return new Pn(a)}function Eo(a,l,h){a.j=h?Gi(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function Do(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function Wg(a,l,h){l instanceof Wi?(a.i=l,zD(a.i,a.h)):(h||(l=zi(l,HD)),a.i=new Wi(l,a.h))}function ye(a,l,h){a.i.set(l,h)}function To(a){return ye(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Gi(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function zi(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,BD),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function BD(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Kg=/[#\/\?@]/g,$D=/[#\?:]/g,qD=/[#\?]/g,HD=/[#\?@]/g,GD=/#/g;function Wi(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function tn(a){a.g||(a.g=new Map,a.h=0,a.i&&UD(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}t=Wi.prototype,t.add=function(a,l){tn(this),this.i=null,a=br(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Qg(a,l){tn(a),l=br(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Yg(a,l){return tn(a),l=br(a,l),a.g.has(l)}t.forEach=function(a,l){tn(this),this.g.forEach(function(h,p){h.forEach(function(T){a.call(l,T,p,this)},this)},this)},t.na=function(){tn(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let T=a[p];for(let A=0;A<T.length;A++)h.push(l[p])}return h},t.V=function(a){tn(this);let l=[];if(typeof a=="string")Yg(this,a)&&(l=l.concat(this.g.get(br(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},t.set=function(a,l){return tn(this),this.i=null,a=br(this,a),Yg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},t.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Jg(a,l,h){Qg(a,l),0<h.length&&(a.i=null,a.g.set(br(a,l),x(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let A=encodeURIComponent(String(p)),O=this.V(p);for(p=0;p<O.length;p++){var T=A;O[p]!==""&&(T+="="+encodeURIComponent(String(O[p]))),a.push(T)}}return this.i=a.join("&")};function br(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function zD(a,l){l&&!a.j&&(tn(a),a.i=null,a.g.forEach(function(h,p){var T=p.toLowerCase();p!=T&&(Qg(this,p),Jg(this,T,h))},a)),a.j=l}function WD(a,l){let h=new qi;if(c.Image){let p=new Image;p.onload=E(nn,h,"TestLoadImage: loaded",!0,l,p),p.onerror=E(nn,h,"TestLoadImage: error",!1,l,p),p.onabort=E(nn,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=E(nn,h,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function KD(a,l){let h=new qi,p=new AbortController,T=setTimeout(()=>{p.abort(),nn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(A=>{clearTimeout(T),A.ok?nn(h,"TestPingServer: ok",!0,l):nn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),nn(h,"TestPingServer: error",!1,l)})}function nn(a,l,h,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(h)}catch{}}function QD(){this.g=new xD}function YD(a,l,h){let p=h||"";try{Gg(a,function(T,A){let O=T;d(T)&&(O=ju(T)),l.push(p+A+"="+encodeURIComponent(O))})}catch(T){throw l.push(p+"type="+encodeURIComponent("_badmap")),T}}function Ki(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Ki,Uu),Ki.prototype.g=function(){return new bo(this.l,this.j)},Ki.prototype.i=function(a){return function(){return a}}({});function bo(a,l){Le.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(bo,Le),t=bo.prototype,t.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,Yi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?Qi(this):Yi(this),this.readyState==3&&Xg(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Qi(this))},t.Qa=function(a){this.g&&(this.response=a,Qi(this))},t.ga=function(){this.g&&Qi(this)};function Qi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Yi(a)}t.setRequestHeader=function(a,l){this.u.append(a,l)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function Yi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Zg(a){let l="";return q(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function Yu(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Zg(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):ye(a,l,h))}function ve(a){Le.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ve,Le);var JD=/^https?$/i,XD=["POST","PUT"];t=ve.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qu.g(),this.v=this.o?Sg(this.o):Sg(qu),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(A){em(this,A);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)h.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let A of p.keys())h.set(A,p.get(A));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(XD,l,void 0))||p||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of h)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rm(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){em(this,A)}};function em(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,tm(a),Co(a)}function tm(a){a.A||(a.A=!0,He(a,"complete"),He(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,He(this,"complete"),He(this,"abort"),Co(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Co(this,!0)),ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nm(this):this.bb())},t.bb=function(){nm(this)};function nm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Bt(a)!=4||a.Z()!=2)){if(a.u&&Bt(a)==4)Tg(a.Ea,0,a);else if(He(a,"readystatechange"),Bt(a)==4){a.h=!1;try{let O=a.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=O===0){var T=String(a.D).match(zg)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),p=!JD.test(T?T.toLowerCase():"")}h=p}if(h)He(a,"complete"),He(a,"success");else{a.m=6;try{var A=2<Bt(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",tm(a)}}finally{Co(a)}}}}function Co(a,l){if(a.g){rm(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||He(a,"ready");try{h.onreadystatechange=p}catch{}}}function rm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Bt(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),MD(l)}};function im(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ZD(a){let l={};a=(a.g&&2<=Bt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(L(a[p]))continue;var h=D(a[p]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=l[T]||[];l[T]=A,A.push(h)}w(l,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ji(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function sm(a){this.Aa=0,this.i=[],this.j=new qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ji("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ji("baseRetryDelayMs",5e3,a),this.cb=Ji("retryDelaySeedMs",1e4,a),this.Wa=Ji("forwardChannelMaxRetries",2,a),this.wa=Ji("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ug(a&&a.concurrentRequestLimit),this.Da=new QD,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sm.prototype,t.la=8,t.G=1,t.connect=function(a,l,h,p){Ge(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=pm(this,null,this.W),So(this)};function Ju(a){if(om(a),a.G==3){var l=a.U++,h=Ut(a.I);if(ye(h,"SID",a.K),ye(h,"RID",l),ye(h,"TYPE","terminate"),Xi(a,h),l=new en(a,a.j,l),l.L=2,l.v=To(Ut(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=gm(l.j,null),l.g.ea(l.v)),l.F=Date.now(),wo(l)}fm(a)}function Ao(a){a.g&&(Zu(a),a.g.cancel(),a.g=null)}function om(a){Ao(a),a.u&&(c.clearTimeout(a.u),a.u=null),No(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function So(a){if(!Bg(a.h)&&!a.s){a.s=!0;var l=a.Ga;ki||vg(),Fi||(ki(),Fi=!0),Mu.add(l,a),a.B=0}}function eT(a,l){return $g(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=$i(_(a.Ga,a,l),hm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new en(this,this.j,a),A=this.o;if(this.S&&(A?(A=m(A),I(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=cm(this,T,l),h=Ut(this.I),ye(h,"RID",a),ye(h,"CVER",22),this.D&&ye(h,"X-HTTP-Session-Id",this.D),Xi(this,h),A&&(this.O?l="headers="+encodeURIComponent(String(Zg(A)))+"&"+l:this.m&&Yu(h,this.m,A)),Qu(this.h,T),this.Ua&&ye(h,"TYPE","init"),this.P?(ye(h,"$req",l),ye(h,"SID","null"),T.T=!0,Gu(T,h,null)):Gu(T,h,l),this.G=2}}else this.G==3&&(a?am(this,a):this.i.length==0||Bg(this.h)||am(this))};function am(a,l){var h;l?h=l.l:h=a.U++;let p=Ut(a.I);ye(p,"SID",a.K),ye(p,"RID",h),ye(p,"AID",a.T),Xi(a,p),a.m&&a.o&&Yu(p,a.m,a.o),h=new en(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=cm(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Qu(a.h,h),Gu(h,p,l)}function Xi(a,l){a.H&&q(a.H,function(h,p){ye(l,p,h)}),a.l&&Gg({},function(h,p){ye(l,p,h)})}function cm(a,l,h){h=Math.min(a.i.length,h);var p=a.l?_(a.l.Na,a.l,a):null;e:{var T=a.i;let A=-1;for(;;){let O=["count="+h];A==-1?0<h?(A=T[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let de=!0;for(let Pe=0;Pe<h;Pe++){let se=T[Pe].g,je=T[Pe].map;if(se-=A,0>se)A=Math.max(0,T[Pe].g-100),de=!1;else try{YD(je,O,"req"+se+"_")}catch{p&&p(je)}}if(de){p=O.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function um(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;ki||vg(),Fi||(ki(),Fi=!0),Mu.add(l,a),a.v=0}}function Xu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=$i(_(a.Fa,a),hm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,lm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=$i(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),Ao(this),lm(this))};function Zu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function lm(a){a.g=new en(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=Ut(a.qa);ye(l,"RID","rpc"),ye(l,"SID",a.K),ye(l,"AID",a.T),ye(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&ye(l,"TO",a.ja),ye(l,"TYPE","xmlhttp"),Xi(a,l),a.m&&a.o&&Yu(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=To(Ut(l)),h.m=null,h.P=!0,Vg(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Ao(this),Xu(this),Ge(19))};function No(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function dm(a,l){var h=null;if(a.g==l){No(a),Zu(a),a.g=null;var p=2}else if(Ku(a.h,l))h=l.D,qg(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;p=vo(),He(p,new Pg(p,h)),So(a)}else um(a);else if(T=l.s,T==3||T==0&&0<l.X||!(p==1&&eT(a,l)||p==2&&Xu(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:On(a,5);break;case 4:On(a,10);break;case 3:On(a,6);break;default:On(a,2)}}}function hm(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function On(a,l){if(a.j.info("Error code "+l),l==2){var h=_(a.fb,a),p=a.Xa;let T=!p;p=new Pn(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Eo(p,"https"),To(p),T?WD(p.toString(),h):KD(p.toString(),h)}else Ge(2);a.G=0,a.l&&a.l.sa(l),fm(a),om(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function fm(a){if(a.G=0,a.ka=[],a.l){let l=Hg(a.h);(l.length!=0||a.i.length!=0)&&(N(a.ka,l),N(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function pm(a,l,h){var p=h instanceof Pn?Ut(h):new Pn(h);if(p.g!="")l&&(p.g=l+"."+p.g),Do(p,p.s);else{var T=c.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var A=new Pn(null);p&&Eo(A,p),l&&(A.g=l),T&&Do(A,T),h&&(A.l=h),p=A}return h=a.D,l=a.ya,h&&l&&ye(p,h,l),ye(p,"VER",a.la),Xi(a,p),p}function gm(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new ve(new Ki({eb:h})):new ve(a.pa),l.Ha(a.J),l}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mm(){}t=mm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mo(){}Mo.prototype.g=function(a,l){return new Ze(a,l)};function Ze(a,l){Le.call(this),this.g=new sm(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!L(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!L(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Cr(this)}S(Ze,Le),Ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ze.prototype.close=function(){Ju(this.g)},Ze.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=ju(a),a=h);l.i.push(new VD(l.Ya++,a)),l.G==3&&So(l)},Ze.prototype.N=function(){this.g.l=null,delete this.j,Ju(this.g),delete this.g,Ze.aa.N.call(this)};function ym(a){Bu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}S(ym,Bu);function vm(){$u.call(this),this.status=1}S(vm,$u);function Cr(a){this.g=a}S(Cr,mm),Cr.prototype.ua=function(){He(this.g,"a")},Cr.prototype.ta=function(a){He(this.g,new ym(a))},Cr.prototype.sa=function(a){He(this.g,new vm)},Cr.prototype.ra=function(){He(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,Ze.prototype.send=Ze.prototype.o,Ze.prototype.open=Ze.prototype.m,Ze.prototype.close=Ze.prototype.close,Qh=Kt.createWebChannelTransport=function(){return new Mo},Kh=Kt.getStatEventTarget=function(){return vo()},Wh=Kt.Event=xn,wc=Kt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_o.NO_ERROR=0,_o.TIMEOUT=8,_o.HTTP_ERROR=6,Rs=Kt.ErrorCode=_o,Og.COMPLETE="complete",zh=Kt.EventType=Og,Ng.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",Le.prototype.listen=Le.prototype.K,ci=Kt.WebChannel=Ng,Gh=Kt.FetchXmlHttpFactory=Ki,ve.prototype.listenOnce=ve.prototype.L,ve.prototype.getLastError=ve.prototype.Ka,ve.prototype.getLastErrorCode=ve.prototype.Ba,ve.prototype.getStatus=ve.prototype.Z,ve.prototype.getResponseJson=ve.prototype.Oa,ve.prototype.getResponseText=ve.prototype.oa,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Ha,Hh=Kt.XhrIo=ve}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});var ow="@firebase/firestore";var Re=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Re.UNAUTHENTICATED=new Re(null),Re.GOOGLE_CREDENTIALS=new Re("google-credentials-uid"),Re.FIRST_PARTY=new Re("first-party-uid"),Re.MOCK_USER=new Re("mock-user");var Si="10.12.1";var dr=new In("@firebase/firestore");function Ps(){return dr.logLevel}function k(t,...e){if(dr.logLevel<=X.DEBUG){let n=e.map(Mp);dr.debug(`Firestore (${Si}): ${t}`,...n)}}function Qt(t,...e){if(dr.logLevel<=X.ERROR){let n=e.map(Mp);dr.error(`Firestore (${Si}): ${t}`,...n)}}function gi(t,...e){if(dr.logLevel<=X.WARN){let n=e.map(Mp);dr.warn(`Firestore (${Si}): ${t}`,...n)}}function Mp(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function B(t="Unexpected state"){let e=`FIRESTORE (${Si}) INTERNAL ASSERTION FAILED: `+t;throw Qt(e),new Error(e)}function me(t,e){t||B()}function G(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends dt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Pt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Cc=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ef=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Re.UNAUTHENTICATED))}shutdown(){}},tf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},nf=class{constructor(e){this.t=e,this.currentUser=Re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>C(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new Cc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new Re(e)}},rf=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Re.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},sf=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rf(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Re.FIRST_PARTY))}shutdown(){}invalidateToken(){}},of=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},af=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,k("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new of(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function ox(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ac=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=ox(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function mi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Fe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var z=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Fe(0,0))}static max(){return new t(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sc=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(),r===void 0?r=e.length-n:r>e.length-n&&B(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},we=class t extends Sc{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},ax=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class t extends Sc{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return ax.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var U=class t{constructor(e){this.path=e}static fromPath(e){return new t(we.fromString(e))}static fromName(e){return new t(we.fromString(e).popFirst(5))}static empty(){return new t(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new we(e.slice()))}};var cf=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};cf.UNKNOWN_ID=-1;function cx(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=z.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new hr(i,U.empty(),e)}function ux(t){return new hr(t.readTime,t.key,-1)}var hr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(z.min(),U.empty(),-1)}static max(){return new t(z.max(),U.empty(),-1)}};function lx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=U.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var dx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",uf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Js(t){return C(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==dx)throw t;k("LocalStore","Unexpectedly lost primary lease")})}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;n(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function hx(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xs(t){return t.name==="IndexedDbTransactionError"}var kw=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function iu(t){return t==null}function js(t){return t===0&&1/t==-1/0}function fx(t){return typeof t=="number"&&Number.isInteger(t)&&!js(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var px=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jB=[...px,"documentOverlays"],gx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mx=gx,UB=[...mx,"indexConfiguration","indexState","indexEntries"];function aw(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ni(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fw(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ee=class t{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hi(this.root,e,this.comparator,!1)}getReverseIterator(){return new hi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hi(this.root,e,this.comparator,!0)}},hi=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ot=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();let e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}};Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nc(this.data.getIterator())}getIteratorFrom(e){return new Nc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Nc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Rt=class t{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(st.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mi(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Mc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ke=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mc("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ke.EMPTY_BYTE_STRING=new Ke("");var yx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yt(t){if(me(!!t),typeof t=="string"){let e=0,n=yx.exec(t);if(me(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(t.seconds),nanos:Ie(t.nanos)}}function Ie(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function bn(t){return typeof t=="string"?Ke.fromBase64String(t):Ke.fromUint8Array(t)}function xp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Rp(t){let e=t.mapValue.fields.__previous_value__;return xp(e)?Rp(e):e}function Us(t){let e=Yt(t.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}var lf=class{constructor(e,n,r,i,s,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},xc=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ec={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xp(t)?4:Vw(t)?9007199254740991:10:B()}function Vt(t,e){if(t===e)return!0;let n=fr(t);if(n!==fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Us(t).isEqual(Us(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Yt(i.timestampValue),c=Yt(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return bn(i.bytesValue).isEqual(bn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ie(i.geoPointValue.latitude)===Ie(s.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ie(i.integerValue)===Ie(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ie(i.doubleValue),c=Ie(s.doubleValue);return o===c?js(o)===js(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return mi(t.arrayValue.values||[],e.arrayValue.values||[],Vt);case 10:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(aw(o)!==aw(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Vt(o[u],c[u])))return!1;return!0}(t,e);default:return B()}}function Bs(t,e){return(t.values||[]).find(n=>Vt(n,e))!==void 0}function yi(t,e){if(t===e)return 0;let n=fr(t),r=fr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Ie(s.integerValue||s.doubleValue),u=Ie(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return cw(t.timestampValue,e.timestampValue);case 4:return cw(Us(t),Us(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,o){let c=bn(s),u=bn(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=ce(c[d],u[d]);if(f!==0)return f}return ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ce(Ie(s.latitude),Ie(o.latitude));return c!==0?c:ce(Ie(s.longitude),Ie(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let c=s.values||[],u=o.values||[];for(let d=0;d<c.length&&d<u.length;++d){let f=yi(c[d],u[d]);if(f)return f}return ce(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ec.mapValue&&o===Ec.mapValue)return 0;if(s===Ec.mapValue)return 1;if(o===Ec.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let _=ce(u[g],f[g]);if(_!==0)return _;let E=yi(c[u[g]],d[f[g]]);if(E!==0)return E}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw B()}}function cw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=Yt(t),r=Yt(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function vi(t){return df(t)}function df(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Yt(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return bn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return U.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=df(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${df(n.fields[o])}`;return i+"}"}(t.mapValue):B()}function hf(t){return!!t&&"integerValue"in t}function Pp(t){return!!t&&"arrayValue"in t}function uw(t){return!!t&&"nullValue"in t}function lw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tc(t){return!!t&&"mapValue"in t}function ks(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ni(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ks(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ks(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Vw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Et=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ks(n)}setAll(e){let n=st.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=ks(o):i.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Tc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ni(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(ks(this.value))}};function Lw(t){let e=[];return Ni(t.fields,(n,r)=>{let i=new st([n]);if(Tc(r)){let s=Lw(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Rt(e)}var Dt=class t{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,z.min(),z.min(),z.min(),Et.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,z.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,z.min(),z.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,z.min(),z.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var _i=class{constructor(e,n){this.position=e,this.inclusive=n}};function dw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=U.comparator(U.fromName(o.referenceValue),n.key):r=yi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vt(t.position[n],e.position[n]))return!1;return!0}var Ii=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function vx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Rc=class{},Ne=class t extends Rc{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pf(e,n,r):n==="array-contains"?new yf(e,r):n==="in"?new vf(e,r):n==="not-in"?new _f(e,r):n==="array-contains-any"?new If(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gf(e,r):new mf(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yi(n,this.value)):n!==null&&fr(this.value)===fr(n)&&this.matchesComparison(yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Lt=class t extends Rc{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return jw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function jw(t){return t.op==="and"}function Uw(t){return _x(t)&&jw(t)}function _x(t){for(let e of t.filters)if(e instanceof Lt)return!1;return!0}function ff(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+vi(t.value);if(Uw(t))return t.filters.map(e=>ff(e)).join(",");{let e=t.filters.map(n=>ff(n)).join(",");return`${t.op}(${e})`}}function Bw(t,e){return t instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&Vt(r.value,i.value)}(t,e):t instanceof Lt?function(r,i){return i instanceof Lt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&Bw(o,i.filters[c]),!0):!1}(t,e):void B()}function $w(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${vi(n.value)}`}(t):t instanceof Lt?function(n){return n.op.toString()+" {"+n.getFilters().map($w).join(" ,")+"}"}(t):"Filter"}var pf=class extends Ne{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){let n=U.comparator(e.key,this.key);return this.matchesComparison(n)}},gf=class extends Ne{constructor(e,n){super(e,"in",n),this.keys=qw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},mf=class extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=qw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function qw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>U.fromName(r.referenceValue))}var yf=class extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Pp(n)&&Bs(n.arrayValue,this.value)}},vf=class extends Ne{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Bs(this.value.arrayValue,n)}},_f=class extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Bs(this.value.arrayValue,n)}},If=class extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Pp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bs(this.value.arrayValue,r))}};var wf=class{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function fw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new wf(t,e,n,r,i,s,o)}function Op(t){let e=G(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ff(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),iu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vi(r)).join(",")),e.ue=n}return e.ue}function kp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Bw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hw(t.startAt,e.startAt)&&hw(t.endAt,e.endAt)}function Ef(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var wi=class{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Ix(t,e,n,r,i,s,o,c){return new wi(t,e,n,r,i,s,o,c)}function Fp(t){return new wi(t)}function pw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wx(t){return t.collectionGroup!==null}function Fs(t){let e=G(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new qe(st.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ii(s,r))}),n.has(st.keyField().canonicalString())||e.ce.push(new Ii(st.keyField(),r))}return e.ce}function kt(t){let e=G(t);return e.le||(e.le=Ex(e,Fs(t))),e.le}function Ex(t,e){if(t.limitType==="F")return fw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ii(i.field,s)});let n=t.endAt?new _i(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _i(t.startAt.position,t.startAt.inclusive):null;return fw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Df(t,e,n){return new wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function su(t,e){return kp(kt(t),kt(e))&&t.limitType===e.limitType}function Hw(t){return`${Op(kt(t))}|lt:${t.limitType}`}function ui(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$w(i)).join(", ")}]`),iu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vi(i)).join(",")),`Target(${r})`}(kt(t))}; limitType=${t.limitType})`}function ou(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):U.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Fs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let d=dw(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Fs(r),i)||r.endAt&&!function(o,c,u){let d=dw(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Fs(r),i))}(t,e)}function Dx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Gw(t){return(e,n)=>{let r=!1;for(let i of Fs(t)){let s=Tx(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Tx(t,e,n){let r=t.field.isKeyField()?U.comparator(e.key,n.key):function(s,o,c){let u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?yi(u,d):B()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}var Cn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Fw(this.inner)}size(){return this.innerSize}};var bx=new Ee(U.comparator);function Jt(){return bx}var zw=new Ee(U.comparator);function Os(...t){let e=zw;for(let n of t)e=e.insert(n.key,n);return e}function Ww(t){let e=zw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function or(){return Vs()}function Kw(){return Vs()}function Vs(){return new Cn(t=>t.toString(),(t,e)=>t.isEqual(e))}var Cx=new Ee(U.comparator),Ax=new qe(U.comparator);function Z(...t){let e=Ax;for(let n of t)e=e.add(n);return e}var Sx=new qe(ce);function Nx(){return Sx}function Qw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:js(e)?"-0":e}}function Yw(t){return{integerValue:""+t}}function Mx(t,e){return fx(e)?Yw(e):Qw(t,e)}var Ei=class{constructor(){this._=void 0}};function xx(t,e,n){return t instanceof Di?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xp(s)&&(s=Rp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof pr?Xw(t,e):t instanceof gr?Zw(t,e):function(i,s){let o=Jw(i,s),c=gw(o)+gw(i.Pe);return hf(o)&&hf(i.Pe)?Yw(c):Qw(i.serializer,c)}(t,e)}function Rx(t,e,n){return t instanceof pr?Xw(t,e):t instanceof gr?Zw(t,e):n}function Jw(t,e){return t instanceof Ti?function(r){return hf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Di=class extends Ei{},pr=class extends Ei{constructor(e){super(),this.elements=e}};function Xw(t,e){let n=eE(e);for(let r of t.elements)n.some(i=>Vt(i,r))||n.push(r);return{arrayValue:{values:n}}}var gr=class extends Ei{constructor(e){super(),this.elements=e}};function Zw(t,e){let n=eE(e);for(let r of t.elements)n=n.filter(i=>!Vt(i,r));return{arrayValue:{values:n}}}var Ti=class extends Ei{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function gw(t){return Ie(t.integerValue||t.doubleValue)}function eE(t){return Pp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Px(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof pr&&i instanceof pr||r instanceof gr&&i instanceof gr?mi(r.elements,i.elements,Vt):r instanceof Ti&&i instanceof Ti?Vt(r.Pe,i.Pe):r instanceof Di&&i instanceof Di}(t.transform,e.transform)}var Tf=class{constructor(e,n){this.version=e,this.transformResults=n}},ur=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var bi=class{};function tE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pc(t.key,ur.none()):new mr(t.key,t.data,ur.none());{let n=t.data,r=Et.empty(),i=new qe(st.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xt(t.key,r,new Rt(i.toArray()),ur.none())}}function Ox(t,e,n){t instanceof mr?function(i,s,o){let c=i.value.clone(),u=yw(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Xt?function(i,s,o){if(!bc(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=yw(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(nE(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ls(t,e,n,r){return t instanceof mr?function(s,o,c,u){if(!bc(s.precondition,o))return c;let d=s.value.clone(),f=vw(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xt?function(s,o,c,u){if(!bc(s.precondition,o))return c;let d=vw(s.fieldTransforms,u,o),f=o.data;return f.setAll(nE(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,c){return bc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function kx(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Jw(r.transform,i||null);s!=null&&(n===null&&(n=Et.empty()),n.set(r.field,s))}return n||null}function mw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mi(r,i,(s,o)=>Px(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var mr=class extends bi{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xt=class extends bi{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function nE(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function yw(t,e,n){let r=new Map;me(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,Rx(o,c,n[i]))}return r}function vw(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,xx(s,o,e))}return r}var Pc=class extends bi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bf=class extends bi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cf=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Ox(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ls(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ls(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Kw();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;let u=tE(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Z())}isEqual(e){return this.batchId===e.batchId&&mi(this.mutations,e.mutations,(n,r)=>mw(n,r))&&mi(this.baseMutations,e.baseMutations,(n,r)=>mw(n,r))}},Af=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length);let i=function(){return Cx}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Sf=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Nf=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ce,ie;function Fx(t){switch(t){default:return B();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function rE(t){if(t===void 0)return Qt("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ce.OK:return M.OK;case Ce.CANCELLED:return M.CANCELLED;case Ce.UNKNOWN:return M.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return M.INTERNAL;case Ce.UNAVAILABLE:return M.UNAVAILABLE;case Ce.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ce.NOT_FOUND:return M.NOT_FOUND;case Ce.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ce.ABORTED:return M.ABORTED;case Ce.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ce.DATA_LOSS:return M.DATA_LOSS;default:return B()}}(ie=Ce||(Ce={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var _w=null;function Vx(){return new TextEncoder}var Lx=new Dn([4294967295,4294967295],0);function Iw(t){let e=Vx().encode(t),n=new qh;return n.update(e),new Uint8Array(n.digest())}function ww(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dn([n,r],0),new Dn([i,s],0)]}var Mf=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ar(`Invalid padding: ${n}`);if(r<0)throw new ar(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ar(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ar(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Dn.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Dn.fromNumber(r)));return i.compare(Lx)===1&&(i=new Dn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=Iw(e),[r,i]=ww(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=Iw(e),[r,i]=ww(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ar=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Oc=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,$s.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(z.min(),i,new Ee(ce),Jt(),Z())}},$s=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Z(),Z(),Z())}};var fi=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},kc=class{constructor(e,n){this.targetId=e,this.me=n}},Fc=class{constructor(e,n,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Vc=class{constructor(){this.fe=0,this.ge=Dw(),this.pe=Ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Z(),n=Z(),r=Z();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B()}}),new $s(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=Dw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},xf=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jt(),this.qe=Ew(),this.Qe=new Ee(ce)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Ef(s))if(r===0){let o=new U(s.path);this.Ue(n,o,Dt.newNoDocument(o,z.min()))}else me(r===1);else{let o=this.Ye(n);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}_w?.et(function(f,g,_,E,S){var x,N,P,L,V,j;let pe={localCacheCount:f,existenceFilterCount:g.count,databaseId:_.database,projectId:_.projectId},q=g.unchangedNames;return q&&(pe.bloomFilter={applied:S===0,hashCount:(x=q?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(L=(P=(N=q?.bits)===null||N===void 0?void 0:N.bitmap)===null||P===void 0?void 0:P.length)!==null&&L!==void 0?L:0,padding:(j=(V=q?.bits)===null||V===void 0?void 0:V.padding)!==null&&j!==void 0?j:0,mightContain:w=>{var m;return(m=E?.mightContain(w))!==null&&m!==void 0&&m}}),pe}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,c;try{o=bn(r).toUint8Array()}catch(u){if(u instanceof Mc)return gi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Mf(o,i,s)}catch(u){return gi(u instanceof ar?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Ef(c.target)){let u=new U(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Dt.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Z();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Oc(e,n,this.Qe,this.ke,r);return this.ke=Jt(),this.qe=Ew(),this.Qe=new Ee(ce),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vc,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qe(ce),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||k("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vc),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Ew(){return new Ee(U.comparator)}function Dw(){return new Ee(U.comparator)}var jx={asc:"ASCENDING",desc:"DESCENDING"},Ux={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bx={and:"AND",or:"OR"},Rf=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Pf(t,e){return t.useProto3Json||iu(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $x(t,e){return Lc(t,e.toTimestamp())}function Ft(t){return me(!!t),z.fromTimestamp(function(n){let r=Yt(n);return new Fe(r.seconds,r.nanos)}(t))}function Vp(t,e){return Of(t,e).canonicalString()}function Of(t,e){let n=function(i){return new we(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sE(t){let e=we.fromString(t);return me(lE(e)),e}function kf(t,e){return Vp(t.databaseId,e.path)}function Yh(t,e){let n=sE(e);if(n.get(1)!==t.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new U(aE(n))}function oE(t,e){return Vp(t.databaseId,e)}function qx(t){let e=sE(t);return e.length===4?we.emptyPath():aE(e)}function Ff(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aE(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Tw(t,e,n){return{name:kf(t,e),fields:n.value.mapValue.fields}}function Hx(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(me(f===void 0||typeof f=="string"),Ke.fromBase64String(f||"")):(me(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ke.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?M.UNKNOWN:rE(d.code);return new F(f,d.message||"")}(o);n=new Fc(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Yh(t,r.document.name),s=Ft(r.document.updateTime),o=r.document.createTime?Ft(r.document.createTime):z.min(),c=new Et({mapValue:{fields:r.document.fields}}),u=Dt.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new fi(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Yh(t,r.document),s=r.readTime?Ft(r.readTime):z.min(),o=Dt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new fi([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Yh(t,r.document),s=r.removedTargetIds||[];n=new fi([],s,i,null)}else{if(!("filter"in e))return B();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Nf(i,s),c=r.targetId;n=new kc(c,o)}}return n}function Gx(t,e){let n;if(e instanceof mr)n={update:Tw(t,e.key,e.value)};else if(e instanceof Pc)n={delete:kf(t,e.key)};else if(e instanceof Xt)n={update:Tw(t,e.key,e.data),updateMask:eR(e.fieldMask)};else{if(!(e instanceof bf))return B();n={verify:kf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof Di)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof pr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof gr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ti)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw B()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$x(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(t,e.precondition)),n}function zx(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ft(i.updateTime):Ft(s);return o.isEqual(z.min())&&(o=Ft(s)),new Tf(o,i.transformResults||[])}(n,e))):[]}function Wx(t,e){return{documents:[oE(t,e.path)]}}function Kx(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oE(t,i);let s=function(d){if(d.length!==0)return uE(Lt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(_){return{field:li(_.field),direction:Jx(_.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=Pf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function Qx(t){let e=qx(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){me(r===1);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){let _=cE(g);return _ instanceof Lt&&Uw(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(_=>function(S){return new Ii(di(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(n.orderBy));let c=null;n.limit&&(c=function(g){let _;return _=typeof g=="object"?g.value:g,iu(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(g){let _=!!g.before,E=g.values||[];return new _i(E,_)}(n.startAt));let d=null;return n.endAt&&(d=function(g){let _=!g.before,E=g.values||[];return new _i(E,_)}(n.endAt)),Ix(e,i,o,s,c,"F",u,d)}function Yx(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=di(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=di(n.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=di(n.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=di(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(di(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Lt.create(n.compositeFilter.filters.map(r=>cE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B()}}(n.compositeFilter.op))}(t):B()}function Jx(t){return jx[t]}function Xx(t){return Ux[t]}function Zx(t){return Bx[t]}function li(t){return{fieldPath:t.canonicalString()}}function di(t){return st.fromServerFormat(t.fieldPath)}function uE(t){return t instanceof Ne?function(n){if(n.op==="=="){if(lw(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NAN"}};if(uw(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lw(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NAN"}};if(uw(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:li(n.field),op:Xx(n.op),value:n.value}}}(t):t instanceof Lt?function(n){let r=n.getFilters().map(i=>uE(i));return r.length===1?r[0]:{compositeFilter:{op:Zx(n.op),filters:r}}}(t):B()}function eR(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var qs=class t{constructor(e,n,r,i,s=z.min(),o=z.min(),c=Ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vf=class{constructor(e){this.ct=e}};function tR(t){let e=Qx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Df(e,e.limit,"L"):e}var jc=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ie(e.integerValue));else if("doubleValue"in e){let r=Ie(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),js(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Yt(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(bn(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Vw(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):B()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),U.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};jc.bt=new jc;var Lf=class{constructor(){this._n=new jf}addToCollectionParentIndex(e,n){return this._n.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(hr.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},jf=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(we.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(we.comparator)).toArray()}};var $B=new Uint8Array(0);var xt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(41943040,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);var Hs=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Uf=class{constructor(){this.changes=new Cn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Bf=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var $f=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ls(r.mutation,i,Rt.empty(),Fe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Z()){let i=or();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Os();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=or();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Z()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Jt(),o=Vs(),c=function(){return Vs()}();return n.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Xt)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Ls(f.mutation,d,f.mutation.getFieldMask(),Fe.now())):o.set(d.key,Rt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return c.set(d,new Bf(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Vs(),i=new Ee((o,c)=>o-c),s=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(u=>{let d=n.get(u);if(d===null)return;let f=r.get(u)||Rt.empty();f=c.applyToLocalView(d,f),r.set(u,f);let g=(i.get(c.batchId)||Z()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,g=Kw();f.forEach(_=>{if(!s.has(_)){let E=tE(n.get(_),r.get(_));E!==null&&g.set(_,E),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return U.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):R.resolve(or()),c=-1,u=s;return o.next(d=>R.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),s.get(f)?R.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,Z())).next(f=>({batchId:c,changes:Ww(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=Os();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Os();return this.indexManager.getCollectionParents(e,s).next(c=>R.forEach(c,u=>{let d=function(g,_){return new wi(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,Dt.newInvalidDocument(f)))});let c=Os();return o.forEach((u,d)=>{let f=s.get(u);f!==void 0&&Ls(f.mutation,d,Rt.empty(),Fe.now()),ou(n,d)&&(c=c.insert(u,d))}),c})}};var qf=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return R.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ft(i.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:tR(i.bundledQuery),readTime:Ft(i.readTime)}}(n)),R.resolve()}};var Hf=class{constructor(){this.overlays=new Ee(U.comparator),this.hr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let r=or();return R.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),R.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){let i=or(),s=n.length+1,o=new U(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ee((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=or(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=or(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return R.resolve(c)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Sf(n,r));let s=this.hr.get(n);s===void 0&&(s=Z(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Gs=class{constructor(){this.Pr=new qe(Ae.Ir),this.Tr=new qe(Ae.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Ae(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ae(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new U(new we([])),r=new Ae(n,e),i=new Ae(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new U(new we([])),r=new Ae(n,e),i=new Ae(n,e+1),s=Z();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ae(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ae=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return U.comparator(e.key,n.key)||ce(e.pr,n.pr)}static Er(e,n){return ce(e.pr,n.pr)||U.comparator(e.key,n.key)}};var Gf=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new qe(Ae.Ir)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Cf(s,n,r,i);this.mutationQueue.push(o);for(let c of i)this.wr=this.wr.add(new Ae(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,n){return R.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ae(n,0),i=new Ae(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let c=this.Sr(o.pr);s.push(c)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ce);return n.forEach(i=>{let s=new Ae(i,0),o=new Ae(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{r=r.add(c.pr)})}),R.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;U.isDocumentKey(s)||(s=s.child(""));let o=new Ae(new U(s),0),c=new qe(ce);return this.wr.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.pr)),!0)},o),R.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return R.forEach(n.mutations,i=>{let s=new Ae(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Ae(n,0),i=this.wr.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var zf=class{constructor(e){this.vr=e,this.docs=function(){return new Ee(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Jt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Jt(),o=n.path,c=new U(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||lx(ux(f),r)<=0||(i.has(f.key)||ou(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,n,r,i){B()}Fr(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wf(this)}getSize(e){return R.resolve(this.size)}},Wf=class extends Uf{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Kf=class{constructor(e){this.persistence=e,this.Mr=new Cn(n=>Op(n),kp),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Gs,this.targetCount=0,this.Lr=Hs.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),R.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Hs(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.qn(n),R.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),R.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this.Nr.containsKey(n))}};var Qf=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new kw(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Kf(this),this.indexManager=new Lf,this.remoteDocumentCache=function(i){return new zf(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Vf(n),this.$r=new qf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Hf,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Gf(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){k("MemoryPersistence","Starting transaction:",e);let i=new Yf(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return R.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Yf=class extends uf{constructor(e){super(),this.currentSequenceNumber=e}},Jf=class t{constructor(e){this.persistence=e,this.zr=new Gs,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw B()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),R.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Jr,r=>{let i=U.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,z.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return R.or([()=>R.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Xf=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Z(),i=Z();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Zf=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ep=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return BI()?8:hx(it())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Zf;return this.Ji(e,n,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(e,n,o,c.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Ps()<=X.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",ui(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),R.resolve()):(Ps()<=X.DEBUG&&k("QueryEngine","Query:",ui(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ps()<=X.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",ui(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kt(n))):R.resolve())}ji(e,n){if(pw(n))return R.resolve(null);let r=kt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Df(n,null,"F"),r=kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Z(...s);return this.zi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.Zi(n,c);return this.Xi(n,d,o,u.readTime)?this.ji(e,Df(n,null,"F")):this.es(e,d,n,u)}))})))}Hi(e,n,r,i){return pw(n)||i.isEqual(z.min())?R.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?R.resolve(null):(Ps()<=X.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ui(n)),this.es(e,o,n,cx(i,-1)).next(c=>c))})}Zi(e,n){let r=new qe(Gw(e));return n.forEach((i,s)=>{ou(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Ps()<=X.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ui(n)),this.zi.getDocumentsMatchingQuery(e,n,hr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var tp=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ee(ce),this.rs=new Cn(s=>Op(s),kp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $f(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function nR(t,e,n,r){return new tp(t,e,n,r)}function dE(t,e){return C(this,null,function*(){let n=G(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=Z();for(let d of i){o.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({us:d,removedBatchIds:o,addedBatchIds:c}))})})})}function rR(t,e){let n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){let g=d.batch,_=g.keys(),E=R.resolve();return _.forEach(S=>{E=E.next(()=>f.getEntry(u,S)).next(x=>{let N=d.docVersions.get(S);me(N!==null),x.version.compareTo(N)<0&&(g.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),f.addEntry(x)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Z();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hE(t){let e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function iR(t,e){let n=G(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let c=[];e.targetChanges.forEach((f,g)=>{let _=i.get(g);if(!_)return;c.push(n.Qr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(s,f.addedDocuments,g)));let E=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Ke.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(g,E),function(x,N,P){return x.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(_,E,f)&&c.push(n.Qr.updateTargetData(s,E))});let u=Jt(),d=Z();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(sR(s,o,e.documentUpdates).next(f=>{u=f.cs,d=f.ls})),!r.isEqual(z.min())){let f=n.Qr.getLastRemoteSnapshotVersion(s).next(g=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return R.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.ns=i,s))}function sR(t,e,n){let r=Z(),i=Z();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Jt();return n.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(z.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):k("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{cs:o,ls:i}})}function oR(t,e){let n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aR(t,e){let n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new qs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function np(t,e,n){return C(this,null,function*(){let r=G(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Xs(o))throw o;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function bw(t,e,n){let r=G(t),i=z.min(),s=Z();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){let g=G(u),_=g.rs.get(f);return _!==void 0?R.resolve(g.ns.get(_)):g.Qr.getTargetData(d,f)}(r,o,kt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:z.min(),n?s:Z())).next(c=>(cR(r,Dx(e),c),{documents:c,hs:s})))}function cR(t,e,n){let r=t.ss.get(e)||z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var Uc=class{constructor(){this.activeTargetIds=Nx()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var rp=class{constructor(){this.no=new Uc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Uc,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ip=class{io(e){}shutdown(){}};var Bc=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Dc=null;function Jh(){return Dc===null?Dc=function(){return 268435456+Math.round(2147483648*Math.random())}():Dc++,"0x"+Dc.toString(16)}var uR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var sp=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var $e="WebChannelConnection",op=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let c=Jh(),u=this.vo(n,r.toUriEncodedString());k("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,s,o),this.Mo(n,u,d,i).then(f=>(k("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw gi("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}xo(n,r,i,s,o,c){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Si}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=uR[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=Jh();return new Promise((o,c)=>{let u=new Hh;u.setWithCredentials(!0),u.listenOnce(zh.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rs.NO_ERROR:let f=u.getResponseJson();k($e,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Rs.TIMEOUT:k($e,`RPC '${e}' ${s} timed out`),c(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case Rs.HTTP_ERROR:let g=u.getStatus();if(k($e,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);let E=_?.error;if(E&&E.status&&E.message){let S=function(N){let P=N.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(P)>=0?P:M.UNKNOWN}(E.status);c(new F(S,E.message))}else c(new F(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new F(M.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{k($e,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);k($e,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Oo(e,n,r){let i=Jh(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qh(),c=Kh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new Gh({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=s.join("");k($e,`Creating RPC '${e}' stream ${i}: ${f}`,u);let g=o.createWebChannel(f,u),_=!1,E=!1,S=new sp({lo:N=>{E?k($e,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(_||(k($e,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),k($e,`RPC '${e}' stream ${i} sending:`,N),g.send(N))},ho:()=>g.close()}),x=(N,P,L)=>{N.listen(P,V=>{try{L(V)}catch(j){setTimeout(()=>{throw j},0)}})};return x(g,ci.EventType.OPEN,()=>{E||(k($e,`RPC '${e}' stream ${i} transport opened.`),S.mo())}),x(g,ci.EventType.CLOSE,()=>{E||(E=!0,k($e,`RPC '${e}' stream ${i} transport closed`),S.po())}),x(g,ci.EventType.ERROR,N=>{E||(E=!0,gi($e,`RPC '${e}' stream ${i} transport errored:`,N),S.po(new F(M.UNAVAILABLE,"The operation could not be completed")))}),x(g,ci.EventType.MESSAGE,N=>{var P;if(!E){let L=N.data[0];me(!!L);let V=L,j=V.error||((P=V[0])===null||P===void 0?void 0:P.error);if(j){k($e,`RPC '${e}' stream ${i} received error:`,j);let pe=j.status,q=function(y){let I=Ce[y];if(I!==void 0)return rE(I)}(pe),w=j.message;q===void 0&&(q=M.INTERNAL,w="Unknown error status: "+pe+" with message "+j.message),E=!0,S.po(new F(q,w)),g.close()}else k($e,`RPC '${e}' stream ${i} received:`,L),S.yo(L)}}),x(c,Wh.STAT_EVENT,N=>{N.stat===wc.PROXY?k($e,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===wc.NOPROXY&&k($e,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.fo()},0),S}};function Xh(){return typeof document<"u"?document:null}function au(t){return new Rf(t,!0)}var $c=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var qc=class{constructor(e,n,r,i,s,o,c,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new $c(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return C(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return C(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return C(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Qt(n.toString()),Qt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new F(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>C(this,null,function*(){this.state=0,this.start()}))}c_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ap=class extends qc{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=Hx(this.serializer,e),r=function(s){if(!("targetChange"in s))return z.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?z.min():o.readTime?Ft(o.readTime):z.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Ff(this.serializer),n.addTarget=function(s,o){let c,u=o.target;if(c=Ef(u)?{documents:Wx(s,u)}:{query:Kx(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=iE(s,o.resumeToken);let d=Pf(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(z.min())>0){c.readTime=Lc(s,o.snapshotVersion.toTimestamp());let d=Pf(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=Yx(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Ff(this.serializer),n.removeTarget=e,this.i_(n)}},cp=class extends qc{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=zx(e.writeResults,e.commitTime),r=Ft(e.commitTime);return this.listener.A_(r,n)}return me(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Ff(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Gx(this.serializer,r))};this.i_(n)}};var up=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Of(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(M.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(e,Of(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(M.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},lp=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Qt(n),this.y_=!1):k("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var dp=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>C(this,null,function*(){vr(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return C(this,null,function*(){let d=G(u);d.M_.add(4),yield Zs(d),d.N_.set("Unknown"),d.M_.delete(4),yield cu(d)})}(this))}))}),this.N_=new lp(r,i)}};function cu(t){return C(this,null,function*(){if(vr(t))for(let e of t.x_)yield e(!0)})}function Zs(t){return C(this,null,function*(){for(let e of t.x_)yield e(!1)})}function fE(t,e){let n=G(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Bp(n)?Up(n):Mi(n).Xo()&&jp(n,e))}function Lp(t,e){let n=G(t),r=Mi(n);n.F_.delete(e),r.Xo()&&pE(n,e),n.F_.size===0&&(r.Xo()?r.n_():vr(n)&&n.N_.set("Unknown"))}function jp(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mi(t).P_(e)}function pE(t,e){t.L_.xe(e),Mi(t).I_(e)}function Up(t){t.L_=new xf({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mi(t).start(),t.N_.w_()}function Bp(t){return vr(t)&&!Mi(t).Zo()&&t.F_.size>0}function vr(t){return G(t).M_.size===0}function gE(t){t.L_=void 0}function lR(t){return C(this,null,function*(){t.N_.set("Online")})}function dR(t){return C(this,null,function*(){t.F_.forEach((e,n)=>{jp(t,e)})})}function hR(t,e){return C(this,null,function*(){gE(t),Bp(t)?(t.N_.D_(e),Up(t)):t.N_.set("Unknown")})}function fR(t,e,n){return C(this,null,function*(){if(t.N_.set("Online"),e instanceof Fc&&e.state===2&&e.cause)try{yield function(i,s){return C(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.F_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.F_.delete(c),i.L_.removeTarget(c))})}(t,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hc(t,r)}else if(e instanceof fi?t.L_.Ke(e):e instanceof kc?t.L_.He(e):t.L_.We(e),!n.isEqual(z.min()))try{let r=yield hE(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.F_.get(d);f&&s.F_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{let f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken(Ke.EMPTY_BYTE_STRING,f.snapshotVersion)),pE(s,u);let g=new qs(f.target,u,d,f.sequenceNumber);jp(s,g)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Hc(t,r)}})}function Hc(t,e,n){return C(this,null,function*(){if(!Xs(e))throw e;t.M_.add(1),yield Zs(t),t.N_.set("Offline"),n||(n=()=>hE(t.localStore)),t.asyncQueue.enqueueRetryable(()=>C(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield cu(t)}))})}function mE(t,e){return e().catch(n=>Hc(t,n,e))}function uu(t){return C(this,null,function*(){let e=G(t),n=An(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;pR(e);)try{let i=yield oR(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,gR(e,i)}catch(i){yield Hc(e,i)}yE(e)&&vE(e)})}function pR(t){return vr(t)&&t.v_.length<10}function gR(t,e){t.v_.push(e);let n=An(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function yE(t){return vr(t)&&!An(t).Zo()&&t.v_.length>0}function vE(t){An(t).start()}function mR(t){return C(this,null,function*(){An(t).V_()})}function yR(t){return C(this,null,function*(){let e=An(t);for(let n of t.v_)e.d_(n.mutations)})}function vR(t,e,n){return C(this,null,function*(){let r=t.v_.shift(),i=Af.from(r,e,n);yield mE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield uu(t)})}function _R(t,e){return C(this,null,function*(){e&&An(t).E_&&(yield function(r,i){return C(this,null,function*(){if(function(o){return Fx(o)&&o!==M.ABORTED}(i.code)){let s=r.v_.shift();An(r).t_(),yield mE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield uu(r)}})}(t,e)),yE(t)&&vE(t)})}function Cw(t,e){return C(this,null,function*(){let n=G(t);n.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=vr(n);n.M_.add(3),yield Zs(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield cu(n)})}function IR(t,e){return C(this,null,function*(){let n=G(t);e?(n.M_.delete(2),yield cu(n)):e||(n.M_.add(2),yield Zs(n),n.N_.set("Unknown"))})}function Mi(t){return t.B_||(t.B_=function(n,r,i){let s=G(n);return s.f_(),new ap(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:lR.bind(null,t),To:dR.bind(null,t),Ao:hR.bind(null,t),h_:fR.bind(null,t)}),t.x_.push(e=>C(this,null,function*(){e?(t.B_.t_(),Bp(t)?Up(t):t.N_.set("Unknown")):(yield t.B_.stop(),gE(t))}))),t.B_}function An(t){return t.k_||(t.k_=function(n,r,i){let s=G(n);return s.f_(),new cp(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:mR.bind(null,t),Ao:_R.bind(null,t),R_:yR.bind(null,t),A_:vR.bind(null,t)}),t.x_.push(e=>C(this,null,function*(){e?(t.k_.t_(),yield uu(t)):(yield t.k_.stop(),t.v_.length>0&&(k("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var hp=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function $p(t,e){if(Qt("AsyncQueue",`${e}: ${t}`),Xs(t))return new F(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Gc=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||U.comparator(n.key,r.key):(n,r)=>U.comparator(n.key,r.key),this.keyedMap=Os(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var zc=class{constructor(){this.q_=new Ee(U.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):B():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Ci=class t{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,Gc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var fp=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},pp=class{constructor(){this.queries=new Cn(e=>Hw(e),su),this.onlineState="Unknown",this.z_=new Set}};function _E(t,e){return C(this,null,function*(){let n=G(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new fp,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let c=$p(o,`Initialization of query '${ui(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&qp(n)})}function IE(t,e){return C(this,null,function*(){let n=G(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function wR(t,e){let n=G(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let c of o.U_)c.H_(i)&&(r=!0);o.K_=i}}r&&qp(n)}function ER(t,e,n){let r=G(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function qp(t){t.z_.forEach(e=>{e.next()})}var gp,Aw;(Aw=gp||(gp={})).J_="default",Aw.Cache="cache";var Wc=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ci(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==gp.Cache}};var Kc=class{constructor(e){this.key=e}},Qc=class{constructor(e){this.key=e}},mp=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Z(),this.mutatedKeys=Z(),this.Ia=Gw(e),this.Ta=new Gc(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new zc,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let _=i.get(f),E=ou(this.query,g)?g:null,S=!!_&&this.mutatedKeys.has(_.key),x=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),N=!1;_&&E?_.data.isEqual(E.data)?S!==x&&(r.track({type:3,doc:E}),N=!0):this.Ra(_,E)||(r.track({type:2,doc:E}),N=!0,(u&&this.Ia(E,u)>0||d&&this.Ia(E,d)<0)&&(c=!0)):!_&&E?(r.track({type:0,doc:E}),N=!0):_&&!E&&(r.track({type:1,doc:_}),N=!0,(u||d)&&(c=!0)),N&&(E?(o=o.add(E),s=x?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:c,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((f,g)=>function(E,S){let x=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return x(E)-x(S)}(f.type,g.type)||this.Ia(f.doc,g.doc)),this.Va(r),i=i!=null&&i;let c=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,d=u!==this.ha;return this.ha=u,o.length!==0||d?{snapshot:new Ci(this.query,e.Ta,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new zc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Z(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Qc(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Kc(r))}),n}pa(e){this.la=e.hs,this.Pa=Z();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Ci.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},yp=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},vp=class{constructor(e){this.key=e,this.wa=!1}},_p=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Cn(c=>Hw(c),su),this.Da=new Map,this.Ca=new Set,this.va=new Ee(U.comparator),this.Fa=new Map,this.Ma=new Gs,this.xa={},this.Oa=new Map,this.Na=Hs.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function DR(t,e,n=!0){return C(this,null,function*(){let r=CE(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield wE(r,e,n,!0),i})}function TR(t,e){return C(this,null,function*(){let n=CE(t);yield wE(n,e,!0,!1)})}function wE(t,e,n,r){return C(this,null,function*(){let i=yield aR(t.localStore,kt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",c;return r&&(c=yield bR(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&fE(t.remoteStore,i),c})}function bR(t,e,n,r,i){return C(this,null,function*(){t.Ba=(g,_,E)=>function(x,N,P,L){return C(this,null,function*(){let V=N.view.da(P);V.Xi&&(V=yield bw(x.localStore,N.query,!1).then(({documents:w})=>N.view.da(w,V)));let j=L&&L.targetChanges.get(N.targetId),pe=L&&L.targetMismatches.get(N.targetId)!=null,q=N.view.applyChanges(V,x.isPrimaryClient,j,pe);return Nw(x,N.targetId,q.fa),q.snapshot})}(t,g,_,E);let s=yield bw(t.localStore,e,!0),o=new mp(e,s.hs),c=o.da(s.documents),u=$s.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);Nw(t,n,d.fa);let f=new yp(e,n,o);return t.ba.set(e,f),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),d.snapshot})}function CR(t,e,n){return C(this,null,function*(){let r=G(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!su(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield np(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Lp(r.remoteStore,i.targetId),Ip(r,i.targetId)}).catch(Js))):(Ip(r,i.targetId),yield np(r.localStore,i.targetId,!0))})}function AR(t,e){return C(this,null,function*(){let n=G(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lp(n.remoteStore,r.targetId))})}function SR(t,e,n){return C(this,null,function*(){let r=kR(t);try{let i=yield function(o,c){let u=G(o),d=Fe.now(),f=c.reduce((E,S)=>E.add(S.key),Z()),g,_;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=Jt(),x=Z();return u.os.getEntries(E,f).next(N=>{S=N,S.forEach((P,L)=>{L.isValidDocument()||(x=x.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,S)).next(N=>{g=N;let P=[];for(let L of c){let V=kx(L,g.get(L.key).overlayedDocument);V!=null&&P.push(new Xt(L.key,V,Lw(V.value.mapValue),ur.exists(!0)))}return u.mutationQueue.addMutationBatch(E,d,P,c)}).next(N=>{_=N;let P=N.applyToLocalDocumentSet(g,x);return u.documentOverlayCache.saveOverlays(E,N.batchId,P)})}).then(()=>({batchId:_.batchId,changes:Ww(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.xa[o.currentUser.toKey()];d||(d=new Ee(ce)),d=d.insert(c,u),o.xa[o.currentUser.toKey()]=d}(r,i.batchId,n),yield eo(r,i.changes),yield uu(r.remoteStore)}catch(i){let s=$p(i,"Failed to persist write");n.reject(s)}})}function EE(t,e){return C(this,null,function*(){let n=G(t);try{let r=yield iR(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?me(o.wa):i.removedDocuments.size>0&&(me(o.wa),o.wa=!1))}),yield eo(n,r,e)}catch(r){yield Js(r)}})}function Sw(t,e,n){let r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let c=o.view.j_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=G(o);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(let _ of g.U_)_.j_(c)&&(d=!0)}),d&&qp(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function NR(t,e,n){return C(this,null,function*(){let r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ee(U.comparator);o=o.insert(s,Dt.newNoDocument(s,z.min()));let c=Z().add(s),u=new Oc(z.min(),new Map,new Ee(ce),o,c);yield EE(r,u),r.va=r.va.remove(s),r.Fa.delete(e),Hp(r)}else yield np(r.localStore,e,!1).then(()=>Ip(r,e,n)).catch(Js)})}function MR(t,e){return C(this,null,function*(){let n=G(t),r=e.batch.batchId;try{let i=yield rR(n.localStore,e);TE(n,r,null),DE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield eo(n,i)}catch(i){yield Js(i)}})}function xR(t,e,n){return C(this,null,function*(){let r=G(t);try{let i=yield function(o,c){let u=G(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(me(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);TE(r,e,n),DE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield eo(r,i)}catch(i){yield Js(i)}})}function DE(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function TE(t,e,n){let r=G(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Ip(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||bE(t,r)})}function bE(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Lp(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Hp(t))}function Nw(t,e,n){for(let r of n)r instanceof Kc?(t.Ma.addReference(r.key,e),RR(t,r)):r instanceof Qc?(k("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||bE(t,r.key)):B()}function RR(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(k("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Hp(t))}function Hp(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new U(we.fromString(e)),r=t.Na.next();t.Fa.set(r,new vp(n)),t.va=t.va.insert(n,r),fE(t.remoteStore,new qs(kt(Fp(n.path)),r,"TargetPurposeLimboResolution",kw.oe))}}function eo(t,e,n){return C(this,null,function*(){let r=G(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((c,u)=>{o.push(r.Ba(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient){let f=d&&!d.fromCache;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){i.push(d);let f=Xf.Ki(u.targetId,d);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(u,d){return C(this,null,function*(){let f=G(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>R.forEach(d,_=>R.forEach(_.qi,E=>f.persistence.referenceDelegate.addReference(g,_.targetId,E)).next(()=>R.forEach(_.Qi,E=>f.persistence.referenceDelegate.removeReference(g,_.targetId,E)))))}catch(g){if(!Xs(g))throw g;k("LocalStore","Failed to update sequence numbers: "+g)}for(let g of d){let _=g.targetId;if(!g.fromCache){let E=f.ns.get(_),S=E.snapshotVersion,x=E.withLastLimboFreeSnapshotVersion(S);f.ns=f.ns.insert(_,x)}}})}(r.localStore,s))})}function PR(t,e){return C(this,null,function*(){let n=G(t);if(!n.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield dE(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(c=>{c.forEach(u=>{u.reject(new F(M.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield eo(n,r.us)}})}function OR(t,e){let n=G(t),r=n.Fa.get(e);if(r&&r.wa)return Z().add(r.key);{let i=Z(),s=n.Da.get(e);if(!s)return i;for(let o of s){let c=n.ba.get(o);i=i.unionWith(c.view.Ea)}return i}}function CE(t){let e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NR.bind(null,e),e.Sa.h_=wR.bind(null,e.eventManager),e.Sa.ka=ER.bind(null,e.eventManager),e}function kR(t){let e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xR.bind(null,e),e}var Yc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return C(this,null,function*(){this.serializer=au(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return nR(this.persistence,new ep,e.initialUser,this.serializer)}createPersistence(e){return new Qf(Jf.Hr,this.serializer)}createSharedClientState(e){return new rp}terminate(){return C(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var wp=class{initialize(e,n){return C(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PR.bind(null,this.syncEngine),yield IR(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new pp}()}createDatastore(e){let n=au(e.databaseInfo.databaseId),r=function(s){return new op(s)}(e.databaseInfo);return function(s,o,c,u){return new up(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new dp(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Sw(this.syncEngine,n,0),function(){return Bc.D()?new Bc:new ip}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,f){let g=new _p(i,s,o,c,u,d);return f&&(g.La=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return C(this,null,function*(){var e;yield function(r){return C(this,null,function*(){let i=G(r);k("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Zs(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Jc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Qt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Ep=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Re.UNAUTHENTICATED,this.clientId=Ac.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>C(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=$p(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Zh(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>C(this,null,function*(){r.isEqual(i)||(yield dE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Mw(t,e){return C(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield VR(t);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Cw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Cw(e.remoteStore,i)),t._onlineComponents=e})}function FR(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function VR(t){return C(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Zh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!FR(n))throw n;gi("Error using user provided cache. Falling back to memory cache: "+n),yield Zh(t,new Yc)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Zh(t,new Yc);return t._offlineComponents})}function AE(t){return C(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield Mw(t,t._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield Mw(t,new wp))),t._onlineComponents})}function LR(t){return AE(t).then(e=>e.syncEngine)}function Dp(t){return C(this,null,function*(){let e=yield AE(t),n=e.eventManager;return n.onListen=DR.bind(null,e.syncEngine),n.onUnlisten=CR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AR.bind(null,e.syncEngine),n})}function jR(t,e,n={}){let r=new Pt;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(s,o,c,u,d){let f=new Jc({next:_=>{o.enqueueAndForget(()=>IE(s,g)),_.fromCache&&u.source==="server"?d.reject(new F(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new Wc(c,f,{includeMetadataChanges:!0,ra:!0});return _E(s,g)}(yield Dp(t),t.asyncQueue,e,n,r)})),r.promise}function SE(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var xw=new Map;function NE(t,e,n){if(!n)throw new F(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UR(t,e,n,r){if(e===!0&&r===!0)throw new F(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rw(t){if(!U.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Pw(t){if(U.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Gp(t);throw new F(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Xc=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ai=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ef;switch(r.type){case"firstParty":return new sf(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=xw.get(n);r&&(k("ComponentProvider","Removing Datastore"),xw.delete(n),r.terminate())}(this),Promise.resolve()}};function ME(t,e,n,r={}){var i;let s=(t=lr(t,Ai))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Re.MOCK_USER;else{c=VI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Re(d)}t._authCredentials=new tf(new Cc(c,u))}}var zs=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},pt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Tn=class t extends zs{constructor(e,n,r){super(e,n,Fp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new U(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function xE(t,e,...n){if(t=ht(t),NE("collection","path",e),t instanceof Ai){let r=we.fromString(e,...n);return Pw(r),new Tn(t,null,r)}{if(!(t instanceof pt||t instanceof Tn))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(we.fromString(e,...n));return Pw(r),new Tn(t.firestore,null,r)}}function RE(t,e,...n){if(t=ht(t),arguments.length===1&&(e=Ac.newId()),NE("doc","path",e),t instanceof Ai){let r=we.fromString(e,...n);return Rw(r),new pt(t,null,new U(r))}{if(!(t instanceof pt||t instanceof Tn))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(we.fromString(e,...n));return Rw(r),new pt(t.firestore,t instanceof Tn?t.converter:null,new U(r))}}var Tp=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new $c(this,"async_queue_retry"),this.hu=()=>{let n=Xh();n&&k("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Xh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Pt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return C(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Xs(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Qt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=hp.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&B()}verifyOperationInProgress(){}du(){return C(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function Ow(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var yr=class extends Ai{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Tp}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||OE(this),this._firestoreClient.terminate()}};function PE(t,e){let n=typeof t=="object"?t:xs(),r=typeof t=="string"?t:e||"(default)",i=Bh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=kI("firestore");s&&ME(i,...s)}return i}function zp(t){return t._firestoreClient||OE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function OE(t){var e,n,r;let i=t._freezeSettings(),s=function(c,u,d,f){return new lf(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,SE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Ep(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ws=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ke.fromBase64String(e))}catch(n){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ks=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zc=class{constructor(e){this._methodName=e}};var Qs=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var BR=/^__.*__$/,bp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xt(e,this.data,this.fieldMask,n,this.fieldTransforms):new mr(e,this.data,n,this.fieldTransforms)}};function kE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var Cp=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return eu(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(kE(this.fu)&&BR.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Ap=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||au(e)}Fu(e,n,r,i=!1){return new Cp({fu:e,methodName:n,vu:r,path:st.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $R(t){let e=t._freezeSettings(),n=au(t._databaseId);return new Ap(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qR(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);jE("Data must be an object, but it was:",o,r);let c=VE(r,o),u,d;if(s.merge)u=new Rt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let g of s.mergeFields){let _=HR(e,g,n);if(!o.contains(_))throw new F(M.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);zR(f,_)||f.push(_)}u=new Rt(f),d=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=o.fieldTransforms;return new bp(new Et(c),u,d)}function FE(t,e){if(LE(t=ht(t)))return jE("Unsupported field value:",e,t),VE(t,e);if(t instanceof Zc)return function(r,i){if(!kE(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=FE(c,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Fe.fromDate(r);return{timestampValue:Lc(i.serializer,s)}}if(r instanceof Fe){let s=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(i.serializer,s)}}if(r instanceof Qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ws)return{bytesValue:iE(i.serializer,r._byteString)};if(r instanceof pt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Vp(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Gp(r)}`)}(t,e)}function VE(t,e){let n={};return Fw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(t,(r,i)=>{let s=FE(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function LE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof Qs||t instanceof Ws||t instanceof pt||t instanceof Zc)}function jE(t,e,n){if(!LE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Gp(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function HR(t,e,n){if((e=ht(e))instanceof Ks)return e._internalPath;if(typeof e=="string")return UE(t,e);throw eu("Field path arguments must be of type string or ",t,!1,void 0,n)}var GR=new RegExp("[~\\*/\\[\\]]");function UE(t,e,n){if(e.search(GR)>=0)throw eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ks(...e.split("."))._internalPath}catch{throw eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function eu(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new F(M.INVALID_ARGUMENT,c+t+u)}function zR(t,e){return t.some(n=>n.isEqual(e))}var tu=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Sp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(BE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Sp=class extends tu{data(){return super.data()}};function BE(t,e){return typeof e=="string"?UE(t,e):e instanceof Ks?e._internalPath:e._delegate._internalPath}function $E(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Np=class{convertValue(e,n="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(bn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw B()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ni(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Qs(Ie(e.latitude),Ie(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Rp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Us(e));default:return null}}convertTimestamp(e){let n=Yt(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=we.fromString(e);me(lE(r));let i=new xc(r.get(1),r.get(3)),s=new U(r.popFirst(5));return i.isEqual(n)||Qt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function WR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var cr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nu=class extends tu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(BE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},pi=class extends nu{data(e={}){return super.data(e)}},ru=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pi(this._firestore,this._userDataWriter,r.key,r,new cr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new pi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new pi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new cr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:KR(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function KR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}var Ys=class extends Np{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}};function qE(t){t=lr(t,zs);let e=lr(t.firestore,yr),n=zp(e),r=new Ys(e);return $E(t._query),jR(n,t._query).then(i=>new ru(e,r,t,i))}function QR(t,e){let n=lr(t.firestore,yr),r=RE(t),i=WR(t.converter,e);return YR(n,[qR($R(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ur.exists(!1))]).then(()=>r)}function Wp(t,...e){var n,r,i;t=ht(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ow(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Ow(e[o])){let g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,d,f;if(t instanceof pt)d=lr(t.firestore,yr),f=Fp(t._key.path),u={next:g=>{e[o]&&e[o](JR(d,t,g))},error:e[o+1],complete:e[o+2]};else{let g=lr(t,zs);d=lr(g.firestore,yr),f=g._query;let _=new Ys(d);u={next:E=>{e[o]&&e[o](new ru(d,_,g,E))},error:e[o+1],complete:e[o+2]},$E(t._query)}return function(_,E,S,x){let N=new Jc(x),P=new Wc(E,N,S);return _.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return _E(yield Dp(_),P)})),()=>{N.$a(),_.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return IE(yield Dp(_),P)}))}}(zp(d),f,c,u)}function YR(t,e){return function(r,i){let s=new Pt;return r.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return SR(yield LR(r),i,s)})),s.promise}(zp(t),e)}function JR(t,e,n){let r=n.docs.get(e._key),i=new Ys(t);return new nu(t,i,e._key,r,new cr(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Si=i})(ai),En(new ft("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new yr(new nf(r.getProvider("auth-internal")),new af(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),xe(ow,"4.6.3",e),xe(ow,"4.6.3","esm2017")})();var XR="firebase",ZR="10.12.2";xe(XR,ZR,"app");var Ri=new Jn("ANGULARFIRE2_VERSION");function Qp(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var no=(t,e)=>{let n=e?[e]:_c(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},to=class{constructor(){return no(eP)}},eP="app-check";function xi(){}var lu=class{zone;delegate;constructor(e,n=vl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Kp=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xi,{},xi,xi)),n.pipe(ia({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ro=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new lu(Zone.current)),this.insideAngular=n.run(()=>new lu(Zone.current,yl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ge(Me))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function du(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function tP(t){return du().ngZone.runOutsideAngular(()=>t())}function _r(t){return du().ngZone.run(()=>t())}function nP(t){return rP(du())(t)}function rP(t){return function(n){return n=n.lift(new Kp(t.ngZone)),n.pipe(an(t.outsideAngular),on(t.insideAngular))}}var iP=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),_r(()=>t.apply(void 0,r))},Sn=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=_r(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xi,{},xi,xi))),r[s]=iP(r[s],n));let i=tP(()=>t.apply(this,r));if(!e)if(i instanceof Q){let s=du();return i.pipe(an(s.outsideAngular),on(s.insideAngular))}else return _r(()=>i);return i instanceof Q?i.pipe(nP):i instanceof Promise?_r(()=>new Promise((s,o)=>i.then(c=>_r(()=>s(c)),c=>_r(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:_r(()=>i)};var Ir=class{constructor(e){return e}},io=class{constructor(){return _c()}};function sP(t){return t&&t.length===1?t[0]:new Ir(xs())}var Yp=new W("angularfire2._apps"),oP={provide:Ir,useFactory:sP,deps:[[new $t,Yp]]},aP={provide:io,deps:[[new $t,Yp]]};function cP(t){return(e,n)=>{let r=n.get(_s);xe("angularfire",Ri.full,"core"),xe("angularfire",Ri.full,"app"),xe("angular",L_.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ir(i)}}function f$(t,...e){return er([oP,aP,{provide:Yp,useFactory:cP(t),multi:!0,deps:[Me,Gt,ro,...e]}])}var p$=Sn($h,!0);function JE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XE=JE,ZE=new Wt("auth","Firebase",JE());var gu=new In("@firebase/auth");function uP(t,...e){gu.logLevel<=X.WARN&&gu.warn(`Auth (${ai}): ${t}`,...e)}function fu(t,...e){gu.logLevel<=X.ERROR&&gu.error(`Auth (${ai}): ${t}`,...e)}function HE(t,...e){throw cg(t,...e)}function ag(t,...e){return cg(t,...e)}function eD(t,e,n){let r=Object.assign(Object.assign({},XE()),{[e]:n});return new Wt("auth","Firebase",r).create(e,{appName:t.name})}function pu(t){return eD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ZE.create(t,...e)}function ue(t,e,...n){if(!t)throw cg(e,...n)}function so(t){let e="INTERNAL ASSERTION FAILED: "+t;throw fu(e),new Error(e)}function mu(t,e){t||so(e)}function lP(){return GE()==="http:"||GE()==="https:"}function GE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function dP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lP()||jI()||"connection"in navigator)?navigator.onLine:!0}function hP(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Er=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,mu(n>e,"Short delay should be less than long delay!"),this.isMobile=LI()||UI()}get(){return dP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function fP(t,e){mu(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var yu=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;so("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;so("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;so("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var pP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var gP=new Er(3e4,6e4);function tD(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function wu(s,o,c,u){return C(this,arguments,function*(t,e,n,r,i={}){return nD(t,i,()=>C(this,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let g=Ch(Object.assign({key:t.config.apiKey},f)).slice(1),_=yield t._getAdditionalHeaders();return _["Content-Type"]="application/json",t.languageCode&&(_["X-Firebase-Locale"]=t.languageCode),yu.fetch()(rD(t,t.config.apiHost,n,g),Object.assign({method:e,headers:_,referrerPolicy:"no-referrer"},d))}))})}function nD(t,e,n){return C(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},pP),e);try{let i=new Zp(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw hu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw hu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw hu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw hu(t,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw eD(t,f,d);HE(t,f)}}catch(i){if(i instanceof dt)throw i;HE(t,"network-request-failed",{message:String(i)})}})}function rD(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?fP(t.config,i):`${t.config.apiScheme}://${i}`}var Zp=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ag(this.auth,"network-request-failed")),gP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function hu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ag(t,e,r);return i.customData._tokenResponse=n,i}function mP(t,e){return C(this,null,function*(){return wu(t,"POST","/v1/accounts:delete",e)})}function iD(t,e){return C(this,null,function*(){return wu(t,"POST","/v1/accounts:lookup",e)})}function oo(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ug(t,e=!1){return C(this,null,function*(){let n=ht(t),r=yield n.getIdToken(e),i=sD(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:oo(Jp(i.auth_time)),issuedAtTime:oo(Jp(i.iat)),expirationTime:oo(Jp(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Jp(t){return Number(t)*1e3}function sD(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fu("JWT malformed, contained fewer than 3 sections"),null;try{let i=Dh(n);return i?JSON.parse(i):(fu("Failed to decode base64 JWT payload"),null)}catch(i){return fu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zE(t){let e=sD(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function eg(t,e,n=!1){return C(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof dt&&yP(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function yP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var tg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),n)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var co=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oo(this.lastLoginAt),this.creationTime=oo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function vu(t){return C(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield eg(t,iD(n,{idToken:r}));ue(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?oD(s.providerUserInfo):[],c=vP(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!c?.length,f=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new co(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)})}function lg(t){return C(this,null,function*(){let e=ht(t);yield vu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function vP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oD(t){return t.map(e=>{var{providerId:n}=e,r=_l(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function _P(t,e){return C(this,null,function*(){let n=yield nD(t,{},()=>C(this,null,function*(){let r=Ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=rD(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",yu.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function IP(t,e){return C(this,null,function*(){return wu(t,"POST","/v2/accounts:revokeToken",tD(t,e))})}var ao=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");let n=zE(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return C(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield _P(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return so("not implemented")}};function Nn(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var uo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=_l(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new co(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let n=yield eg(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return ug(this,e)}reload(){return lg(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield vu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(oi(this.auth.app))return Promise.reject(pu(this.auth));let e=yield this.getIdToken();return yield eg(this,mP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,d,f;let g=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,P=(d=n.createdAt)!==null&&d!==void 0?d:void 0,L=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:V,emailVerified:j,isAnonymous:pe,providerData:q,stsTokenManager:w}=n;ue(V&&w,e,"internal-error");let m=ao.fromJSON(this.name,w);ue(typeof V=="string",e,"internal-error"),Nn(g,e.name),Nn(_,e.name),ue(typeof j=="boolean",e,"internal-error"),ue(typeof pe=="boolean",e,"internal-error"),Nn(E,e.name),Nn(S,e.name),Nn(x,e.name),Nn(N,e.name),Nn(P,e.name),Nn(L,e.name);let y=new t({uid:V,auth:e,email:_,emailVerified:j,displayName:g,isAnonymous:pe,photoURL:S,phoneNumber:E,tenantId:x,stsTokenManager:m,createdAt:P,lastLoginAt:L});return q&&Array.isArray(q)&&(y.providerData=q.map(I=>Object.assign({},I))),N&&(y._redirectEventId=N),y}static _fromIdTokenResponse(e,n,r=!1){return C(this,null,function*(){let i=new ao;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield vu(s),s})}static _fromGetAccountInfoResponse(e,n,r){return C(this,null,function*(){let i=n.users[0];ue(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?oD(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new ao;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new co(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var WE=new Map;function wr(t){mu(t instanceof Function,"Expected a class definition");let e=WE.get(t);return e?(mu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WE.set(t,e),e)}var wP=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(n,r){return C(this,null,function*(){this.storage[n]=r})}_get(n){return C(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return C(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ng=wP;function Xp(t,e,n){return`firebase:${t}:${e}:${n}`}var _u=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Xp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?uo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return C(this,null,function*(){if(!n.length)return new t(wr(ng),e,r);let i=(yield Promise.all(n.map(d=>C(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||wr(ng),o=Xp(r,e.config.apiKey,e.name),c=null;for(let d of n)try{let f=yield d._get(o);if(f){let g=uo._fromJSON(e,f);d!==s&&(c=g),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(d=>C(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new t(s,e,r))})}};function KE(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AP(e))return"Blackberry";if(SP(e))return"Webos";if(DP(e))return"Safari";if((e.includes("chrome/")||TP(e))&&!e.includes("edge/"))return"Chrome";if(CP(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function EP(t=it()){return/firefox\//i.test(t)}function DP(t=it()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TP(t=it()){return/crios\//i.test(t)}function bP(t=it()){return/iemobile/i.test(t)}function CP(t=it()){return/android/i.test(t)}function AP(t=it()){return/blackberry/i.test(t)}function SP(t=it()){return/webos/i.test(t)}function aD(t,e=[]){let n;switch(t){case"Browser":n=KE(it());break;case"Worker":n=`${KE(it())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ai}/${r}`}var rg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function NP(n){return C(this,arguments,function*(t,e={}){return wu(t,"GET","/v2/passwordPolicy",tD(t,e))})}var MP=6,ig=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:MP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var sg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iu(this),this.idTokenSubscription=new Iu(this),this.beforeStateQueue=new rg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wr(n)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield _u.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let n=yield iD(this,{idToken:e}),r=yield uo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var n;if(oi(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield vu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=hP()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(oi(this.app))return Promise.reject(pu(this));let n=e?ht(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return C(this,null,function*(){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return oi(this.app)?Promise.reject(pu(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return oi(this.app)?Promise.reject(pu(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(wr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield NP(this),n=new ig(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield IP(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&wr(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=yield _u.create(this,[wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return C(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&uP(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function xP(t){return ht(t)}var Iu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qI(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var RP={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PP(t){RP=t}function OP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function kP(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(wr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var C$=OP("rcb"),A$=new Er(3e4,6e4);var S$=new Er(2e3,1e4);var N$=10*60*1e3;var M$=new Er(3e4,6e4);var x$=new Er(5e3,15e3);var R$=encodeURIComponent("fac");var QE="@firebase/auth",YE="1.7.4";var og=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function FP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VP(t){En(new ft("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aD(t)},d=new sg(r,i,s,u);return kP(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),En(new ft("auth-internal",e=>{let n=xP(e.getProvider("auth").getImmediate());return(r=>new og(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(QE,YE,FP(t)),xe(QE,YE,"esm2017")}var LP=5*60,P$=FI("authIdTokenMaxAge")||LP;function jP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}PP({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=ag("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",jP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VP("Browser");var LO="auth";var Eu=class{constructor(){return no(LO)}};var Du=function(){return Du=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Du.apply(this,arguments)};var BO={includeMetadataChanges:!1};function cD(t,e){return e===void 0&&(e=BO),new Q(function(n){var r=Wp(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function uD(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Du(Du({},r),(n={},n[e.idField]=t.id,n))}function lD(t){return cD(t,{includeMetadataChanges:!0}).pipe(_e(function(e){return e.docs}))}function dD(t,e){return e===void 0&&(e={}),lD(t).pipe(_e(function(n){return n.map(function(r){return uD(r,e)})}))}var lo=class{constructor(e){return e}},hD="firestore",dg=class{constructor(){return no(hD)}};var hg=new W("angularfire2.firestore-instances");function $O(t,e){let n=Qp(hD,t,e);return n&&new lo(n)}function qO(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new lo(r)}}var HO={provide:dg,deps:[[new $t,hg]]},GO={provide:lo,useFactory:$O,deps:[[new $t,hg],Ir]};function QH(t,...e){return xe("angularfire",Ri.full,"fst"),er([GO,HO,{provide:hg,useFactory:qO(t),multi:!0,deps:[Me,Gt,ro,io,[new $t,Eu],[new $t,to],...e]}])}var YH=Sn(dD,!0);var JH=Sn(xE,!0);var XH=Sn(qE,!0);var ZH=Sn(PE,!0);var fo=class{},bu=class{},Dr=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var pg=class{encodeKey(e){return fD(e)}encodeValue(e){return fD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function zO(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,c]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(c),n.set(o,u)}),n}var WO=/%(\d[a-f0-9])/gi,KO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function fD(t){return encodeURIComponent(t).replace(WO,(e,n)=>KO[n]??e)}function Tu(t){return`${t}`}var Mn=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new pg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=zO(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Tu):[Tu(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Tu(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Tu(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var gg=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function QO(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function pD(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function gD(t){return typeof Blob<"u"&&t instanceof Blob}function mD(t){return typeof FormData<"u"&&t instanceof FormData}function YO(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ho=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(QO(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Dr,this.context??=new gg,!this.params)this.params=new Mn,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let c=n.indexOf("?"),u=c===-1?"?":c<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||pD(this.body)||gD(this.body)||mD(this.body)||YO(this.body)?this.body:this.body instanceof Mn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||mD(this.body)?null:gD(this.body)?this.body.type||null:pD(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Mn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,d=e.headers||this.headers,f=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((_,E)=>_.set(E,e.setHeaders[E]),d)),e.setParams&&(f=Object.keys(e.setParams).reduce((_,E)=>_.set(E,e.setParams[E]),f)),new t(n,r,o,{params:f,headers:d,context:g,reportProgress:u,responseType:i,withCredentials:c,transferCache:s})}},Pi=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Pi||{}),po=class{constructor(e,n=Su.Ok,r="OK"){this.headers=e.headers||new Dr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},mg=class t extends po{constructor(e={}){super(e),this.type=Pi.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Cu=class t extends po{constructor(e={}){super(e),this.type=Pi.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Au=class extends po{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Su=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Su||{});function fg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var yg=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof ho)o=r;else{let d;s.headers instanceof Dr?d=s.headers:d=new Dr(s.headers);let f;s.params&&(s.params instanceof Mn?f=s.params:f=new Mn({fromObject:s.params})),o=new ho(r,i,s.body!==void 0?s.body:null,{headers:d,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let c=Xo(o).pipe(wl(d=>this.handler.handle(d)));if(r instanceof ho||s.observe==="events")return c;let u=c.pipe(cn(d=>d instanceof Cu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(_e(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return u.pipe(_e(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return u.pipe(_e(d=>{if(d.body!==null&&typeof d.body!="string")throw new Error("Response is not a string.");return d.body}));case"json":default:return u.pipe(_e(d=>d.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Mn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,fg(s,i))}post(r,i,s={}){return this.request("POST",r,fg(s,i))}put(r,i,s={}){return this.request("PUT",r,fg(s,i))}};e.\u0275fac=function(i){return new(i||e)(ge(fo))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})();function JO(t,e){return e(t)}function XO(t,e,n){return(r,i)=>lv(n,()=>e(r,s=>t(s,i)))}var _D=new W(""),ZO=new W(""),ek=new W("");var yD=(()=>{let e=class e extends fo{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=le(Xa);let s=le(ek,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(_D),...this.injector.get(ZO,[])]));this.chain=s.reduceRight((o,c)=>XO(o,c,this.injector),JO)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Dl(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(ge(bu),ge(Ct))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})();var tk=/^\)\]\}',?\n/;function nk(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var vD=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new te(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?tt(i.\u0275loadImpl()):Xo(null)).pipe(bl(()=>new Q(o=>{let c=i.build();if(c.open(r.method,r.urlWithParams),r.withCredentials&&(c.withCredentials=!0),r.headers.forEach((N,P)=>c.setRequestHeader(N,P.join(","))),r.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let N=r.detectContentTypeHeader();N!==null&&c.setRequestHeader("Content-Type",N)}if(r.responseType){let N=r.responseType.toLowerCase();c.responseType=N!=="json"?N:"text"}let u=r.serializeBody(),d=null,f=()=>{if(d!==null)return d;let N=c.statusText||"OK",P=new Dr(c.getAllResponseHeaders()),L=nk(c)||r.url;return d=new mg({headers:P,status:c.status,statusText:N,url:L}),d},g=()=>{let{headers:N,status:P,statusText:L,url:V}=f(),j=null;P!==Su.NoContent&&(j=typeof c.response>"u"?c.responseText:c.response),P===0&&(P=j?Su.Ok:0);let pe=P>=200&&P<300;if(r.responseType==="json"&&typeof j=="string"){let q=j;j=j.replace(tk,"");try{j=j!==""?JSON.parse(j):null}catch(w){j=q,pe&&(pe=!1,j={error:w,text:j})}}pe?(o.next(new Cu({body:j,headers:N,status:P,statusText:L,url:V||void 0})),o.complete()):o.error(new Au({error:j,headers:N,status:P,statusText:L,url:V||void 0}))},_=N=>{let{url:P}=f(),L=new Au({error:N,status:c.status||0,statusText:c.statusText||"Unknown Error",url:P||void 0});o.error(L)},E=!1,S=N=>{E||(o.next(f()),E=!0);let P={type:Pi.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(P.total=N.total),r.responseType==="text"&&c.responseText&&(P.partialText=c.responseText),o.next(P)},x=N=>{let P={type:Pi.UploadProgress,loaded:N.loaded};N.lengthComputable&&(P.total=N.total),o.next(P)};return c.addEventListener("load",g),c.addEventListener("error",_),c.addEventListener("timeout",_),c.addEventListener("abort",_),r.reportProgress&&(c.addEventListener("progress",S),u!==null&&c.upload&&c.upload.addEventListener("progress",x)),c.send(u),o.next({type:Pi.Sent}),()=>{c.removeEventListener("error",_),c.removeEventListener("abort",_),c.removeEventListener("load",g),c.removeEventListener("timeout",_),r.reportProgress&&(c.removeEventListener("progress",S),u!==null&&c.upload&&c.upload.removeEventListener("progress",x)),c.readyState!==c.DONE&&c.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(ge(nc))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})(),ID=new W(""),rk="XSRF-TOKEN",ik=new W("",{providedIn:"root",factory:()=>rk}),sk="X-XSRF-TOKEN",ok=new W("",{providedIn:"root",factory:()=>sk}),Nu=class{},ak=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=X_(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(ge(rc),ge(_s),ge(ik))},e.\u0275prov=oe({token:e,factory:e.\u0275fac});let t=e;return t})();function ck(t,e){let n=t.url.toLowerCase();if(!le(ID)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=le(Nu).getToken(),i=le(ok);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function gG(...t){let e=[yg,vD,yD,{provide:fo,useExisting:yD},{provide:bu,useExisting:vD},{provide:_D,useValue:ck,multi:!0},{provide:ID,useValue:!0},{provide:Nu,useClass:ak}];for(let n of t)e.push(...n.\u0275providers);return er(e)}var vG=(()=>{let e=class e{constructor(r){this.http=r,this.apiUrl="https://restcountries.com/v3.1/name/"}obtenerPais(r){return this.http.get(`${this.apiUrl}${r}`).pipe(_e(i=>{let s=i[0];return{nombre:s.name.common,imagen:s.flags.png}}))}};e.\u0275fac=function(i){return new(i||e)(ge(yg))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();export{Oe as a,Qe as b,C as c,Se as d,Rm as e,pl as f,gl as g,rn as h,es as i,ns as j,tt as k,Xo as l,ET as m,DT as n,jn as o,_e as p,xT as q,Un as r,na as s,PT as t,cn as u,Xm as v,wl as w,rs as x,El as y,OT as z,Dl as A,ey as B,Tl as C,FT as D,ty as E,ny as F,bl as G,VT as H,ia as I,te as J,oe as K,Oj as L,W as M,ee as N,ge as O,le as P,os as Q,kj as R,be as S,er as T,cv as U,Ct as V,lv as W,tr as X,Fj as Y,Vj as Z,vs as _,Gt as $,Kr as aa,nt as ba,Lj as ca,jj as da,VC as ea,_s as fa,Uj as ga,Bj as ha,$j as ia,Aa as ja,qj as ka,K as la,dd as ma,Me as na,Ja as oa,md as pa,$A as qa,Xa as ra,KA as sa,rS as ta,R_ as ua,P_ as va,gS as wa,Wj as xa,yn as ya,Kj as za,IS as Aa,k_ as Ba,Qj as Ca,ES as Da,DS as Ea,Yj as Fa,TS as Ga,Jj as Ha,Xj as Ia,Zj as Ja,Is as Ka,B_ as La,sh as Ma,eU as Na,ec as Oa,tU as Pa,Zr as Qa,NU as Ra,q_ as Sa,rc as Ta,tN as Ua,X_ as Va,MU as Wa,xU as Xa,RU as Ya,PU as Za,OU as _a,oN as $a,nc as ab,gG as bb,uN as cb,uI as db,Z_ as eb,XU as fb,ZU as gb,PN as hb,FN as ib,tB as jb,LN as kb,BN as lb,qN as mb,GN as nb,KN as ob,nB as pb,rB as qb,iB as rb,f$ as sb,p$ as tb,xE as ub,QR as vb,lo as wb,QH as xb,YH as yb,JH as zb,XH as Ab,ZH as Bb,vG as Cb};
