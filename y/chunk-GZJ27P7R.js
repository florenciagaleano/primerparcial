import{a as de}from"./chunk-2EV3UQIX.js";import{$a as te,Aa as P,Bb as H,Cb as R,Da as a,Db as $,Ea as U,Eb as F,Fa as W,Fb as re,Gb as ne,Hb as ae,Ib as x,Ja as _,Kb as M,La as Z,Lb as le,Ma as ee,S as g,Z as J,_ as K,ab as S,bb as oe,c as C,ca as E,cb as y,hb as O,ib as c,jb as N,kb as k,la as d,ma as b,nb as T,ob as q,qb as V,rb as A,sb as D,ta as p,tb as z,ua as s,ub as G,va as o,vb as L,wa as e,wb as B,xa as f,xb as ie,ya as Q,yb as j,za as v}from"./chunk-CRKVPKSU.js";function fe(i,r){i&1&&(o(0,"div"),a(1,"Por favor ingresa un sabor v\xE1lido."),e())}function he(i,r){i&1&&(o(0,"div"),a(1,"Por favor selecciona un tipo v\xE1lido."),e())}function be(i,r){i&1&&(o(0,"div"),a(1,"Por favor ingresa un precio v\xE1lido."),e())}function ve(i,r){i&1&&(o(0,"div"),a(1,"Por favor ingresa un peso v\xE1lido."),e())}var me=(()=>{let r=class r{constructor(l,n){this.formBuilder=l,this.firestore=n,this.submitted=!1,this.heladoCreado=new E,this.altaHeladoForm=this.formBuilder.group({sabor:["",c.required],tipo:["",c.required],precio:["",[c.required,c.min(0)]],peso:["",[c.required,de.pesoValidator]]})}get sabor(){return this.altaHeladoForm.get("sabor").value}get tipo(){return this.altaHeladoForm.get("tipo").value}get precio(){return this.altaHeladoForm.get("precio").value}get peso(){return this.altaHeladoForm.get("peso").value}onSubmit(){if(this.submitted=!0,this.altaHeladoForm.invalid)return;{let n=H(this.firestore,"helados");ae(n,{sabor:this.sabor,tipo:this.tipo,precio:this.precio,peso:this.peso}),alert("Helado agregado ok!")}let l={sabor:this.sabor,tipo:this.tipo,precio:this.precio,peso:this.peso};this.submitted=!1}};r.\u0275fac=function(n){return new(n||r)(b(B),b(x))},r.\u0275cmp=g({type:r,selectors:[["app-alta-helado"]],outputs:{heladoCreado:"heladoCreado"},standalone:!0,features:[_],decls:30,vars:5,consts:[[3,"ngSubmit","formGroup"],["for","sabor"],["type","text","id","sabor","formControlName","sabor","required",""],[4,"ngIf"],["for","tipo"],["id","tipo","formControlName","tipo","required",""],["value","agua"],["value","crema"],["for","precio"],["type","number","id","precio","formControlName","precio","required",""],["for","peso"],["type","number","id","peso","formControlName","peso","required",""],["type","submit"]],template:function(n,t){if(n&1&&(o(0,"div")(1,"h2"),a(2,"Alta de Helado"),e(),o(3,"form",0),v("ngSubmit",function(){return t.onSubmit()}),o(4,"div")(5,"label",1),a(6,"Sabor"),e(),f(7,"input",2),p(8,fe,2,0,"div",3),e(),o(9,"div")(10,"label",4),a(11,"Tipo"),e(),o(12,"select",5)(13,"option",6),a(14,"Agua"),e(),o(15,"option",7),a(16,"Crema"),e()(),p(17,he,2,0,"div",3),e(),o(18,"div")(19,"label",8),a(20,"Precio"),e(),f(21,"input",9),p(22,be,2,0,"div",3),e(),o(23,"div")(24,"label",10),a(25,"Peso"),e(),f(26,"input",11),p(27,ve,2,0,"div",3),e(),o(28,"button",12),a(29,"Agregar Helado"),e()()()),n&2){let m,h,w,I;d(3),s("formGroup",t.altaHeladoForm),d(5),s("ngIf",t.submitted&&((m=t.altaHeladoForm.get("sabor"))==null?null:m.errors)),d(9),s("ngIf",t.submitted&&((h=t.altaHeladoForm.get("tipo"))==null?null:h.errors)),d(5),s("ngIf",t.submitted&&((w=t.altaHeladoForm.get("precio"))==null?null:w.errors)),d(5),s("ngIf",t.submitted&&((I=t.altaHeladoForm.get("peso"))==null?null:I.errors))}},dependencies:[y,S,j,T,z,G,O,q,D,N,k,L,V,A],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}input[_ngcontent-%COMP%]{color:#fff;padding:0;border-width:4px;border-color:#909a9d;background-color:#888087d7;border-style:hidden;border-radius:6px;box-shadow:0 0 11px #bebbbba3;text-shadow:0px 0px 5px rgba(255,255,255,.75);margin:10px}button[_ngcontent-%COMP%]{cursor:pointer;display:block;font-family:"Jersey 10 Charted",sans-serif;background:none;color:#00f;font-size:20px}form[_ngcontent-%COMP%]{width:40%;min-width:320px;max-width:475px;background-color:#d5e6e980;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:2px 5px #00000040}button[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}']});let i=r;return i})();function ge(i,r){i&1&&(o(0,"div"),a(1," Por favor ingresa un sabor v\xE1lido. "),e())}function _e(i,r){i&1&&(o(0,"div"),a(1," Por favor selecciona un tipo v\xE1lido. "),e())}function xe(i,r){i&1&&(o(0,"div"),a(1," Por favor ingresa un precio v\xE1lido. "),e())}function Ce(i,r){i&1&&(o(0,"div"),a(1," Por favor ingresa un peso v\xE1lido. "),e())}var pe=(()=>{let r=class r{constructor(l,n){this.formBuilder=l,this.firestore=n,this.submitted=!1,this.modificarHeladoForm=this.formBuilder.group({sabor:["",c.required],tipo:["",c.required],precio:["",[c.required,c.min(0)]],peso:["",[c.required,c.min(0)]]})}ngOnInit(){this.helado&&this.modificarHeladoForm.patchValue({sabor:this.helado.sabor,tipo:this.helado.tipo,precio:this.helado.precio,peso:this.helado.peso})}get sabor(){return this.modificarHeladoForm.get("sabor").value}get tipo(){return this.modificarHeladoForm.get("tipo").value}get precio(){return this.modificarHeladoForm.get("precio").value}get peso(){return this.modificarHeladoForm.get("peso").value}onSubmit(){return C(this,null,function*(){if(this.submitted=!0,this.modificarHeladoForm.invalid)return;let l=H(this.firestore,"helados");try{let n=$(l,F("sabor","==",this.sabor),F("tipo","==",this.tipo)),t=M(n,{idField:"id"});this.sub=t.subscribe(m=>C(this,null,function*(){if(m.length>0)try{let h=R(this.firestore,`helados/${m[0].id}`);yield re(h,{precio:this.precio,peso:this.peso}),alert("Helado actualizado correctamente")}catch(h){alert("Error al actualizar el helado: "+h)}finally{this.sub.unsubscribe(),this.submitted=!1}}))}catch(n){alert("Error al buscar el helado: "+n)}})}};r.\u0275fac=function(n){return new(n||r)(b(B),b(x))},r.\u0275cmp=g({type:r,selectors:[["app-modificar-helado"]],inputs:{helado:"helado"},standalone:!0,features:[_],decls:27,vars:5,consts:[["novalidate","",3,"ngSubmit","formGroup"],["for","sabor"],["type","text","id","sabor","formControlName","sabor","required",""],[4,"ngIf"],["for","tipo"],["id","tipo","formControlName","tipo","required",""],["value","agua"],["value","crema"],["for","precio"],["type","number","id","precio","formControlName","precio","required",""],["for","peso"],["type","number","id","peso","formControlName","peso","required",""],["type","submit"]],template:function(n,t){if(n&1&&(o(0,"form",0),v("ngSubmit",function(){return t.onSubmit()}),o(1,"div")(2,"label",1),a(3,"Sabor"),e(),f(4,"input",2),p(5,ge,2,0,"div",3),e(),o(6,"div")(7,"label",4),a(8,"Tipo"),e(),o(9,"select",5)(10,"option",6),a(11,"Agua"),e(),o(12,"option",7),a(13,"Crema"),e()(),p(14,_e,2,0,"div",3),e(),o(15,"div")(16,"label",8),a(17,"Precio"),e(),f(18,"input",9),p(19,xe,2,0,"div",3),e(),o(20,"div")(21,"label",10),a(22,"Peso"),e(),f(23,"input",11),p(24,Ce,2,0,"div",3),e(),o(25,"button",12),a(26,"Guardar Cambios"),e()()),n&2){let m,h,w,I;s("formGroup",t.modificarHeladoForm),d(5),s("ngIf",t.submitted&&((m=t.modificarHeladoForm.get("sabor"))==null?null:m.errors)),d(9),s("ngIf",t.submitted&&((h=t.modificarHeladoForm.get("tipo"))==null?null:h.errors)),d(5),s("ngIf",t.submitted&&((w=t.modificarHeladoForm.get("precio"))==null?null:w.errors)),d(5),s("ngIf",t.submitted&&((I=t.modificarHeladoForm.get("peso"))==null?null:I.errors))}},dependencies:[y,S,j,T,z,G,O,q,D,N,k,L,V,A],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}input[_ngcontent-%COMP%]{color:#fff;padding:0;border-width:4px;border-color:#909a9d;background-color:#888087d7;border-style:hidden;border-radius:6px;box-shadow:0 0 11px #bebbbba3;text-shadow:0px 0px 5px rgba(255,255,255,.75);margin:10px}button[_ngcontent-%COMP%]{cursor:pointer;display:block;font-family:"Jersey 10 Charted",sans-serif;background:none;color:#00f;font-size:20px}form[_ngcontent-%COMP%]{width:40%;min-width:320px;max-width:475px;background-color:#d5e6e980;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:2px 5px #00000040}button[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}']});let i=r;return i})();var ce=(()=>{let r=class r{constructor(l){this.firestore=l,this.heladoEliminado=new E}ngOnInit(){this.helado&&this.eliminarHelado()}eliminarHelado(){return C(this,null,function*(){if(this.helado){let l=H(this.firestore,"helados"),n=$(l,F("sabor","==",this.helado.sabor),F("tipo","==",this.helado.tipo)),t=M(n,{idField:"id"});this.sub=t.subscribe(m=>C(this,null,function*(){if(m.length>0)try{yield ne(R(this.firestore,`helados/${m[0].id}`)),alert("Helado eliminado correctamente")}catch{alert("Error al eliminar el helado")}}))}})}};r.\u0275fac=function(n){return new(n||r)(b(x))},r.\u0275cmp=g({type:r,selectors:[["app-eliminar-helado"]],inputs:{helado:"helado"},outputs:{heladoEliminado:"heladoEliminado"},standalone:!0,features:[_],decls:2,vars:0,template:function(n,t){n&1&&(o(0,"p"),a(1,"eliminar-helado works!"),e())}});let i=r;return i})();function Ee(i,r){if(i&1){let u=Q();o(0,"div")(1,"div")(2,"div")(3,"h3"),a(4),e(),o(5,"p"),a(6),e(),o(7,"p"),a(8),Z(9,"currency"),e(),o(10,"p"),a(11),e(),o(12,"button",4),v("click",function(){let n=J(u).$implicit,t=P();return K(t.seleccionarHelado(n))}),a(13," Seleccionar "),e()()()()}if(i&2){let u=r.$implicit;d(4),U(u.sabor),d(2),U(u.tipo),d(2),W("Precio: ",ee(9,4,u.precio),""),d(3),W("Peso: ",u.peso," g")}}function Se(i,r){if(i&1){let u=Q();o(0,"div")(1,"app-alta-helado",5),v("heladoCreado",function(n){J(u);let t=P();return K(t.agregarHelado(n))}),e()()}}function ye(i,r){if(i&1&&(o(0,"div"),f(1,"app-modificar-helado",6),e()),i&2){let u=P();d(),s("helado",u.selectedHelado)}}function He(i,r){if(i&1&&(o(0,"div"),f(1,"app-eliminar-helado",6),e()),i&2){let u=P();d(),s("helado",u.selectedHelado)}}var it=(()=>{let r=class r{constructor(l){this.firestore=l,this.heladoSeleccionado=new E,this.selectedHelado=void 0,this.helados=[],this.modo=null}ngOnInit(){let l=le(this.firestore,"helados"),n=M(l);this.sub=n.subscribe(t=>{this.helados=t,console.log(t)})}seleccionarHelado(l){this.selectedHelado=l}mostrarAlta(){this.modo="alta"}mostrarModificar(){this.modo="modificar"}mostrarEliminar(){this.modo="eliminar"}agregarHelado(l){this.helados.push(l),this.modo=null}modificarHelado(l){let n=this.helados.findIndex(t=>t.sabor===l.sabor&&t.tipo===l.tipo);n!==-1&&(this.helados[n]=l),this.modo=null}};r.\u0275fac=function(n){return new(n||r)(b(x))},r.\u0275cmp=g({type:r,selectors:[["app-listado-helados"]],outputs:{heladoSeleccionado:"heladoSeleccionado"},standalone:!0,features:[_],decls:20,vars:6,consts:[[4,"ngFor","ngForOf"],[3,"click"],[3,"click","disabled"],[4,"ngIf"],[1,"btn-seleccionar",3,"click"],[3,"heladoCreado"],[3,"helado"]],template:function(n,t){n&1&&(o(0,"div")(1,"header")(2,"h1"),a(3,"Administraci\xF3n de Helados"),e()(),o(4,"div"),p(5,Ee,14,6,"div",0),e(),o(6,"div")(7,"div")(8,"button",1),v("click",function(){return t.mostrarAlta()}),a(9,"Alta"),e()(),o(10,"div")(11,"button",2),v("click",function(){return t.mostrarModificar()}),a(12,"Modificar"),e()(),o(13,"div")(14,"button",2),v("click",function(){return t.mostrarEliminar()}),a(15,"Eliminar"),e()()(),o(16,"div"),p(17,Se,2,0,"div",3)(18,ye,2,1,"div",3)(19,He,2,1,"div",3),e()()),n&2&&(d(5),s("ngForOf",t.helados),d(6),s("disabled",!t.selectedHelado),d(3),s("disabled",!t.selectedHelado),d(3),s("ngIf",t.modo==="alta"),d(),s("ngIf",t.modo==="modificar"),d(),s("ngIf",t.modo==="eliminar"))},dependencies:[me,ie,y,te,S,oe,pe,ce],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}input[_ngcontent-%COMP%]{color:#fff;padding:0;border-width:4px;border-color:#909a9d;background-color:#888087d7;border-style:hidden;border-radius:6px;box-shadow:0 0 11px #bebbbba3;text-shadow:0px 0px 5px rgba(255,255,255,.75);margin:10px}button[_ngcontent-%COMP%]{cursor:pointer;display:block;font-family:"Jersey 10 Charted",sans-serif;background:none;color:#00f;font-size:30px}form[_ngcontent-%COMP%]{width:40%;min-width:320px;max-width:475px;background-color:#d5e6e980;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:2px 5px #00000040}button[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.btn-seleccionar[_ngcontent-%COMP%]{background-color:#00f;color:#fff;font-size:15px}']});let i=r;return i})();export{it as ListadoHeladosComponent};
