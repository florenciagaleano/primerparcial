var cT=Object.defineProperty,uT=Object.defineProperties;var lT=Object.getOwnPropertyDescriptors;var ym=Object.getOwnPropertySymbols;var dT=Object.prototype.hasOwnProperty,hT=Object.prototype.propertyIsEnumerable;var vm=(t,e,n)=>e in t?cT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Le=(t,e)=>{for(var n in e||={})dT.call(e,n)&&vm(t,n,e[n]);if(ym)for(var n of ym(e))hT.call(e,n)&&vm(t,n,e[n]);return t},Ze=(t,e)=>uT(t,lT(e));var A=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(d){i(d)}},o=u=>{try{c(n.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())});var _m=null;var Ju=1,Zu=Symbol("SIGNAL");function oe(t){let e=_m;return _m=t,e}var Im={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fT(t){if(!(tl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ju)){if(!t.producerMustRecompute(t)&&!Xu(t)){t.dirty=!1,t.lastCleanEpoch=Ju;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ju}}function wm(t){return t&&(t.nextProducerIndex=0),oe(t)}function Em(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(tl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)el(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Xu(t){Oo(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(fT(n),r!==n.version))return!0}return!1}function Dm(t){if(Oo(t),tl(t))for(let e=0;e<t.producerNode.length;e++)el(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function el(t,e){if(pT(t),Oo(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)el(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Oo(i),i.producerIndexOfThis[r]=e}}function tl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Oo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function pT(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function gT(){throw new Error}var mT=gT;function Tm(t){mT=t}function H(t){return typeof t=="function"}function Rr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ko=Rr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function jn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(s){e=s instanceof ko?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{bm(s)}catch(o){e=e??[],o instanceof ko?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ko(e)}}add(e){var n;if(e&&e!==this)if(this.closed)bm(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&jn(n,e)}remove(e){let{_finalizers:n}=this;n&&jn(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var nl=Ae.EMPTY;function Fo(t){return t instanceof Ae||t&&"closed"in t&&H(t.remove)&&H(t.add)&&H(t.unsubscribe)}function bm(t){H(t)?t():t.unsubscribe()}var vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Pr={setTimeout(t,e,...n){let{delegate:r}=Pr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Pr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Vo(t){Pr.setTimeout(()=>{let{onUnhandledError:e}=vt;if(e)e(t);else throw t})}function ns(){}var Cm=rl("C",void 0,void 0);function Am(t){return rl("E",void 0,t)}function Sm(t){return rl("N",t,void 0)}function rl(t,e,n){return{kind:t,value:e,error:n}}var Bn=null;function Or(t){if(vt.useDeprecatedSynchronousErrorHandling){let e=!Bn;if(e&&(Bn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bn;if(Bn=null,n)throw r}}else t()}function Nm(t){vt.useDeprecatedSynchronousErrorHandling&&Bn&&(Bn.errorThrown=!0,Bn.error=t)}var $n=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Fo(e)&&e.add(this)):this.destination=_T}static create(e,n,r){return new kr(e,n,r)}next(e){this.isStopped?sl(Sm(e),this):this._next(e)}error(e){this.isStopped?sl(Am(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sl(Cm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},yT=Function.prototype.bind;function il(t,e){return yT.call(t,e)}var ol=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Lo(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Lo(r)}else Lo(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Lo(n)}}},kr=class extends $n{constructor(e,n,r){super();let i;if(H(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&vt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&il(e.next,s),error:e.error&&il(e.error,s),complete:e.complete&&il(e.complete,s)}):i=e}this.destination=new ol(i)}};function Lo(t){vt.useDeprecatedSynchronousErrorHandling?Nm(t):Vo(t)}function vT(t){throw t}function sl(t,e){let{onStoppedNotification:n}=vt;n&&Pr.setTimeout(()=>n(t,e))}var _T={closed:!0,next:ns,error:vT,complete:ns};var Fr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function it(t){return t}function Mm(...t){return al(t)}function al(t){return t.length===0?it:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Q=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=wT(n)?n:new kr(n,r,i);return Or(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=xm(r),new r((i,s)=>{let o=new kr({next:c=>{try{n(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Fr](){return this}pipe(...n){return al(n)(this)}toPromise(n){return n=xm(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function xm(t){var e;return(e=t??vt.Promise)!==null&&e!==void 0?e:Promise}function IT(t){return t&&H(t.next)&&H(t.error)&&H(t.complete)}function wT(t){return t&&t instanceof $n||IT(t)&&Fo(t)}function cl(t){return H(t?.lift)}function ne(t){return e=>{if(cl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new ul(t,e,n,r,i)}var ul=class extends $n{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ll(){return ne((t,e)=>{let n=null;t._refCount++;let r=Y(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var dl=class extends Q{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,cl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(Y(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return ll()(this)}};var Rm=Rr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var hn=(()=>{class t extends Q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Uo(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Rm}next(n){Or(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Or(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Or(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?nl:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,jn(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new Q;return n.source=this,n}}return t.create=(e,n)=>new Uo(e,n),t})(),Uo=class extends hn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:nl}};var rs=class extends hn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hl={now(){return(hl.delegate||Date).now()},delegate:void 0};var jo=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var is={setInterval(t,e,...n){let{delegate:r}=is;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=is;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Vr=class extends jo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return is.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&is.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,jn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Lr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Lr.now=hl.now;var Ur=class extends Lr{constructor(e,n=Lr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var fl=new Ur(Vr);var Bo=class extends Vr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var $o=class extends Ur{};var pl=new $o(Bo);var ss=new Q(t=>t.complete());function Pm(t){return t&&H(t.schedule)}function Om(t){return t[t.length-1]}function Ho(t){return H(Om(t))?t.pop():void 0}function fn(t){return Pm(Om(t))?t.pop():void 0}function gl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Fm(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(f){try{d(r.next(f))}catch(p){o(p)}}function u(f){try{d(r.throw(f))}catch(p){o(p)}}function d(f){f.done?s(f.value):i(f.value).then(c,u)}d((r=r.apply(t,e||[])).next())})}function km(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hn(t){return this instanceof Hn?(this.v=t,this):new Hn(t)}function Vm(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){r[y]&&(i[y]=function(I){return new Promise(function(S,x){s.push([y,I,S,x])>1||c(y,I)})})}function c(y,I){try{u(r[y](I))}catch(S){p(s[0][3],S)}}function u(y){y.value instanceof Hn?Promise.resolve(y.value.v).then(d,f):p(s[0][2],y)}function d(y){c("next",y)}function f(y){c("throw",y)}function p(y,I){y(I),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Lm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof km=="function"?km(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(d){s({value:d,done:c})},o)}}var qo=t=>t&&typeof t.length=="number"&&typeof t!="function";function Go(t){return H(t?.then)}function zo(t){return H(t[Fr])}function Wo(t){return Symbol.asyncIterator&&H(t?.[Symbol.asyncIterator])}function Ko(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ET(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qo=ET();function Yo(t){return H(t?.[Qo])}function Jo(t){return Vm(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Hn(n.read());if(i)return yield Hn(void 0);yield yield Hn(r)}}finally{n.releaseLock()}})}function Zo(t){return H(t?.getReader)}function Ee(t){if(t instanceof Q)return t;if(t!=null){if(zo(t))return DT(t);if(qo(t))return TT(t);if(Go(t))return bT(t);if(Wo(t))return Um(t);if(Yo(t))return CT(t);if(Zo(t))return AT(t)}throw Ko(t)}function DT(t){return new Q(e=>{let n=t[Fr]();if(H(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function TT(t){return new Q(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function bT(t){return new Q(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Vo)})}function CT(t){return new Q(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Um(t){return new Q(e=>{ST(t,e).catch(n=>e.error(n))})}function AT(t){return Um(Jo(t))}function ST(t,e){var n,r,i,s;return Fm(this,void 0,void 0,function*(){try{for(n=Lm(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Xe(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function pn(t,e=0){return ne((n,r)=>{n.subscribe(Y(r,i=>Xe(r,t,()=>r.next(i),e),()=>Xe(r,t,()=>r.complete(),e),i=>Xe(r,t,()=>r.error(i),e)))})}function gn(t,e=0){return ne((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function jm(t,e){return Ee(t).pipe(gn(e),pn(e))}function Bm(t,e){return Ee(t).pipe(gn(e),pn(e))}function $m(t,e){return new Q(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Hm(t,e){return new Q(n=>{let r;return Xe(n,e,()=>{r=t[Qo](),Xe(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>H(r?.return)&&r.return()})}function Xo(t,e){if(!t)throw new Error("Iterable cannot be null");return new Q(n=>{Xe(n,e,()=>{let r=t[Symbol.asyncIterator]();Xe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function qm(t,e){return Xo(Jo(t),e)}function Gm(t,e){if(t!=null){if(zo(t))return jm(t,e);if(qo(t))return $m(t,e);if(Go(t))return Bm(t,e);if(Wo(t))return Xo(t,e);if(Yo(t))return Hm(t,e);if(Zo(t))return qm(t,e)}throw Ko(t)}function _t(t,e){return e?Gm(t,e):Ee(t)}function NT(...t){let e=fn(t);return _t(t,e)}function MT(t,e){let n=H(t)?t:()=>t,r=i=>i.error(n());return new Q(e?i=>e.schedule(r,0,i):r)}function xT(t){return!!t&&(t instanceof Q||H(t.lift)&&H(t.subscribe))}var qn=Rr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function We(t,e){return ne((n,r)=>{let i=0;n.subscribe(Y(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:RT}=Array;function PT(t,e){return RT(e)?t(...e):t(e)}function ea(t){return We(e=>PT(t,e))}var{isArray:OT}=Array,{getPrototypeOf:kT,prototype:FT,keys:VT}=Object;function ta(t){if(t.length===1){let e=t[0];if(OT(e))return{args:e,keys:null};if(LT(e)){let n=VT(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function LT(t){return t&&typeof t=="object"&&kT(t)===FT}function na(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function UT(...t){let e=fn(t),n=Ho(t),{args:r,keys:i}=ta(t);if(r.length===0)return _t([],e);let s=new Q(jT(r,e,i?o=>na(i,o):it));return n?s.pipe(ea(n)):s}function jT(t,e,n=it){return r=>{zm(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)zm(e,()=>{let d=_t(t[u],e),f=!1;d.subscribe(Y(r,p=>{s[u]=p,f||(f=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function zm(t,e,n){t?Xe(n,t,e):e()}function Wm(t,e,n,r,i,s,o,c){let u=[],d=0,f=0,p=!1,y=()=>{p&&!u.length&&!d&&e.complete()},I=x=>d<r?S(x):u.push(x),S=x=>{s&&e.next(x),d++;let M=!1;Ee(n(x,f++)).subscribe(Y(e,O=>{i?.(O),s?I(O):e.next(O)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;u.length&&d<r;){let O=u.shift();o?Xe(e,o,()=>S(O)):S(O)}y()}catch(O){e.error(O)}}))};return t.subscribe(Y(e,I,()=>{p=!0,y()})),()=>{c?.()}}function Gn(t,e,n=1/0){return H(e)?Gn((r,i)=>We((s,o)=>e(r,s,i,o))(Ee(t(r,i))),n):(typeof e=="number"&&(n=e),ne((r,i)=>Wm(r,i,t,n)))}function Km(t=1/0){return Gn(it,t)}function Qm(){return Km(1)}function ra(...t){return Qm()(_t(t,fn(t)))}function BT(t){return new Q(e=>{Ee(t()).subscribe(e)})}function ml(...t){let e=Ho(t),{args:n,keys:r}=ta(t),i=new Q(s=>{let{length:o}=n;if(!o){s.complete();return}let c=new Array(o),u=o,d=o;for(let f=0;f<o;f++){let p=!1;Ee(n[f]).subscribe(Y(s,y=>{p||(p=!0,d--),c[f]=y},()=>u--,void 0,()=>{(!u||!p)&&(d||s.next(r?na(r,c):c),s.complete())}))}});return e?i.pipe(ea(e)):i}function jr(t,e){return ne((n,r)=>{let i=0;n.subscribe(Y(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Ym(t){return ne((e,n)=>{let r=null,i=!1,s;r=e.subscribe(Y(n,void 0,void 0,o=>{s=Ee(t(o,Ym(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Jm(t,e,n,r,i){return(s,o)=>{let c=n,u=e,d=0;s.subscribe(Y(o,f=>{let p=d++;u=c?t(u,f,p):(c=!0,f),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function $T(t,e){return H(e)?Gn(t,e,1):Gn(t,1)}function os(t){return ne((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function yl(t){return t<=0?()=>ss:ne((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function HT(t){return We(()=>t)}function ia(t=qT){return ne((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function qT(){return new qn}function GT(t){return ne((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Zm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?jr((i,s)=>t(i,s,r)):it,yl(1),n?os(e):ia(()=>new qn))}function vl(t){return t<=0?()=>ss:ne((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function zT(t,e){let n=arguments.length>=2;return r=>r.pipe(t?jr((i,s)=>t(i,s,r)):it,vl(1),n?os(e):ia(()=>new qn))}function Xm(t,e){return ne(Jm(t,e,arguments.length>=2,!0))}function ey(...t){let e=fn(t);return ne((n,r)=>{(e?ra(t,n,e):ra(t,n)).subscribe(r)})}function WT(t,e){return ne((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(Y(r,u=>{i?.unsubscribe();let d=0,f=s++;Ee(t(u,f)).subscribe(i=Y(r,p=>r.next(e?e(u,p,f,d++):p),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function KT(t){return ne((e,n)=>{Ee(t).subscribe(Y(n,()=>n.complete(),ns)),!n.closed&&e.subscribe(n)})}function _l(t,e,n){let r=H(t)||e||n?{next:t,error:e,complete:n}:t;return r?ne((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(Y(s,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var d;c=!1,(d=r.error)===null||d===void 0||d.call(r,u),s.error(u)},()=>{var u,d;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):it}var Ly="https://g.co/ng/security#xss",te=class extends Error{constructor(e,n){super(Uy(e,n)),this.code=e}};function Uy(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function vs(t){return{toString:t}.toString()}var sa="__parameters__";function QT(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function jy(t,e,n){return vs(()=>{let r=QT(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,d,f){let p=u.hasOwnProperty(sa)?u[sa]:Object.defineProperty(u,sa,{value:[]})[sa];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var At=globalThis;function de(t){for(let e in t)if(t[e]===de)return e;throw Error("Could not find renamed property on target object.")}function YT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Qe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Qe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function ty(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var JT=de({__forward_ref__:de});function tt(t){return t.__forward_ref__=tt,t.toString=function(){return Qe(this())},t}function Ke(t){return By(t)?t():t}function By(t){return typeof t=="function"&&t.hasOwnProperty(JT)&&t.__forward_ref__===tt}function ge(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Va(t){return ny(t,$y)||ny(t,Hy)}function tj(t){return Va(t)!==null}function ny(t,e){return t.hasOwnProperty(e)?t[e]:null}function ZT(t){let e=t&&(t[$y]||t[Hy]);return e||null}function ry(t){return t&&(t.hasOwnProperty(iy)||t.hasOwnProperty(XT))?t[iy]:null}var $y=de({\u0275prov:de}),iy=de({\u0275inj:de}),Hy=de({ngInjectableDef:de}),XT=de({ngInjectorDef:de}),re=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ge({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function qy(t){return t&&!!t.\u0275providers}var eb=de({\u0275cmp:de}),tb=de({\u0275dir:de}),nb=de({\u0275pipe:de}),rb=de({\u0275mod:de}),pa=de({\u0275fac:de}),as=de({__NG_ELEMENT_ID__:de}),sy=de({__NG_ENV_ID__:de});function La(t){return typeof t=="string"?t:t==null?"":String(t)}function ib(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():La(t)}function sb(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new te(-200,t)}function Td(t,e){throw new te(-201,!1)}var ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ee||{}),Fl;function Gy(){return Fl}function et(t){let e=Fl;return Fl=t,e}function zy(t,e,n){let r=Va(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ee.Optional)return null;if(e!==void 0)return e;Td(t,"Injector")}var ob={},cs=ob,Vl="__NG_DI_FLAG__",ga="ngTempTokenPath",ab="ngTokenPath",cb=/\n/gm,ub="\u0275",oy="__source",qr;function lb(){return qr}function mn(t){let e=qr;return qr=t,e}function db(t,e=ee.Default){if(qr===void 0)throw new te(-203,!1);return qr===null?zy(t,void 0,e):qr.get(t,e&ee.Optional?null:void 0,e)}function Ue(t,e=ee.Default){return(Gy()||db)(Ke(t),e)}function ye(t,e=ee.Default){return Ue(t,Ua(e))}function Ua(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ll(t){let e=[];for(let n=0;n<t.length;n++){let r=Ke(t[n]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,s=ee.Default;for(let o=0;o<r.length;o++){let c=r[o],u=hb(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(Ue(i,s))}else e.push(Ue(r))}return e}function Wy(t,e){return t[Vl]=e,t.prototype[Vl]=e,t}function hb(t){return t[Vl]}function fb(t,e,n,r){let i=t[ga];throw e[oy]&&i.unshift(e[oy]),t.message=pb(`
`+t.message,i,n,r),t[ab]=i,t[ga]=null,t}function pb(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==ub?t.slice(2):t;let i=Qe(e);if(Array.isArray(e))i=e.map(Qe).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):Qe(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(cb,`
  `)}`}var Wt=Wy(jy("Optional"),8);var gb=Wy(jy("SkipSelf"),4);function Qn(t,e){let n=t.hasOwnProperty(pa);return n?t[pa]:null}function bd(t,e){t.forEach(n=>Array.isArray(n)?bd(n,e):e(n))}function Ky(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ma(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function mb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function yb(t,e,n){let r=_s(t,e);return r>=0?t[r|1]=n:(r=~r,mb(t,r,e,n)),r}function Il(t,e){let n=_s(t,e);if(n>=0)return t[n|1]}function _s(t,e){return vb(t,e,1)}function vb(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var zr={},lt=[],ya=new re(""),Qy=new re("",-1),Yy=new re(""),va=class{get(e,n=cs){if(n===cs){let r=new Error(`NullInjectorError: No provider for ${Qe(e)}!`);throw r.name="NullInjectorError",r}return n}},Jy=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Jy||{}),us=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(us||{}),Re=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Re||{});function _b(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Ul(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];wb(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Ib(t){return t===3||t===4||t===6}function wb(t){return t.charCodeAt(0)===64}function ls(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ay(t,n,i,null,e[++r]):ay(t,n,i,null,null))}}return t}function ay(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Zy="ng-template";function Eb(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&_b(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Cd(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Cd(t){return t.type===4&&t.value!==Zy}function Db(t,e,n){let r=t.type===4&&!n?Zy:t.value;return e===r}function Tb(t,e,n){let r=4,i=t.attrs,s=i!==null?Ab(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!It(r)&&!It(u))return!1;if(o&&It(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!Db(t,u,n)||u===""&&e.length===1){if(It(r))return!1;o=!0}}else if(r&8){if(i===null||!Eb(t,i,u,n)){if(It(r))return!1;o=!0}}else{let d=e[++c],f=bb(u,i,Cd(t),n);if(f===-1){if(It(r))return!1;o=!0;continue}if(d!==""){let p;if(f>s?p="":p=i[f+1].toLowerCase(),r&2&&d!==p){if(It(r))return!1;o=!0}}}}return It(r)||o}function It(t){return(t&1)===0}function bb(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Sb(e,t)}function Cb(t,e,n=!1){for(let r=0;r<e.length;r++)if(Tb(t,e[r],n))return!0;return!1}function Ab(t){for(let e=0;e<t.length;e++){let n=t[e];if(Ib(n))return e}return t.length}function Sb(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function cy(t,e){return t?":not("+e.trim()+")":e}function Nb(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!It(o)&&(e+=cy(s,i),i=""),r=o,s=s||!It(r);n++}return i!==""&&(e+=cy(s,i)),e}function Mb(t){return t.map(Nb).join(",")}function xb(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!It(i))break;i=s}r++}return{attrs:e,classes:n}}function nj(t){return vs(()=>{let e=rv(t),n=Ze(Le({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Jy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||us.Emulated,styles:t.styles||lt,_:null,schemas:t.schemas||null,tView:null,id:""});iv(n);let r=t.dependencies;return n.directiveDefs=ly(r,!1),n.pipeDefs=ly(r,!0),n.id=kb(n),n})}function Rb(t){return Yn(t)||ev(t)}function Pb(t){return t!==null}function ei(t){return vs(()=>({type:t.type,bootstrap:t.bootstrap||lt,declarations:t.declarations||lt,imports:t.imports||lt,exports:t.exports||lt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function uy(t,e){if(t==null)return zr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c=Re.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=c!==Re.None?[r,c]:r,e[s]=o):n[s]=r}return n}function me(t){return vs(()=>{let e=rv(t);return iv(e),e})}function Xy(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Yn(t){return t[eb]||null}function ev(t){return t[tb]||null}function tv(t){return t[nb]||null}function Ob(t){let e=Yn(t)||ev(t)||tv(t);return e!==null?e.standalone:!1}function nv(t,e){let n=t[rb]||null;if(!n&&e===!0)throw new Error(`Type ${Qe(t)} does not have '\u0275mod' property.`);return n}function rv(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||zr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||lt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uy(t.inputs,e),outputs:uy(t.outputs),debugInfo:null}}function iv(t){t.features?.forEach(e=>e(t))}function ly(t,e){if(!t)return null;let n=e?tv:Rb;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Pb)}function kb(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Is(t){return{\u0275providers:t}}function Fb(...t){return{\u0275providers:sv(!0,t),\u0275fromNgModule:!0}}function sv(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return bd(e,o=>{let c=o;jl(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&ov(i,s),n}function ov(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ad(i,s=>{e(s,r)})}}function jl(t,e,n,r){if(t=Ke(t),!t)return!1;let i=null,s=ry(t),o=!s&&Yn(t);if(!s&&!o){let u=t.ngModule;if(s=ry(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of u)jl(d,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let d;try{bd(s.imports,f=>{jl(f,e,n,r)&&(d||=[],d.push(f))})}finally{}d!==void 0&&ov(d,e)}if(!c){let d=Qn(i)||(()=>new i);e({provide:i,useFactory:d,deps:lt},i),e({provide:Yy,useValue:i,multi:!0},i),e({provide:ya,useValue:()=>Ue(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let d=t;Ad(u,f=>{e(f,d)})}}else return!1;return i!==t&&t.providers!==void 0}function Ad(t,e){for(let n of t)qy(n)&&(n=n.\u0275providers),Array.isArray(n)?Ad(n,e):e(n)}var Vb=de({provide:String,useValue:de});function av(t){return t!==null&&typeof t=="object"&&Vb in t}function Lb(t){return!!(t&&t.useExisting)}function Ub(t){return!!(t&&t.useFactory)}function Wr(t){return typeof t=="function"}function jb(t){return!!t.useClass}var cv=new re(""),ua={},Bb={},wl;function Sd(){return wl===void 0&&(wl=new va),wl}var vn=class{},ds=class extends vn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$l(e,o=>this.processProvider(o)),this.records.set(Qy,Br(void 0,this)),i.has("environment")&&this.records.set(vn,Br(void 0,this));let s=this.records.get(cv);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Yy,lt,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=mn(this),r=et(void 0),i;try{return e()}finally{mn(n),et(r)}}get(e,n=cs,r=ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(sy))return e[sy](this);r=Ua(r);let i,s=mn(this),o=et(void 0);try{if(!(r&ee.SkipSelf)){let u=this.records.get(e);if(u===void 0){let d=zb(e)&&Va(e);d&&this.injectableDefInScope(d)?u=Br(Bl(e),ua):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&ee.Self?Sd():this.parent;return n=r&ee.Optional&&n===cs?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[ga]=c[ga]||[]).unshift(Qe(e)),s)throw c;return fb(c,e,"R3InjectorError",this.source)}else throw c}finally{et(o),mn(s)}}resolveInjectorInitializers(){let e=oe(null),n=mn(this),r=et(void 0),i;try{let s=this.get(ya,lt,ee.Self);for(let o of s)o()}finally{mn(n),et(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Qe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(e){e=Ke(e);let n=Wr(e)?e:Ke(e&&e.provide),r=Hb(e);if(!Wr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Br(void 0,ua,!0),i.factory=()=>Ll(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=oe(null);try{return n.value===ua&&(n.value=Bb,n.value=n.factory()),typeof n.value=="object"&&n.value&&Gb(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ke(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Bl(t){let e=Va(t),n=e!==null?e.factory:Qn(t);if(n!==null)return n;if(t instanceof re)throw new te(204,!1);if(t instanceof Function)return $b(t);throw new te(204,!1)}function $b(t){if(t.length>0)throw new te(204,!1);let n=ZT(t);return n!==null?()=>n.factory(t):()=>new t}function Hb(t){if(av(t))return Br(void 0,t.useValue);{let e=uv(t);return Br(e,ua)}}function uv(t,e,n){let r;if(Wr(t)){let i=Ke(t);return Qn(i)||Bl(i)}else if(av(t))r=()=>Ke(t.useValue);else if(Ub(t))r=()=>t.useFactory(...Ll(t.deps||[]));else if(Lb(t))r=()=>Ue(Ke(t.useExisting));else{let i=Ke(t&&(t.useClass||t.provide));if(qb(t))r=()=>new i(...Ll(t.deps));else return Qn(i)||Bl(i)}return r}function Br(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function qb(t){return!!t.deps}function Gb(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function zb(t){return typeof t=="function"||typeof t=="object"&&t instanceof re}function $l(t,e){for(let n of t)Array.isArray(n)?$l(n,e):n&&qy(n)?$l(n.\u0275providers,e):e(n)}function rj(t,e){t instanceof ds&&t.assertNotDestroyed();let n,r=mn(t),i=et(void 0);try{return e()}finally{mn(r),et(i)}}function Wb(){return Gy()!==void 0||lb()!=null}function Kb(t){return typeof t=="function"}var Kt=0,J=1,$=2,je=3,wt=4,Tt=5,_a=6,hs=7,Et=8,Kr=9,Dt=10,De=11,fs=12,dy=13,ti=14,Mt=15,ja=16,$r=17,Qr=18,Ba=19,lv=20,yn=21,El=22,Jn=23,xt=25,dv=1;var Zn=7,Ia=8,wa=9,dt=10,Nd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Nd||{});function Wn(t){return Array.isArray(t)&&typeof t[dv]=="object"}function Qt(t){return Array.isArray(t)&&t[dv]===!0}function hv(t){return(t.flags&4)!==0}function $a(t){return t.componentOffset>-1}function Md(t){return(t.flags&1)===1}function _n(t){return!!t.template}function Qb(t){return(t[$]&512)!==0}var Hl=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function fv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function sr(){return pv}function pv(t){return t.type.prototype.ngOnChanges&&(t.setInput=Jb),Yb}sr.ngInherit=!0;function Yb(){let t=mv(this),e=t?.current;if(e){let n=t.previous;if(n===zr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Jb(t,e,n,r,i){let s=this.declaredInputs[r],o=mv(t)||Zb(t,{previous:zr,current:null}),c=o.current||(o.current={}),u=o.previous,d=u[s];c[s]=new Hl(d&&d.currentValue,n,u===zr),fv(t,e,i,n)}var gv="__ngSimpleChanges__";function mv(t){return t[gv]||null}function Zb(t,e){return t[gv]=e}var hy=null;var St=function(t,e,n){hy?.(t,e,n)},Xb="svg",eC="math",tC=!1;function nC(){return tC}function Rt(t){for(;Array.isArray(t);)t=t[Kt];return t}function yv(t,e){return Rt(e[t])}function ht(t,e){return Rt(e[t.index])}function vv(t,e){return t.data[e]}function rC(t,e){return t[e]}function wn(t,e){let n=e[t];return Wn(n)?n:n[Kt]}function xd(t){return(t[$]&128)===128}function iC(t){return Qt(t[je])}function Ea(t,e){return e==null?null:t[e]}function _v(t){t[$r]=0}function sC(t){t[$]&1024||(t[$]|=1024,xd(t)&&ps(t))}function oC(t,e){for(;t>0;)e=e[ti],t--;return e}function Rd(t){return!!(t[$]&9216||t[Jn]?.dirty)}function ql(t){t[Dt].changeDetectionScheduler?.notify(1),Rd(t)?ps(t):t[$]&64&&(nC()?(t[$]|=1024,ps(t)):t[Dt].changeDetectionScheduler?.notify())}function ps(t){t[Dt].changeDetectionScheduler?.notify();let e=gs(t);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!xd(e)));)e=gs(e)}function Iv(t,e){if((t[$]&256)===256)throw new te(911,!1);t[yn]===null&&(t[yn]=[]),t[yn].push(e)}function aC(t,e){if(t[yn]===null)return;let n=t[yn].indexOf(e);n!==-1&&t[yn].splice(n,1)}function gs(t){let e=t[je];return Qt(e)?e[je]:e}var K={lFrame:Sv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function cC(){return K.lFrame.elementDepthCount}function uC(){K.lFrame.elementDepthCount++}function lC(){K.lFrame.elementDepthCount--}function wv(){return K.bindingsEnabled}function dC(){return K.skipHydrationRootTNode!==null}function hC(t){return K.skipHydrationRootTNode===t}function fC(){K.skipHydrationRootTNode=null}function ue(){return K.lFrame.lView}function Ye(){return K.lFrame.tView}function ij(t){return K.lFrame.contextLView=t,t[Et]}function sj(t){return K.lFrame.contextLView=null,t}function ot(){let t=Ev();for(;t!==null&&t.type===64;)t=t.parent;return t}function Ev(){return K.lFrame.currentTNode}function pC(){let t=K.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ws(t,e){let n=K.lFrame;n.currentTNode=t,n.isParent=e}function Dv(){return K.lFrame.isParent}function gC(){K.lFrame.isParent=!1}function Tv(){let t=K.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function mC(t){return K.lFrame.bindingIndex=t}function Ha(){return K.lFrame.bindingIndex++}function yC(t){let e=K.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function vC(){return K.lFrame.inI18n}function _C(t,e){let n=K.lFrame;n.bindingIndex=n.bindingRootIndex=t,Gl(e)}function IC(){return K.lFrame.currentDirectiveIndex}function Gl(t){K.lFrame.currentDirectiveIndex=t}function wC(t){let e=K.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function bv(t){K.lFrame.currentQueryIndex=t}function EC(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[Tt]:null}function Cv(t,e,n){if(n&ee.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ee.Host);)if(i=EC(s),i===null||(s=s[ti],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=K.lFrame=Av();return r.currentTNode=e,r.lView=t,!0}function Pd(t){let e=Av(),n=t[J];K.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Av(){let t=K.lFrame,e=t===null?null:t.child;return e===null?Sv(t):e}function Sv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Nv(){let t=K.lFrame;return K.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Mv=Nv;function Od(){let t=Nv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function DC(t){return(K.lFrame.contextLView=oC(t,K.lFrame.contextLView))[Et]}function ni(){return K.lFrame.selectedIndex}function Xn(t){K.lFrame.selectedIndex=t}function qa(){let t=K.lFrame;return vv(t.tView,t.selectedIndex)}function TC(){return K.lFrame.currentNamespace}var xv=!0;function kd(){return xv}function Fd(t){xv=t}function bC(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=pv(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Vd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function la(t,e,n){Rv(t,e,3,n)}function da(t,e,n,r){(t[$]&3)===n&&Rv(t,e,n,r)}function Dl(t,e){let n=t[$];(n&3)===e&&(n&=16383,n+=1,t[$]=n)}function Rv(t,e,n,r){let i=r!==void 0?t[$r]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[$r]+=65536),(c<s||s==-1)&&(CC(t,n,e,u),t[$r]=(t[$r]&4294901760)+u+2),u++}function fy(t,e){St(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),St(5,t,e)}}function CC(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[$]>>14<t[$r]>>16&&(t[$]&3)===e&&(t[$]+=16384,fy(c,s)):fy(c,s)}var Gr=-1,er=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function AC(t){return t instanceof er}function SC(t){return(t.flags&8)!==0}function NC(t){return(t.flags&16)!==0}function Pv(t){return t!==Gr}function Da(t){return t&32767}function MC(t){return t>>16}function Ta(t,e){let n=MC(t),r=e;for(;n>0;)r=r[ti],n--;return r}var zl=!0;function ba(t){let e=zl;return zl=t,e}var xC=256,Ov=xC-1,kv=5,RC=0,Nt={};function PC(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(as)&&(r=n[as]),r==null&&(r=n[as]=RC++);let i=r&Ov,s=1<<i;e.data[t+(i>>kv)]|=s}function Ca(t,e){let n=Fv(t,e);if(n!==-1)return n;let r=e[J];r.firstCreatePass&&(t.injectorIndex=e.length,Tl(r.data,t),Tl(e,null),Tl(r.blueprint,null));let i=Ld(t,e),s=t.injectorIndex;if(Pv(i)){let o=Da(i),c=Ta(i,e),u=c[J].data;for(let d=0;d<8;d++)e[s+d]=c[o+d]|u[o+d]}return e[s+8]=i,s}function Tl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fv(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Ld(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Bv(i),r===null)return Gr;if(n++,i=i[ti],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Gr}function Wl(t,e,n){PC(t,e,n)}function Vv(t,e,n){if(n&ee.Optional||t!==void 0)return t;Td(e,"NodeInjector")}function Lv(t,e,n,r){if(n&ee.Optional&&r===void 0&&(r=null),!(n&(ee.Self|ee.Host))){let i=t[Kr],s=et(void 0);try{return i?i.get(e,r,n&ee.Optional):zy(e,r,n&ee.Optional)}finally{et(s)}}return Vv(r,e,n)}function Uv(t,e,n,r=ee.Default,i){if(t!==null){if(e[$]&2048&&!(r&ee.Self)){let o=LC(t,e,n,r,Nt);if(o!==Nt)return o}let s=jv(t,e,n,r,Nt);if(s!==Nt)return s}return Lv(e,n,r,i)}function jv(t,e,n,r,i){let s=FC(n);if(typeof s=="function"){if(!Cv(e,t,r))return r&ee.Host?Vv(i,n,r):Lv(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ee.Optional))Td(n);else return o}finally{Mv()}}else if(typeof s=="number"){let o=null,c=Fv(t,e),u=Gr,d=r&ee.Host?e[Mt][Tt]:null;for((c===-1||r&ee.SkipSelf)&&(u=c===-1?Ld(t,e):e[c+8],u===Gr||!gy(r,!1)?c=-1:(o=e[J],c=Da(u),e=Ta(u,e)));c!==-1;){let f=e[J];if(py(s,c,f.data)){let p=OC(c,e,n,o,r,d);if(p!==Nt)return p}u=e[c+8],u!==Gr&&gy(r,e[J].data[c+8]===d)&&py(s,c,e)?(o=f,c=Da(u),e=Ta(u,e)):c=-1}}return i}function OC(t,e,n,r,i,s){let o=e[J],c=o.data[t+8],u=r==null?$a(c)&&zl:r!=o&&(c.type&3)!==0,d=i&ee.Host&&s===c,f=kC(c,o,n,u,d);return f!==null?Yr(e,o,f,c):Nt}function kC(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,u=t.directiveStart,d=t.directiveEnd,f=s>>20,p=r?c:c+f,y=i?c+f:d;for(let I=p;I<y;I++){let S=o[I];if(I<u&&n===S||I>=u&&S.type===n)return I}if(i){let I=o[u];if(I&&_n(I)&&I.type===n)return u}return null}function Yr(t,e,n,r){let i=t[n],s=e.data;if(AC(i)){let o=i;o.resolving&&sb(ib(s[n]));let c=ba(o.canSeeViewProviders);o.resolving=!0;let u,d=o.injectImpl?et(o.injectImpl):null,f=Cv(t,r,ee.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&bC(n,s[n],e)}finally{d!==null&&et(d),ba(c),o.resolving=!1,Mv()}}return i}function FC(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(as)?t[as]:void 0;return typeof e=="number"?e>=0?e&Ov:VC:e}function py(t,e,n){let r=1<<t;return!!(n[e+(t>>kv)]&r)}function gy(t,e){return!(t&ee.Self)&&!(t&ee.Host&&e)}var Kn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Uv(this._tNode,this._lView,e,Ua(r),n)}};function VC(){return new Kn(ot(),ue())}function or(t){return vs(()=>{let e=t.prototype.constructor,n=e[pa]||Kl(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[pa]||Kl(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Kl(t){return By(t)?()=>{let e=Kl(Ke(t));return e&&e()}:Qn(t)}function LC(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[$]&2048&&!(o[$]&512);){let c=jv(s,o,n,r|ee.Self,Nt);if(c!==Nt)return c;let u=s.parent;if(!u){let d=o[lv];if(d){let f=d.get(n,Nt,r);if(f!==Nt)return f}u=Bv(o),o=o[ti]}s=u}return i}function Bv(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[Tt]:null}function my(t,e=null,n=null,r){let i=$v(t,e,n,r);return i.resolveInjectorInitializers(),i}function $v(t,e=null,n=null,r,i=new Set){let s=[n||lt,Fb(t)];return r=r||(typeof t=="object"?void 0:Qe(t)),new ds(s,e||Sd(),r||null,i)}var Yt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return my({name:""},i,r,"");{let s=r.name??"";return my({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=cs,e.NULL=new va,e.\u0275prov=ge({token:e,providedIn:"any",factory:()=>Ue(Qy)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var UC="ngOriginalError";function bl(t){return t[UC]}var Jr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&bl(e);for(;n&&bl(n);)n=bl(n);return n||null}},Hv=new re("",{providedIn:"root",factory:()=>ye(Jr).handleError.bind(void 0)}),qv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jC,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Ql=class extends qv{constructor(e){super(),this._lView=e}onDestroy(e){return Iv(this._lView,e),()=>aC(this._lView,e)}};function jC(){return new Ql(ue())}function BC(){return Ga(ot(),ue())}function Ga(t,e){return new Pt(ht(t,e))}var Pt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=BC;let t=e;return t})();var Yl=class extends hn{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Wb()&&(this.destroyRef=ye(qv,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Cl(s),i&&(i=Cl(i)),o&&(o=Cl(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(c),c}};function Cl(t){return e=>{setTimeout(t,void 0,e)}}var st=Yl;function Gv(t){return(t.flags&128)===128}var zv=new Map,$C=0;function HC(){return $C++}function qC(t){zv.set(t[Ba],t)}function GC(t){zv.delete(t[Ba])}var yy="__ngContext__";function tr(t,e){Wn(e)?(t[yy]=e[Ba],qC(e)):t[yy]=e}function Wv(t){return Qv(t[fs])}function Kv(t){return Qv(t[wt])}function Qv(t){for(;t!==null&&!Qt(t);)t=t[wt];return t}var Jl;function oj(t){Jl=t}function zC(){if(Jl!==void 0)return Jl;if(typeof document<"u")return document;throw new te(210,!1)}var aj=new re("",{providedIn:"root",factory:()=>WC}),WC="ng",KC=new re(""),Ud=new re("",{providedIn:"platform",factory:()=>"unknown"});var cj=new re("",{providedIn:"root",factory:()=>zC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var QC="h",YC="b";var JC=()=>null;function jd(t,e,n=!1){return JC(t,e,n)}var Yv=!1,ZC=new re("",{providedIn:"root",factory:()=>Yv});var oa;function XC(){if(oa===void 0&&(oa=null,At.trustedTypes))try{oa=At.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return oa}function e0(t){return XC()?.createScriptURL(t)||t}var Aa=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ly})`}};function Bd(t){return t instanceof Aa?t.changingThisBreaksApplicationSecurity:t}function t0(t,e){let n=n0(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ly})`)}return n===e}function n0(t){return t instanceof Aa&&t.getTypeName()||null}var r0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function i0(t){return t=String(t),t.match(r0)?t:"unsafe:"+t}var Jv=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Jv||{});function uj(t){let e=s0();return e?e.sanitize(Jv.URL,t)||"":t0(t,"URL")?Bd(t):i0(La(t))}function lj(t){return e0(t[0])}function s0(){let t=ue();return t&&t[Dt].sanitizer}function Zv(t){return t instanceof Function?t():t}var Sa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Sa||{}),o0;function $d(t,e){return o0(t,e)}function Hr(t,e,n,r,i){if(r!=null){let s,o=!1;Qt(r)?s=r:Wn(r)&&(o=!0,r=r[Kt]);let c=Rt(r);t===0&&n!==null?i==null?r_(e,n,c):Na(e,n,c,i||null,!0):t===1&&n!==null?Na(e,n,c,i||null,!0):t===2?D0(e,c,o):t===3&&e.destroyNode(c),s!=null&&b0(e,t,s,n,i)}}function a0(t,e){return t.createText(e)}function c0(t,e,n){t.setValue(e,n)}function Xv(t,e,n){return t.createElement(e,n)}function u0(t,e){e_(t,e),e[Kt]=null,e[Tt]=null}function l0(t,e,n,r,i,s){r[Kt]=i,r[Tt]=e,za(t,r,n,1,i,s)}function e_(t,e){e[Dt].changeDetectionScheduler?.notify(1),za(t,e,e[De],2,null,null)}function d0(t){let e=t[fs];if(!e)return Al(t[J],t);for(;e;){let n=null;if(Wn(e))n=e[fs];else{let r=e[dt];r&&(n=r)}if(!n){for(;e&&!e[wt]&&e!==t;)Wn(e)&&Al(e[J],e),e=e[je];e===null&&(e=t),Wn(e)&&Al(e[J],e),n=e&&e[wt]}e=n}}function h0(t,e,n,r){let i=dt+r,s=n.length;r>0&&(n[i-1][wt]=e),r<s-dt?(e[wt]=n[i],Ky(n,dt+r,e)):(n.push(e),e[wt]=null),e[je]=n;let o=e[ja];o!==null&&n!==o&&f0(o,e);let c=e[Qr];c!==null&&c.insertView(t),ql(e),e[$]|=128}function f0(t,e){let n=t[wa],i=e[je][je][Mt];e[Mt]!==i&&(t[$]|=Nd.HasTransplantedViews),n===null?t[wa]=[e]:n.push(e)}function t_(t,e){let n=t[wa],r=n.indexOf(e);n.splice(r,1)}function Zl(t,e){if(t.length<=dt)return;let n=dt+e,r=t[n];if(r){let i=r[ja];i!==null&&i!==t&&t_(i,r),e>0&&(t[n-1][wt]=r[wt]);let s=ma(t,dt+e);u0(r[J],r);let o=s[Qr];o!==null&&o.detachView(s[J]),r[je]=null,r[wt]=null,r[$]&=-129}return r}function n_(t,e){if(!(e[$]&256)){let n=e[De];n.destroyNode&&za(t,e,n,3,null,null),d0(e)}}function Al(t,e){if(e[$]&256)return;let n=oe(null);try{e[$]&=-129,e[$]|=256,e[Jn]&&Dm(e[Jn]),g0(t,e),p0(t,e),e[J].type===1&&e[De].destroy();let r=e[ja];if(r!==null&&Qt(e[je])){r!==e[je]&&t_(r,e);let i=e[Qr];i!==null&&i.detachView(t)}GC(e)}finally{oe(n)}}function p0(t,e){let n=t.cleanup,r=e[hs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[hs]=null);let i=e[yn];if(i!==null){e[yn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function g0(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof er)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];St(4,c,u);try{u.call(c)}finally{St(5,c,u)}}else{St(4,i,s);try{s.call(i)}finally{St(5,i,s)}}}}}function m0(t,e,n){return y0(t,e.parent,n)}function y0(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Kt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===us.None||s===us.Emulated)return null}return ht(r,n)}}function Na(t,e,n,r,i){t.insertBefore(e,n,r,i)}function r_(t,e,n){t.appendChild(e,n)}function vy(t,e,n,r,i){r!==null?Na(t,e,n,r,i):r_(t,e,n)}function v0(t,e,n,r){t.removeChild(e,n,r)}function Hd(t,e){return t.parentNode(e)}function _0(t,e){return t.nextSibling(e)}function I0(t,e,n){return E0(t,e,n)}function w0(t,e,n){return t.type&40?ht(t,n):null}var E0=w0,_y;function qd(t,e,n,r){let i=m0(t,r,e),s=e[De],o=r.parent||e[Tt],c=I0(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)vy(s,i,n[u],c,!1);else vy(s,i,n,c,!1);_y!==void 0&&_y(s,r,e,n,i)}function ha(t,e){if(e!==null){let n=e.type;if(n&3)return ht(e,t);if(n&4)return Xl(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ha(t,r);{let i=t[e.index];return Qt(i)?Xl(-1,i):Rt(i)}}else{if(n&32)return $d(e,t)()||Rt(t[e.index]);{let r=i_(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gs(t[Mt]);return ha(i,r)}else return ha(t,e.next)}}}return null}function i_(t,e){if(e!==null){let r=t[Mt][Tt],i=e.projection;return r.projection[i]}return null}function Xl(t,e){let n=dt+t+1;if(n<e.length){let r=e[n],i=r[J].firstChild;if(i!==null)return ha(r,i)}return e[Zn]}function D0(t,e,n){let r=Hd(t,e);r&&v0(t,r,e,n)}function Gd(t,e,n,r,i,s,o){for(;n!=null;){let c=r[n.index],u=n.type;if(o&&e===0&&(c&&tr(Rt(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Gd(t,e,n.child,r,i,s,!1),Hr(e,t,i,c,s);else if(u&32){let d=$d(n,r),f;for(;f=d();)Hr(e,t,i,f,s);Hr(e,t,i,c,s)}else u&16?T0(t,e,r,n,i,s):Hr(e,t,i,c,s);n=o?n.projectionNext:n.next}}function za(t,e,n,r,i,s){Gd(n,r,t.firstChild,e,i,s,!1)}function T0(t,e,n,r,i,s){let o=n[Mt],u=o[Tt].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let f=u[d];Hr(e,t,i,f,s)}else{let d=u,f=o[je];Gv(r)&&(d.flags|=128),Gd(t,e,d,f,i,s,!0)}}function b0(t,e,n,r,i){let s=n[Zn],o=Rt(n);s!==o&&Hr(e,t,r,s,i);for(let c=dt;c<n.length;c++){let u=n[c];za(u[J],u,t,e,r,s)}}function C0(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Sa.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Sa.Important),t.setStyle(n,r,i,s))}}function A0(t,e,n){t.setAttribute(e,"style",n)}function s_(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function o_(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Ul(t,e,r),i!==null&&s_(t,e,i),s!==null&&A0(t,e,s)}var En={};function dj(t=1){a_(Ye(),ue(),ni()+t,!1)}function a_(t,e,n,r){if(!r)if((e[$]&3)===3){let s=t.preOrderCheckHooks;s!==null&&la(e,s,n)}else{let s=t.preOrderHooks;s!==null&&da(e,s,0,n)}Xn(n)}function j(t,e=ee.Default){let n=ue();if(n===null)return Ue(t,e);let r=ot();return Uv(r,n,Ke(t),e)}function c_(t,e,n,r,i,s){let o=oe(null);try{let c=null;i&Re.SignalBased&&(c=e[r][Zu]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&Re.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,c,s,n,r):fv(e,c,r,s)}finally{oe(o)}}function S0(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Xn(~i);else{let s=i,o=n[++r],c=n[++r];_C(o,s);let u=e[s];c(2,u)}}}finally{Xn(-1)}}function Wa(t,e,n,r,i,s,o,c,u,d,f){let p=e.blueprint.slice();return p[Kt]=i,p[$]=r|4|128|8|64,(d!==null||t&&t[$]&2048)&&(p[$]|=2048),_v(p),p[je]=p[ti]=t,p[Et]=n,p[Dt]=o||t&&t[Dt],p[De]=c||t&&t[De],p[Kr]=u||t&&t[Kr]||null,p[Tt]=s,p[Ba]=HC(),p[_a]=f,p[lv]=d,p[Mt]=e.type==2?t[Mt]:p,p}function Ka(t,e,n,r,i){let s=t.data[e];if(s===null)s=N0(t,e,n,r,i),vC()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=pC();s.injectorIndex=o===null?-1:o.injectorIndex}return ws(s,!0),s}function N0(t,e,n,r,i){let s=Ev(),o=Dv(),c=o?s:s&&s.parent,u=t.data[e]=O0(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function u_(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function l_(t,e,n,r,i){let s=ni(),o=r&2;try{Xn(-1),o&&e.length>xt&&a_(t,e,xt,!1),St(o?2:0,i),n(r,i)}finally{Xn(s),St(o?3:1,i)}}function d_(t,e,n){if(hv(e)){let r=oe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let u=n[o];c.contentQueries(1,u,o)}}}finally{oe(r)}}}function h_(t,e,n){wv()&&(j0(t,e,n,ht(n,e)),(n.flags&64)===64&&y_(t,e,n))}function f_(t,e,n=ht){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function p_(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=zd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function zd(t,e,n,r,i,s,o,c,u,d,f){let p=xt+r,y=p+i,I=M0(p,y),S=typeof d=="function"?d():d;return I[J]={type:t,blueprint:I,template:n,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function M0(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:En);return n}function x0(t,e,n,r){let s=r.get(ZC,Yv)||n===us.ShadowDom,o=t.selectRootElement(e,s);return R0(o),o}function R0(t){P0(t)}var P0=()=>null;function O0(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return dC()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Iy(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=Re.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let d=s;if(i!==null){if(!i.hasOwnProperty(s))continue;d=i[s]}t===0?wy(r,n,d,c,u):wy(r,n,d,c)}return r}function wy(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function k0(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,c=[],u=null,d=null;for(let f=r;f<i;f++){let p=s[f],y=n?n.get(p):null,I=y?y.inputs:null,S=y?y.outputs:null;u=Iy(0,p.inputs,f,u,I),d=Iy(1,p.outputs,f,d,S);let x=u!==null&&o!==null&&!Cd(e)?J0(u,f,o):null;c.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=d}function F0(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Wd(t,e,n,r,i,s,o,c){let u=ht(e,n),d=e.inputs,f;!c&&d!=null&&(f=d[r])?(Kd(t,n,f,r,i),$a(e)&&V0(n,e.index)):e.type&3?(r=F0(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function V0(t,e){let n=wn(e,t);n[$]&16||(n[$]|=64)}function g_(t,e,n,r){if(wv()){let i=r===null?null:{"":-1},s=$0(t,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&m_(t,e,n,o,i,c),i&&H0(n,r,i)}n.mergedAttrs=ls(n.mergedAttrs,n.attrs)}function m_(t,e,n,r,i,s){for(let d=0;d<r.length;d++)Wl(Ca(n,e),t,r[d].type);G0(n,t.data.length,r.length);for(let d=0;d<r.length;d++){let f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,c=!1,u=u_(t,e,r.length,null);for(let d=0;d<r.length;d++){let f=r[d];n.mergedAttrs=ls(n.mergedAttrs,f.hostAttrs),z0(t,n,e,u,f),q0(u,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}k0(t,n,s)}function L0(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;U0(o)!=c&&o.push(c),o.push(n,r,s)}}function U0(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function j0(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;$a(n)&&W0(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ca(n,e),tr(r,e);let o=n.initialInputs;for(let c=i;c<s;c++){let u=t.data[c],d=Yr(e,t,c,n);if(tr(d,e),o!==null&&Y0(e,c-i,d,u,n,o),_n(u)){let f=wn(n.index,e);f[Et]=Yr(e,t,c,n)}}}function y_(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=IC();try{Xn(s);for(let c=r;c<i;c++){let u=t.data[c],d=e[c];Gl(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&B0(u,d)}}finally{Xn(-1),Gl(o)}}function B0(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function $0(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Cb(e,o.selectors,!1))if(r||(r=[]),_n(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;ed(t,e,u)}else r.unshift(o),ed(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function ed(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function H0(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new te(-301,!1);r.push(e[i],s)}}}function q0(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_n(e)&&(n[""]=t)}}function G0(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function z0(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Qn(i.type,!0)),o=new er(s,_n(i),j);t.blueprint[r]=o,n[r]=o,L0(t,e,r,u_(t,n,i.hostVars,En),i)}function W0(t,e,n){let r=ht(e,t),i=p_(n),s=t[Dt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=Qa(t,Wa(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=c}function K0(t,e,n,r,i,s){let o=ht(t,e);Q0(e[De],o,s,t.value,n,r,i)}function Q0(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let c=o==null?La(s):o(s,r||"",i);t.setAttribute(e,i,c,n)}}function Y0(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],d=o[c++],f=o[c++],p=o[c++];c_(r,n,u,d,f,p)}}function J0(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function v_(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function __(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];bv(s),c.contentQueries(2,e[o],o)}}}finally{oe(r)}}}function Qa(t,e){return t[fs]?t[dy][wt]=e:t[fs]=e,t[dy]=e,e}function td(t,e,n){bv(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function Z0(t){return t[hs]||(t[hs]=[])}function X0(t){return t.cleanup||(t.cleanup=[])}function I_(t,e){let n=t[Kr],r=n?n.get(Jr,null):null;r&&r.handleError(e)}function Kd(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],u=n[s++],d=e[o],f=t.data[o];c_(f,d,r,c,u,i)}}function eA(t,e,n){let r=yv(e,t);c0(t[De],r,n)}function tA(t,e){let n=wn(e,t),r=n[J];nA(r,n);let i=n[Kt];i!==null&&n[_a]===null&&(n[_a]=jd(i,n[Kr])),Qd(r,n,n[Et])}function nA(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Qd(t,e,n){Pd(e);try{let r=t.viewQuery;r!==null&&td(1,r,n);let i=t.template;i!==null&&l_(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Qr]?.finishViewCreation(t),t.staticContentQueries&&__(t,e),t.staticViewQueries&&td(2,t.viewQuery,n);let s=t.components;s!==null&&rA(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[$]&=-5,Od()}}function rA(t,e){for(let n=0;n<e.length;n++)tA(t,e[n])}function iA(t,e,n,r){let i=oe(null);try{let s=e.tView,c=t[$]&4096?4096:16,u=Wa(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=t[e.index];u[ja]=d;let f=t[Qr];return f!==null&&(u[Qr]=f.createEmbeddedView(s)),Qd(s,u,n),u}finally{oe(i)}}function Ey(t,e){return!e||e.firstChild===null||Gv(t)}function sA(t,e,n,r=!0){let i=e[J];if(h0(i,e,t,n),r){let o=Xl(n,t),c=e[De],u=Hd(c,t[Zn]);u!==null&&l0(i,t[Tt],c,e,u,o)}let s=e[_a];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ma(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Rt(s)),Qt(s)&&oA(s,r);let o=n.type;if(o&8)Ma(t,e,n.child,r);else if(o&32){let c=$d(n,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=i_(e,n);if(Array.isArray(c))r.push(...c);else{let u=gs(e[Mt]);Ma(u[J],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function oA(t,e){for(let n=dt;n<t.length;n++){let r=t[n],i=r[J].firstChild;i!==null&&Ma(r[J],r,i,e)}t[Zn]!==t[Kt]&&e.push(t[Zn])}var w_=[];function aA(t){return t[Jn]??cA(t)}function cA(t){let e=w_.pop()??Object.create(lA);return e.lView=t,e}function uA(t){t.lView[Jn]!==t&&(t.lView=null,w_.push(t))}var lA=Ze(Le({},Im),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ps(t.lView)},consumerOnSignalRead(){this.lView[Jn]=this}}),E_=100;function D_(t,e=!0,n=0){let r=t[Dt],i=r.rendererFactory,s=!1;s||i.begin?.();try{dA(t,n)}catch(o){throw e&&I_(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function dA(t,e){nd(t,e);let n=0;for(;Rd(t);){if(n===E_)throw new te(103,!1);n++,nd(t,1)}}function hA(t,e,n,r){let i=e[$];if((i&256)===256)return;let s=!1;!s&&e[Dt].inlineEffectRunner?.flush(),Pd(e);let o=null,c=null;!s&&fA(t)&&(c=aA(e),o=wm(c));try{_v(e),mC(t.bindingStartIndex),n!==null&&l_(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&la(e,p,null)}else{let p=t.preOrderHooks;p!==null&&da(e,p,0,null),Dl(e,0)}if(pA(e),T_(e,0),t.contentQueries!==null&&__(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&la(e,p)}else{let p=t.contentHooks;p!==null&&da(e,p,1),Dl(e,1)}S0(t,e);let d=t.components;d!==null&&C_(e,d,0);let f=t.viewQuery;if(f!==null&&td(2,f,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&la(e,p)}else{let p=t.viewHooks;p!==null&&da(e,p,2),Dl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[El]){for(let p of e[El])p();e[El]=null}s||(e[$]&=-73)}catch(u){throw ps(e),u}finally{c!==null&&(Em(c,o),uA(c)),Od()}}function fA(t){return t.type!==2}function T_(t,e){for(let n=Wv(t);n!==null;n=Kv(n))for(let r=dt;r<n.length;r++){let i=n[r];b_(i,e)}}function pA(t){for(let e=Wv(t);e!==null;e=Kv(e)){if(!(e[$]&Nd.HasTransplantedViews))continue;let n=e[wa];for(let r=0;r<n.length;r++){let i=n[r],s=i[je];sC(i)}}}function gA(t,e,n){let r=wn(e,t);b_(r,n)}function b_(t,e){xd(t)&&nd(t,e)}function nd(t,e){let r=t[J],i=t[$],s=t[Jn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Xu(s)),s&&(s.dirty=!1),t[$]&=-9217,o)hA(r,t,r.template,t[Et]);else if(i&8192){T_(t,1);let c=r.components;c!==null&&C_(t,c,1)}}function C_(t,e,n){for(let r=0;r<e.length;r++)gA(t,e[r],n)}function Yd(t){for(t[Dt].changeDetectionScheduler?.notify();t;){t[$]|=64;let e=gs(t);if(Qb(t)&&!e)return t;t=e}return null}var nr=class{get rootNodes(){let e=this._lView,n=e[J];return Ma(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Et]}set context(e){this._lView[Et]=e}get destroyed(){return(this._lView[$]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[je];if(Qt(e)){let n=e[Ia],r=n?n.indexOf(this):-1;r>-1&&(Zl(e,r),ma(n,r))}this._attachedToViewContainer=!1}n_(this._lView[J],this._lView)}onDestroy(e){Iv(this._lView,e)}markForCheck(){Yd(this._cdRefInjectingView||this._lView)}detach(){this._lView[$]&=-129}reattach(){ql(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,D_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,e_(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e,ql(this._lView)}},Ya=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vA;let t=e;return t})(),mA=Ya,yA=class extends mA{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=iA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new nr(i)}};function vA(){return _A(ot(),ue())}function _A(t,e){return t.type&4?new yA(e,t,Ga(t,e)):null}var fj=new RegExp(`^(\\d+)*(${YC}|${QC})*(.*)`);var IA=()=>null;function Dy(t,e){return IA(t,e)}var rd=class{},id=class{},xa=class{};function wA(t){let e=Error(`No component factory found for ${Qe(t)}.`);return e[EA]=t,e}var EA="ngComponent";var sd=class{resolveComponentFactory(e){throw wA(e)}},Ja=(()=>{let e=class e{};e.NULL=new sd;let t=e;return t})(),od=class{},Jt=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>DA();let t=e;return t})();function DA(){let t=ue(),e=ot(),n=wn(e.index,t);return(Wn(n)?n:t)[De]}var TA=(()=>{let e=class e{};e.\u0275prov=ge({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Sl={};var Ty=new Set;function A_(t){Ty.has(t)||(Ty.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function by(...t){}function bA(){let t=typeof At.requestAnimationFrame=="function",e=At[t?"requestAnimationFrame":"setTimeout"],n=At[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var xe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new st(!1),this.onMicrotaskEmpty=new st(!1),this.onStable=new st(!1),this.onError=new st(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=bA().nativeRequestAnimationFrame,SA(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new te(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,CA,by,by);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},CA={};function Jd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function AA(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(At,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ad(t),t.isCheckStableRunning=!0,Jd(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ad(t))}function SA(t){let e=()=>{AA(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,c)=>{if(NA(c))return n.invokeTask(i,s,o,c);try{return Cy(t),n.invokeTask(i,s,o,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Ay(t)}},onInvoke:(n,r,i,s,o,c,u)=>{try{return Cy(t),n.invoke(i,s,o,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ay(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,ad(t),Jd(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function ad(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Cy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ay(t){t._nesting--,Jd(t)}function NA(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var S_=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ge({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function cd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=ty(i,c);else if(s==2){let u=c,d=e[++o];r=ty(r,u+": "+d+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ra=class extends Ja{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Yn(e);return new ms(n,this.ngModule)}};function Sy(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function MA(t){let e=t.toLowerCase();return e==="svg"?Xb:e==="math"?eC:null}var ud=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ua(r);let i=this.injector.get(e,Sl,r);return i!==Sl||n===Sl?i:this.parentInjector.get(e,n,r)}},ms=class extends xa{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Sy(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Sy(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Mb(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=oe(null);try{i=i||this.ngModule;let o=i instanceof vn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new ud(e,o):e,u=c.get(od,null);if(u===null)throw new te(407,!1);let d=c.get(TA,null),f=c.get(S_,null),p=c.get(rd,null),y={rendererFactory:u,sanitizer:d,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:p},I=u.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",x=r?x0(I,r,this.componentDef.encapsulation,c):Xv(I,S,MA(S)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let O=null;x!==null&&(O=jd(x,c,!0));let U=zd(0,null,null,1,0,null,null,null,null,null,null),V=Wa(null,U,null,M,null,null,y,I,c,null,O);Pd(V);let W,fe;try{let z=this.componentDef,E,m=null;z.findHostDirectiveDefs?(E=[],m=new Map,z.findHostDirectiveDefs(z,E,m),E.push(z)):E=[z];let v=xA(V,x),w=RA(v,x,z,E,V,y,I);fe=vv(U,xt),x&&kA(I,z,x,r),n!==void 0&&FA(fe,this.ngContentSelectors,n),W=OA(w,z,E,m,V,[VA]),Qd(U,V,null)}finally{Od()}return new ld(this.componentType,W,Ga(fe,V),V,fe)}finally{oe(s)}}},ld=class extends id{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new nr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Kd(s[J],s,i,e,n),this.previousInputValues.set(e,n);let o=wn(this._tNode.index,s);Yd(o)}}get injector(){return new Kn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xA(t,e){let n=t[J],r=xt;return t[r]=e,Ka(n,r,2,"#host",null)}function RA(t,e,n,r,i,s,o){let c=i[J];PA(r,t,e,o);let u=null;e!==null&&(u=jd(e,i[Kr]));let d=s.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let p=Wa(i,p_(n),null,f,i[t.index],t,s,d,null,null,u);return c.firstCreatePass&&ed(c,t,r.length-1),Qa(i,p),i[t.index]=p}function PA(t,e,n,r){for(let i of t)e.mergedAttrs=ls(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(cd(e,e.mergedAttrs,!0),n!==null&&o_(r,n,e))}function OA(t,e,n,r,i,s){let o=ot(),c=i[J],u=ht(o,i);m_(c,i,o,n,null,r);for(let f=0;f<n.length;f++){let p=o.directiveStart+f,y=Yr(i,c,p,o);tr(y,i)}y_(c,i,o),u&&tr(u,i);let d=Yr(i,c,o.directiveStart+o.componentOffset,o);if(t[Et]=i[Et]=d,s!==null)for(let f of s)f(d,e);return d_(c,o,i),d}function kA(t,e,n,r){if(r)Ul(t,n,["ng-version","17.3.10"]);else{let{attrs:i,classes:s}=xb(e.selectors[0]);i&&Ul(t,n,i),s&&s.length>0&&s_(t,n,s.join(" "))}}function FA(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function VA(){let t=ot();Vd(ue()[J],t)}var Za=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=LA;let t=e;return t})();function LA(){let t=ot();return jA(t,ue())}var UA=Za,N_=class extends UA{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ga(this._hostTNode,this._hostLView)}get injector(){return new Kn(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ld(this._hostTNode,this._hostLView);if(Pv(e)){let n=Ta(e,this._hostLView),r=Da(e),i=n[J].data[r+8];return new Kn(i,n)}else return new Kn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Ny(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-dt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Dy(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,Ey(this._hostTNode,o)),c}createComponent(e,n,r,i,s){let o=e&&!Kb(e),c;if(o)c=n;else{let S=n||{};c=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}let u=o?e:new ms(Yn(e)),d=r||this.parentInjector;if(!s&&u.ngModule==null){let x=(o?d:this.parentInjector).get(vn,null);x&&(s=x)}let f=Yn(u.componentType??{}),p=Dy(this._lContainer,f?.id??null),y=p?.firstChild??null,I=u.create(d,i,y,s);return this.insertImpl(I.hostView,c,Ey(this._hostTNode,p)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(iC(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[je],d=new N_(u,u[Tt],u[je]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return sA(o,i,s,r),e.attachToViewContainerRef(),Ky(Nl(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Ny(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Zl(this._lContainer,n);r&&(ma(Nl(this._lContainer),n),n_(r[J],r))}detach(e){let n=this._adjustIndex(e,-1),r=Zl(this._lContainer,n);return r&&ma(Nl(this._lContainer),n)!=null?new nr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Ny(t){return t[Ia]}function Nl(t){return t[Ia]||(t[Ia]=[])}function jA(t,e){let n,r=e[t.index];return Qt(r)?n=r:(n=v_(r,e,null,t),e[t.index]=n,Qa(e,n)),$A(n,e,t,r),new N_(n,t,e)}function BA(t,e){let n=t[De],r=n.createComment(""),i=ht(e,t),s=Hd(n,i);return Na(n,s,r,_0(n,i),!1),r}var $A=GA,HA=()=>!1;function qA(t,e,n){return HA(t,e,n)}function GA(t,e,n,r){if(t[Zn])return;let i;n.type&8?i=Rt(r):i=BA(e,n),t[Zn]=i}function zA(t){return typeof t=="function"&&t[Zu]!==void 0}function M_(t){return zA(t)&&typeof t.set=="function"}function WA(t){return Object.getPrototypeOf(t.prototype).constructor}function Be(t){let e=WA(t.type),n=!0,r=[t];for(;e;){let i;if(_n(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=aa(t.inputs),o.inputTransforms=aa(t.inputTransforms),o.declaredInputs=aa(t.declaredInputs),o.outputs=aa(t.outputs);let c=i.hostBindings;c&&ZA(t,c);let u=i.viewQuery,d=i.contentQueries;if(u&&YA(t,u),d&&JA(t,d),KA(t,i),YT(t.outputs,i.outputs),_n(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let c=s[o];c&&c.ngInherit&&c(t),c===Be&&(n=!1)}}e=Object.getPrototypeOf(e)}QA(r)}function KA(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function QA(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ls(i.hostAttrs,n=ls(n,i.hostAttrs))}}function aa(t){return t===zr?{}:t===lt?[]:t}function YA(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function JA(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function ZA(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var In=class{},dd=class{};var hd=class extends In{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ra(this);let i=nv(e);this._bootstrapComponents=Zv(i.bootstrap),this._r3Injector=$v(e,n,[{provide:In,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver},...r],Qe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},fd=class extends dd{constructor(e){super(),this.moduleType=e}create(e){return new hd(this.moduleType,e,[])}};var Pa=class extends In{constructor(e){super(),this.componentFactoryResolver=new Ra(this),this.instance=null;let n=new ds([...e.providers,{provide:In,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver}],e.parent||Sd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function XA(t,e,n=null){return new Pa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var x_=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new rs(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function R_(t){return tS(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function eS(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function tS(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function nS(t,e,n){return t[e]=n}function ri(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function rS(t){return(t.flags&32)===32}function iS(t,e,n,r,i,s,o,c,u){let d=e.consts,f=Ka(e,t,4,o||null,Ea(d,c));g_(e,n,f,Ea(d,u)),Vd(e,f);let p=f.tView=zd(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function sS(t,e,n,r,i,s,o,c){let u=ue(),d=Ye(),f=t+xt,p=d.firstCreatePass?iS(f,d,u,e,n,r,i,s,o):d.data[f];ws(p,!1);let y=oS(d,u,p,t);kd()&&qd(d,u,y,p),tr(y,u);let I=v_(y,u,y,p);return u[f]=I,Qa(u,I),qA(I,p,u),Md(p)&&h_(d,u,p),o!=null&&f_(u,p,c),sS}var oS=aS;function aS(t,e,n,r){return Fd(!0),e[De].createComment("")}function Zd(t,e,n,r){let i=ue(),s=Ha();if(ri(i,s,e)){let o=Ye(),c=qa();K0(c,i,t,e,n,r)}return Zd}function P_(t,e,n,r){return ri(t,Ha(),n)?e+La(n)+r:En}function ca(t,e){return t<<17|e<<2}function rr(t){return t>>17&32767}function cS(t){return(t&2)==2}function uS(t,e){return t&131071|e<<17}function pd(t){return t|2}function Zr(t){return(t&131068)>>2}function Ml(t,e){return t&-131069|e<<2}function lS(t){return(t&1)===1}function gd(t){return t|1}function dS(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,c=rr(o),u=Zr(o);t[r]=n;let d=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||_s(p,f)>0)&&(d=!0)}else f=n;if(i)if(u!==0){let y=rr(t[c+1]);t[r+1]=ca(y,c),y!==0&&(t[y+1]=Ml(t[y+1],r)),t[c+1]=uS(t[c+1],r)}else t[r+1]=ca(c,0),c!==0&&(t[c+1]=Ml(t[c+1],r)),c=r;else t[r+1]=ca(u,0),c===0?c=r:t[u+1]=Ml(t[u+1],r),u=r;d&&(t[r+1]=pd(t[r+1])),My(t,f,r,!0),My(t,f,r,!1),hS(e,f,t,r,s),o=ca(c,u),s?e.classBindings=o:e.styleBindings=o}function hS(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&_s(s,e)>=0&&(n[r+1]=gd(n[r+1]))}function My(t,e,n,r){let i=t[n+1],s=e===null,o=r?rr(i):Zr(i),c=!1;for(;o!==0&&(c===!1||s);){let u=t[o],d=t[o+1];fS(u,e)&&(c=!0,t[o+1]=r?gd(d):pd(d)),o=r?rr(d):Zr(d)}c&&(t[n+1]=r?pd(i):gd(i))}function fS(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?_s(t,e)>=0:!1}function pS(t,e,n){let r=ue(),i=Ha();if(ri(r,i,e)){let s=Ye(),o=qa();Wd(s,o,r,t,e,r[De],n,!1)}return pS}function xy(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Kd(t,n,s[o],o,r)}function Xa(t,e){return gS(t,e,null,!0),Xa}function gS(t,e,n,r){let i=ue(),s=Ye(),o=yC(2);if(s.firstUpdatePass&&yS(s,t,o,r),e!==En&&ri(i,o,e)){let c=s.data[ni()];ES(s,c,i,i[De],t,i[o+1]=DS(e,n),r,o)}}function mS(t,e){return e>=t.expandoStartIndex}function yS(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ni()],o=mS(t,n);TS(s,r)&&e===null&&!o&&(e=!1),e=vS(i,s,e,r),dS(i,s,e,n,o,r)}}function vS(t,e,n,r){let i=wC(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=xl(null,t,e,n,r),n=ys(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=xl(i,t,e,n,r),s===null){let u=_S(t,e,r);u!==void 0&&Array.isArray(u)&&(u=xl(null,t,e,u[1],r),u=ys(u,e.attrs,r),IS(t,e,r,u))}else s=wS(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function _S(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Zr(r)!==0)return t[rr(r)]}function IS(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[rr(i)]=r}function wS(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ys(r,o,n)}return ys(r,e.attrs,n)}function xl(t,e,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=e[c],r=ys(r,s.hostAttrs,i),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ys(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),yb(t,o,n?!0:e[++s]))}return t===void 0?null:t}function ES(t,e,n,r,i,s,o,c){if(!(e.type&3))return;let u=t.data,d=u[c+1],f=lS(d)?Ry(u,e,n,i,Zr(d),o):void 0;if(!Oa(f)){Oa(s)||cS(d)&&(s=Ry(u,null,n,i,c,o));let p=yv(ni(),n);C0(r,o,p,i,s)}}function Ry(t,e,n,r,i,s){let o=e===null,c;for(;i>0;){let u=t[i],d=Array.isArray(u),f=d?u[1]:u,p=f===null,y=n[i+1];y===En&&(y=p?lt:void 0);let I=p?Il(y,r):f===r?y:void 0;if(d&&!Oa(I)&&(I=Il(u,r)),Oa(I)&&(c=I,o))return c;let S=t[i+1];i=o?rr(S):Zr(S)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=Il(u,r))}return c}function Oa(t){return t!==void 0}function DS(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Qe(Bd(t)))),t}function TS(t,e){return(t.flags&(e?8:16))!==0}function bS(t,e,n,r,i,s){let o=e.consts,c=Ea(o,i),u=Ka(e,t,2,r,c);return g_(e,n,u,Ea(o,s)),u.attrs!==null&&cd(u,u.attrs,!1),u.mergedAttrs!==null&&cd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function O_(t,e,n,r){let i=ue(),s=Ye(),o=xt+t,c=i[De],u=s.firstCreatePass?bS(o,s,i,e,n,r):s.data[o],d=AS(s,i,u,c,e,t);i[o]=d;let f=Md(u);return ws(u,!0),o_(c,d,u),!rS(u)&&kd()&&qd(s,i,d,u),cC()===0&&tr(d,i),uC(),f&&(h_(s,i,u),d_(s,u,i)),r!==null&&f_(i,u),O_}function k_(){let t=ot();Dv()?gC():(t=t.parent,ws(t,!1));let e=t;hC(e)&&fC(),lC();let n=Ye();return n.firstCreatePass&&(Vd(n,t),hv(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&SC(e)&&xy(n,e,ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&NC(e)&&xy(n,e,ue(),e.stylesWithoutHost,!1),k_}function CS(t,e,n,r){return O_(t,e,n,r),k_(),CS}var AS=(t,e,n,r,i,s)=>(Fd(!0),Xv(r,i,TC()));function gj(){return ue()}var zn=void 0;function SS(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var NS=["en",[["a","p"],["AM","PM"],zn],[["AM","PM"],zn,zn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zn,"{1} 'at' {0}",zn],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",SS],Rl={};function ec(t){let e=MS(t),n=Py(e);if(n)return n;let r=e.split("-")[0];if(n=Py(r),n)return n;if(r==="en")return NS;throw new te(701,!1)}function Py(t){return t in Rl||(Rl[t]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[t]),Rl[t]}var ar=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ar||{});function MS(t){return t.toLowerCase().replace(/_/g,"-")}var ka="en-US",xS="USD";var RS=ka;function PS(t){typeof t=="string"&&(RS=t.toLowerCase().replace(/_/g,"-"))}function Ot(t,e,n,r){let i=ue(),s=Ye(),o=ot();return F_(s,i,i[De],o,t,e,r),Ot}function OS(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[hs],u=i[s+2];return c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function F_(t,e,n,r,i,s,o){let c=Md(r),d=t.firstCreatePass&&X0(t),f=e[Et],p=Z0(e),y=!0;if(r.type&3||o){let x=ht(r,e),M=o?o(x):x,O=p.length,U=o?W=>o(Rt(W[r.index])):r.index,V=null;if(!o&&c&&(V=OS(t,e,i,r.index)),V!==null){let W=V.__ngLastListenerFn__||V;W.__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,y=!1}else{s=ky(r,e,f,s,!1);let W=n.listen(M,i,s);p.push(s,W),d&&d.push(i,U,O,O+1)}}else s=ky(r,e,f,s,!1);let I=r.outputs,S;if(y&&I!==null&&(S=I[i])){let x=S.length;if(x)for(let M=0;M<x;M+=2){let O=S[M],U=S[M+1],fe=e[O][U].subscribe(s),z=p.length;p.push(s,fe),d&&d.push(i,r.index,z,-(z+1))}}}function Oy(t,e,n,r){let i=oe(null);try{return St(6,e,n),n(r)!==!1}catch(s){return I_(t,s),!1}finally{St(7,e,n),oe(i)}}function ky(t,e,n,r,i){return function s(o){if(o===Function)return r;let c=t.componentOffset>-1?wn(t.index,e):e;Yd(c);let u=Oy(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)u=Oy(e,n,d,o)&&u,d=d.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function mj(t=1){return DC(t)}function kS(t,e,n){return V_(t,"",e,"",n),kS}function V_(t,e,n,r,i){let s=ue(),o=P_(s,e,n,r);if(o!==En){let c=Ye(),u=qa();Wd(c,u,s,t,o,s[De],i,!1)}return V_}function FS(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function yj(t,e=""){let n=ue(),r=Ye(),i=t+xt,s=r.firstCreatePass?Ka(r,i,1,e,null):r.data[i],o=VS(r,n,s,e,t);n[i]=o,kd()&&qd(r,n,o,s),ws(s,!1)}var VS=(t,e,n,r,i)=>(Fd(!0),a0(e[De],r));function LS(t){return L_("",t,""),LS}function L_(t,e,n){let r=ue(),i=P_(r,t,e,n);return i!==En&&eA(r,ni(),i),L_}function US(t,e,n){M_(e)&&(e=e());let r=ue(),i=Ha();if(ri(r,i,e)){let s=Ye(),o=qa();Wd(s,o,r,t,e,r[De],n,!1)}return US}function vj(t,e){let n=M_(t);return n&&t.set(e),n}function jS(t,e){let n=ue(),r=Ye(),i=ot();return F_(r,n,n[De],i,t,e),jS}function BS(t,e,n){let r=Ye();if(r.firstCreatePass){let i=_n(t);md(n,r.data,r.blueprint,i,!0),md(e,r.data,r.blueprint,i,!1)}}function md(t,e,n,r,i){if(t=Ke(t),Array.isArray(t))for(let s=0;s<t.length;s++)md(t[s],e,n,r,i);else{let s=Ye(),o=ue(),c=ot(),u=Wr(t)?t:Ke(t.provide),d=uv(t),f=c.providerIndexes&1048575,p=c.directiveStart,y=c.providerIndexes>>20;if(Wr(t)||!t.multi){let I=new er(d,i,j),S=Ol(u,e,i?f:f+y,p);S===-1?(Wl(Ca(c,o),s,u),Pl(s,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(I),o.push(I)):(n[S]=I,o[S]=I)}else{let I=Ol(u,e,f+y,p),S=Ol(u,e,f,f+y),x=I>=0&&n[I],M=S>=0&&n[S];if(i&&!M||!i&&!x){Wl(Ca(c,o),s,u);let O=qS(i?HS:$S,n.length,i,r,d);!i&&M&&(n[S].providerFactory=O),Pl(s,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(O),o.push(O)}else{let O=U_(n[i?S:I],d,!i&&r);Pl(s,t,I>-1?I:S,O)}!i&&r&&M&&n[S].componentProviders++}}}function Pl(t,e,n,r){let i=Wr(e),s=jb(e);if(i||s){let u=(s?Ke(e.useClass):e).prototype.ngOnDestroy;if(u){let d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=d.indexOf(n);f===-1?d.push(n,[r,u]):d[f+1].push(r,u)}else d.push(n,u)}}}function U_(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ol(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function $S(t,e,n,r){return yd(this.multi,[])}function HS(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,c=Yr(n,n[J],this.providerFactory.index,r);s=c.slice(0,o),yd(i,s);for(let u=o;u<c.length;u++)s.push(c[u])}else s=[],yd(i,s);return s}function yd(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function qS(t,e,n,r,i){let s=new er(t,n,j);return s.multi=[],s.index=e,s.componentProviders=0,U_(s,i,r&&!n),s}function ft(t,e=[]){return n=>{n.providersResolver=(r,i)=>BS(r,i?i(t):t,e)}}var GS=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=sv(!1,r.type),s=i.length>0?XA([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ge({token:e,providedIn:"environment",factory:()=>new e(Ue(vn))});let t=e;return t})();function _j(t){A_("NgStandalone"),t.getStandaloneInjector=e=>e.get(GS).getOrCreateStandaloneInjector(t)}function Ij(t,e,n,r){return j_(ue(),Tv(),t,e,n,r)}function zS(t,e){let n=t[e];return n===En?void 0:n}function j_(t,e,n,r,i,s){let o=e+n;return ri(t,o,i)?nS(t,o+1,s?r.call(s,i):r(i)):zS(t,o+1)}function wj(t,e){let n=Ye(),r,i=t+xt;n.firstCreatePass?(r=WS(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Qn(r.type,!0)),o,c=et(j);try{let u=ba(!1),d=s();return ba(u),FS(n,ue(),i,d),d}finally{et(c)}}function WS(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Ej(t,e,n){let r=t+xt,i=ue(),s=rC(i,r);return KS(i,r)?j_(i,Tv(),e,s.transform,n,s):s.transform(n)}function KS(t,e){return t[J].data[e].pure}var ir=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},B_=new ir("17.3.10"),Dj=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var QS=new re("");function Es(t){return!!t&&typeof t.then=="function"}function $_(t){return!!t&&typeof t.subscribe=="function"}var YS=new re(""),H_=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=ye(YS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Es(o))r.push(o);else if($_(o)){let c=new Promise((u,d)=>{o.subscribe({complete:u,error:d})});r.push(c)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),JS=new re("");function ZS(){Tm(()=>{throw new te(600,!1)})}function XS(t){return t.isBoundToModule}function eN(t,e,n){try{let r=n();return Es(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var q_=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ye(Hv),this.afterRenderEffectManager=ye(S_),this.externalTestViews=new Set,this.beforeRender=new hn,this.afterTick=new hn,this.componentTypes=[],this.components=[],this.isStable=ye(x_).hasPendingTasks.pipe(We(r=>!r)),this._injector=ye(vn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof xa;if(!this._injector.get(H_).done){let I=!s&&Ob(r),S=!1;throw new te(405,S)}let c;s?c=r:c=this._injector.get(Ja).resolveComponentFactory(r),this.componentTypes.push(c.componentType);let u=XS(c)?void 0:this._injector.get(In),d=i||c.selector,f=c.create(Yt.NULL,[],d,u),p=f.location.nativeElement,y=f.injector.get(QS,null);return y?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),kl(this.components,f),y?.unregisterApplication(p)}),this._loadComponent(f),f}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new te(101,!1);let i=oe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,oe(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===E_)throw new te(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:c,notifyErrorHandler:u}of this._views)tN(c,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>vd(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>vd(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;kl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(JS,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>kl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new te(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function tN(t,e,n){!e&&!vd(t)||nN(t,n,e)}function vd(t){return Rd(t)}function nN(t,e,n){let r;n?(r=0,t[$]|=1024):t[$]&64?r=0:r=1,D_(t,e,r)}var _d=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Tj=(()=>{let e=class e{compileModuleSync(r){return new fd(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=nv(r),o=Zv(s.declarations).reduce((c,u)=>{let d=Yn(u);return d&&c.push(new ms(d)),c},[]);return new _d(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rN=(()=>{let e=class e{constructor(){this.zone=ye(xe),this.applicationRef=ye(q_)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iN(t){return[{provide:xe,useFactory:t},{provide:ya,multi:!0,useFactory:()=>{let e=ye(rN,{optional:!0});return()=>e.initialize()}},{provide:ya,multi:!0,useFactory:()=>{let e=ye(cN);return()=>{e.initialize()}}},{provide:Hv,useFactory:sN}]}function sN(){let t=ye(xe),e=ye(Jr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function oN(t){let e=iN(()=>new xe(aN(t)));return Is([[],e])}function aN(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var cN=(()=>{let e=class e{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=ye(xe),this.pendingTasks=ye(x_)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uN(){return typeof $localize<"u"&&$localize.locale||ka}var tc=new re("",{providedIn:"root",factory:()=>ye(tc,ee.Optional|ee.SkipSelf)||uN()}),G_=new re("",{providedIn:"root",factory:()=>xS});var z_=new re("");var fa=null;function lN(t=[],e){return Yt.create({name:e,providers:[{provide:cv,useValue:"platform"},{provide:z_,useValue:new Set([()=>fa=null])},...t]})}function dN(t=[]){if(fa)return fa;let e=lN(t);return fa=e,ZS(),hN(e),e}function hN(t){t.get(KC,null)?.forEach(n=>n())}var nc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=fN;let t=e;return t})();function fN(t){return pN(ot(),ue(),(t&16)===16)}function pN(t,e,n){if($a(t)&&!n){let r=wn(t.index,e);return new nr(r,r)}else if(t.type&47){let r=e[Mt];return new nr(r,e)}return null}var Id=class{constructor(){}supports(e){return R_(e)}create(e){return new wd(e)}},gN=(t,e)=>e,wd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||gN}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<Fy(r,i,s)?n:r,c=Fy(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let d=c-i,f=u-i;if(d!=f){for(let y=0;y<d;y++){let I=y<s.length?s[y]:s[y]=0,S=I+y;f<=S&&S<d&&(s[y]=I+1)}let p=o.previousIndex;s[p]=f-d}}c!==u&&e(o,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!R_(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],o=this._trackByFn(c,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,c),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,c)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,eS(e,c=>{o=this._trackByFn(i,c),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,c,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,o,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Ed(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Fa),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Fa),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ed=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Dd=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Fa=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Dd,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Fy(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Vy(){return new Xd([new Id])}var Xd=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Vy()),deps:[[e,new gb,new Wt]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new te(901,!1)}};e.\u0275prov=ge({token:e,providedIn:"root",factory:Vy});let t=e;return t})();function bj(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=dN(r),s=[oN(),...n||[]],c=new Pa({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(xe);return u.run(()=>{c.resolveInjectorInitializers();let d=c.get(Jr,null),f;u.runOutsideAngular(()=>{f=u.onError.subscribe({next:I=>{d.handleError(I)}})});let p=()=>c.destroy(),y=i.get(z_);return y.add(p),c.onDestroy(()=>{f.unsubscribe(),y.delete(p)}),eN(d,u,()=>{let I=c.get(H_);return I.runInitializers(),I.donePromise.then(()=>{let S=c.get(tc,ka);PS(S||ka);let x=c.get(q_);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function rc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var nI=null;function ii(){return nI}function Qj(t){nI??=t}var W_=class{};var rI=new re(""),iI=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:()=>ye(mN),providedIn:"platform"});let t=e;return t})();var mN=(()=>{let e=class e extends iI{constructor(){super(),this._doc=ye(rI),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ii().getBaseHref(this._doc)}onPopState(r){let i=ii().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ii().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function sI(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function K_(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function cr(t){return t&&t[0]!=="?"?"?"+t:t}var oh=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:()=>ye(vN),providedIn:"root"});let t=e;return t})(),yN=new re(""),vN=(()=>{let e=class e extends oh{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ye(rI).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return sI(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+cr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let c=this.prepareExternalUrl(s+cr(o));this._platformLocation.pushState(r,i,c)}replaceState(r,i,s,o){let c=this.prepareExternalUrl(s+cr(o));this._platformLocation.replaceState(r,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Ue(iI),Ue(yN,8))},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _N=(()=>{let e=class e{constructor(r){this._subject=new st,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=EN(K_(Q_(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+cr(i))}normalize(r){return e.stripTrailingSlash(wN(this._basePath,Q_(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+cr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+cr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=cr,e.joinWithSlash=sI,e.stripTrailingSlash=K_,e.\u0275fac=function(i){return new(i||e)(Ue(oh))},e.\u0275prov=ge({token:e,factory:()=>IN(),providedIn:"root"});let t=e;return t})();function IN(){return new _N(Ue(oh))}function wN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Q_(t){return t.replace(/\/index.html$/,"")}function EN(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var oI={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},aI=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(aI||{});var Zt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ds(t,e){let n=ec(t),r=n[ar.NumberSymbols][e];if(typeof r>"u"){if(e===Zt.CurrencyDecimal)return n[ar.NumberSymbols][Zt.Decimal];if(e===Zt.CurrencyGroup)return n[ar.NumberSymbols][Zt.Group]}return r}function DN(t,e){return ec(t)[ar.NumberFormats][e]}function TN(t){return ec(t)[ar.Currencies]}function bN(t,e,n="en"){let r=TN(n)[t]||oI[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var CN=2;function AN(t){let e,n=oI[t];return n&&(e=n[2]),typeof e=="number"?e:CN}var SN=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Y_=22,ic=".",Ts="0",NN=";",MN=",",th="#",J_="\xA4";function xN(t,e,n,r,i,s,o=!1){let c="",u=!1;if(!isFinite(t))c=Ds(n,Zt.Infinity);else{let d=kN(t);o&&(d=ON(d));let f=e.minInt,p=e.minFrac,y=e.maxFrac;if(s){let U=s.match(SN);if(U===null)throw new Error(`${s} is not a valid digit info`);let V=U[1],W=U[3],fe=U[5];V!=null&&(f=nh(V)),W!=null&&(p=nh(W)),fe!=null?y=nh(fe):W!=null&&p>y&&(y=p)}FN(d,p,y);let I=d.digits,S=d.integerLen,x=d.exponent,M=[];for(u=I.every(U=>!U);S<f;S++)I.unshift(0);for(;S<0;S++)I.unshift(0);S>0?M=I.splice(S,I.length):(M=I,I=[0]);let O=[];for(I.length>=e.lgSize&&O.unshift(I.splice(-e.lgSize,I.length).join(""));I.length>e.gSize;)O.unshift(I.splice(-e.gSize,I.length).join(""));I.length&&O.unshift(I.join("")),c=O.join(Ds(n,r)),M.length&&(c+=Ds(n,i)+M.join("")),x&&(c+=Ds(n,Zt.Exponential)+"+"+x)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function RN(t,e,n,r,i){let s=DN(e,aI.Currency),o=PN(s,Ds(e,Zt.MinusSign));return o.minFrac=AN(r),o.maxFrac=o.minFrac,xN(t,o,e,Zt.CurrencyGroup,Zt.CurrencyDecimal,i).replace(J_,n).replace(J_,"").trim()}function PN(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(NN),i=r[0],s=r[1],o=i.indexOf(ic)!==-1?i.split(ic):[i.substring(0,i.lastIndexOf(Ts)+1),i.substring(i.lastIndexOf(Ts)+1)],c=o[0],u=o[1]||"";n.posPre=c.substring(0,c.indexOf(th));for(let f=0;f<u.length;f++){let p=u.charAt(f);p===Ts?n.minFrac=n.maxFrac=f+1:p===th?n.maxFrac=f+1:n.posSuf+=p}let d=c.split(MN);if(n.gSize=d[1]?d[1].length:0,n.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,s){let f=i.length-n.posPre.length-n.posSuf.length,p=s.indexOf(th);n.negPre=s.substring(0,p).replace(/'/g,""),n.negSuf=s.slice(p+f).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function ON(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function kN(t){let e=Math.abs(t)+"",n=0,r,i,s,o,c;for((i=e.indexOf(ic))>-1&&(e=e.replace(ic,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Ts;s++);if(s===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===Ts;)c--;for(i-=s,r=[],o=0;s<=c;s++,o++)r[o]=Number(e.charAt(s))}return i>Y_&&(r=r.splice(0,Y_-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function FN(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,s=Math.min(Math.max(e,i),n),o=s+t.integerLen,c=r[o];if(o>0){r.splice(Math.max(t.integerLen,o));for(let p=o;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let p=1;p<o;p++)r[p]=0}if(c>=5)if(o-1<0){for(let p=0;p>o;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=s!==0,d=e+t.integerLen,f=r.reduceRight(function(p,y,I,S){return y=y+p,S[I]=y<10?y:y-10,u&&(S[I]===0&&I>=d?S.pop():u=!1),y>=10?1:0},0);f&&(r.unshift(f),t.integerLen++)}function nh(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function Yj(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var rh=/\s+/,Z_=[],Jj=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Z_,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(rh):Z_}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(rh):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(rh).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(j(Pt),j(Jt))},e.\u0275dir=me({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Re.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var ih=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zj=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,c)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new ih(s.item,this._ngForOf,-1,-1),c===null?void 0:c);else if(c==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,c),X_(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);X_(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(j(Za),j(Ya),j(Xd))},e.\u0275dir=me({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function X_(t,e){t.context.$implicit=e.item}var Xj=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new sh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){eI("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){eI("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(j(Za),j(Ya))},e.\u0275dir=me({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),sh=class{constructor(){this.$implicit=null,this.ngIf=null}};function eI(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Qe(e)}'.`)}function VN(t,e){return new te(2100,!1)}var eB=(()=>{let e=class e{constructor(r,i="USD"){this._locale=r,this._defaultCurrencyCode=i}transform(r,i=this._defaultCurrencyCode,s="symbol",o,c){if(!LN(r))return null;c||=this._locale,typeof s=="boolean"&&(s=s?"symbol":"code");let u=i||this._defaultCurrencyCode;s!=="code"&&(s==="symbol"||s==="symbol-narrow"?u=bN(u,s==="symbol"?"wide":"narrow",c):u=s);try{let d=UN(r);return RN(d,c,u,i,o)}catch(d){throw VN(e,d.message)}}};e.\u0275fac=function(i){return new(i||e)(j(tc,16),j(G_,16))},e.\u0275pipe=Xy({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function LN(t){return!(t==null||t===""||t!==t)}function UN(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var tB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Xr({});let t=e;return t})(),nB="browser",jN="server";function rB(t){return t===jN}var tI=class{};var vI=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(j(Jt),j(Pt))},e.\u0275dir=me({type:e});let t=e;return t})(),ci=(()=>{let e=class e extends vI{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=or(e)))(s||e)}})(),e.\u0275dir=me({type:e,features:[Be]});let t=e;return t})(),bn=new re(""),BN={provide:bn,useExisting:tt(()=>$N),multi:!0},$N=(()=>{let e=class e extends ci{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=or(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,s){i&1&&Ot("change",function(c){return s.onChange(c.target.checked)})("blur",function(){return s.onTouched()})},features:[ft([BN]),Be]});let t=e;return t})(),HN={provide:bn,useExisting:tt(()=>_I),multi:!0};function qN(){let t=ii()?ii().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var GN=new re(""),_I=(()=>{let e=class e extends vI{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!qN())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(j(Jt),j(Pt),j(GN,8))},e.\u0275dir=me({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ot("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[ft([HN]),Be]});let t=e;return t})();function Dn(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function II(t){return t!=null&&typeof t.length=="number"}var Ns=new re(""),fc=new re(""),zN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,cI=class{static min(e){return WN(e)}static max(e){return KN(e)}static required(e){return wI(e)}static requiredTrue(e){return QN(e)}static email(e){return YN(e)}static minLength(e){return JN(e)}static maxLength(e){return ZN(e)}static pattern(e){return XN(e)}static nullValidator(e){return oc(e)}static compose(e){return AI(e)}static composeAsync(e){return SI(e)}};function WN(t){return e=>{if(Dn(e.value)||Dn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function KN(t){return e=>{if(Dn(e.value)||Dn(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function wI(t){return Dn(t.value)?{required:!0}:null}function QN(t){return t.value===!0?null:{required:!0}}function YN(t){return Dn(t.value)||zN.test(t.value)?null:{email:!0}}function JN(t){return e=>Dn(e.value)||!II(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function ZN(t){return e=>II(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function XN(t){if(!t)return oc;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Dn(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function oc(t){return null}function EI(t){return t!=null}function DI(t){return Es(t)?_t(t):t}function TI(t){let e={};return t.forEach(n=>{e=n!=null?Le(Le({},e),n):e}),Object.keys(e).length===0?null:e}function bI(t,e){return e.map(n=>n(t))}function eM(t){return!t.validate}function CI(t){return t.map(e=>eM(e)?e:n=>e.validate(n))}function AI(t){if(!t)return null;let e=t.filter(EI);return e.length==0?null:function(n){return TI(bI(n,e))}}function lh(t){return t!=null?AI(CI(t)):null}function SI(t){if(!t)return null;let e=t.filter(EI);return e.length==0?null:function(n){let r=bI(n,e).map(DI);return ml(r).pipe(We(TI))}}function dh(t){return t!=null?SI(CI(t)):null}function uI(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function NI(t){return t._rawValidators}function MI(t){return t._rawAsyncValidators}function ah(t){return t?Array.isArray(t)?t:[t]:[]}function ac(t,e){return Array.isArray(t)?t.includes(e):t===e}function lI(t,e){let n=ah(e);return ah(t).forEach(i=>{ac(n,i)||n.push(i)}),n}function dI(t,e){return ah(e).filter(n=>!ac(t,n))}var cc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Xt=class extends cc{get formDirective(){return null}get path(){return null}},Tn=class extends cc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},uc=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},tM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},wB=Ze(Le({},tM),{"[class.ng-submitted]":"isSubmitted"}),EB=(()=>{let e=class e extends uc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(j(Tn,2))},e.\u0275dir=me({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Xa("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Be]});let t=e;return t})(),DB=(()=>{let e=class e extends uc{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(j(Xt,10))},e.\u0275dir=me({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Xa("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Be]});let t=e;return t})();var bs="VALID",sc="INVALID",si="PENDING",Cs="DISABLED";function hh(t){return(pc(t)?t.validators:t)||null}function nM(t){return Array.isArray(t)?lh(t):t||null}function fh(t,e){return(pc(e)?e.asyncValidators:t)||null}function rM(t){return Array.isArray(t)?dh(t):t||null}function pc(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function xI(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[n])throw new te(1001,"")}function RI(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new te(1002,"")})}var oi=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===bs}get invalid(){return this.status===sc}get pending(){return this.status==si}get disabled(){return this.status===Cs}get enabled(){return this.status!==Cs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dI(e,this._rawAsyncValidators))}hasValidator(e){return ac(this._rawValidators,e)}hasAsyncValidator(e){return ac(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=si,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Cs,this.errors=null,this._forEachChild(r=>{r.disable(Ze(Le({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ze(Le({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=bs,this._forEachChild(r=>{r.enable(Ze(Le({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ze(Le({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bs||this.status===si)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cs:bs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=si,this._hasOwnPendingAsyncValidator=!0;let n=DI(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new st,this.statusChanges=new st}_calculateStatus(){return this._allControlsDisabled()?Cs:this.errors?sc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(si)?si:this._anyControlsHaveStatus(sc)?sc:bs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=nM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rM(this._rawAsyncValidators)}},ai=class extends oi{constructor(e,n,r){super(hh(n),fh(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){RI(this,!0,e),Object.keys(e).forEach(r=>{xI(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ch=class extends ai{};var ui=new re("CallSetDisabledState",{providedIn:"root",factory:()=>Ms}),Ms="always";function PI(t,e){return[...e.path,t]}function lc(t,e,n=Ms){ph(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),sM(t,e),aM(t,e),oM(t,e),iM(t,e)}function hI(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),hc(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function dc(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function iM(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function ph(t,e){let n=NI(t);e.validator!==null?t.setValidators(uI(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=MI(t);e.asyncValidator!==null?t.setAsyncValidators(uI(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();dc(e._rawValidators,i),dc(e._rawAsyncValidators,i)}function hc(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=NI(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=MI(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return dc(e._rawValidators,r),dc(e._rawAsyncValidators,r),n}function sM(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&OI(t,e)})}function oM(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&OI(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function OI(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function aM(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function kI(t,e){t==null,ph(t,e)}function cM(t,e){return hc(t,e)}function FI(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function uM(t){return Object.getPrototypeOf(t.constructor)===ci}function VI(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function LI(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===_I?n=s:uM(s)?r=s:i=s}),i||r||n||null}function lM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var dM={provide:Xt,useExisting:tt(()=>hM)},As=Promise.resolve(),hM=(()=>{let e=class e extends Xt{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new st,this.form=new ai({},lh(r),dh(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){As.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),lc(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){As.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){As.then(()=>{let i=this._findContainer(r.path),s=new ai({});kI(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){As.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){As.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,VI(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(j(Ns,10),j(fc,10),j(ui,8))},e.\u0275dir=me({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Ot("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:[Re.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ft([dM]),Be]});let t=e;return t})();function fI(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function pI(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Ss=class extends oi{constructor(e=null,n,r){super(hh(n),fh(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(pI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){pI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var fM=t=>t instanceof Ss;var pM={provide:Tn,useExisting:tt(()=>gM)},gI=Promise.resolve(),gM=(()=>{let e=class e extends Tn{constructor(r,i,s,o,c,u){super(),this._changeDetectorRef=c,this.callSetDisabledState=u,this.control=new Ss,this._registered=!1,this.name="",this.update=new st,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=LI(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),FI(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){lc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){gI.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&rc(i);gI.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?PI(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(j(Xt,9),j(Ns,10),j(fc,10),j(bn,10),j(nc,8),j(ui,8))},e.\u0275dir=me({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Re.None,"disabled","isDisabled"],model:[Re.None,"ngModel","model"],options:[Re.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ft([pM]),Be,sr]});let t=e;return t})(),bB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=me({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),mM={provide:bn,useExisting:tt(()=>yM),multi:!0},yM=(()=>{let e=class e extends ci{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=or(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Ot("input",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},features:[ft([mM]),Be]});let t=e;return t})(),vM={provide:bn,useExisting:tt(()=>IM),multi:!0};var _M=(()=>{let e=class e{constructor(){this._accessors=[]}add(r,i){this._accessors.push([r,i])}remove(r){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===r){this._accessors.splice(i,1);return}}select(r){this._accessors.forEach(i=>{this._isSameGroup(i,r)&&i[1]!==r&&i[1].fireUncheck(r.value)})}_isSameGroup(r,i){return r[0].control?r[0]._parent===i._control._parent&&r[1].name===i.name:!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),IM=(()=>{let e=class e extends ci{constructor(r,i,s,o){super(r,i),this._registry=s,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=ye(ui,{optional:!0})??Ms}ngOnInit(){this._control=this._injector.get(Tn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(r){this._state=r===this.value,this.setProperty("checked",this._state)}registerOnChange(r){this._fn=r,this.onChange=()=>{r(this.value),this._registry.select(this)}}setDisabledState(r){(this.setDisabledStateFired||r||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",r),this.setDisabledStateFired=!0}fireUncheck(r){this.writeValue(r)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(i){return new(i||e)(j(Jt),j(Pt),j(_M),j(Yt))},e.\u0275dir=me({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,s){i&1&&Ot("change",function(){return s.onChange()})("blur",function(){return s.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ft([vM]),Be]});let t=e;return t})();var UI=new re("");var wM={provide:Xt,useExisting:tt(()=>EM)},EM=(()=>{let e=class e extends Xt{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new st,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return lc(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){hI(r.control||null,r,!1),lM(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,VI(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(hI(i||null,r),fM(s)&&(lc(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);kI(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&cM(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ph(this.form,this),this._oldForm&&hc(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(j(Ns,10),j(fc,10),j(ui,8))},e.\u0275dir=me({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Ot("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{form:[Re.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ft([wM]),Be,sr]});let t=e;return t})();var DM={provide:Tn,useExisting:tt(()=>TM)},TM=(()=>{let e=class e extends Tn{set isDisabled(r){}constructor(r,i,s,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new st,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=LI(this,o)}ngOnChanges(r){this._added||this._setUpControl(),FI(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return PI(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(j(Xt,13),j(Ns,10),j(fc,10),j(bn,10),j(UI,8))},e.\u0275dir=me({type:e,selectors:[["","formControlName",""]],inputs:{name:[Re.None,"formControlName","name"],isDisabled:[Re.None,"disabled","isDisabled"],model:[Re.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[ft([DM]),Be,sr]});let t=e;return t})(),bM={provide:bn,useExisting:tt(()=>BI),multi:!0};function jI(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function CM(t){return t.split(":")[0]}var BI=(()=>{let e=class e extends ci{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=jI(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=CM(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=or(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Ot("change",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[ft([bM]),Be]});let t=e;return t})(),CB=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(jI(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(j(Pt),j(Jt),j(BI,9))},e.\u0275dir=me({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),AM={provide:bn,useExisting:tt(()=>$I),multi:!0};function mI(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function SM(t){return t.split(":")[0]}var $I=(()=>{let e=class e extends ci{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,c)=>{o._setSelected(s.indexOf(c.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let c=o;for(let u=0;u<c.length;u++){let d=c[u],f=this._getOptionValue(d.value);s.push(f)}}else{let c=i.options;for(let u=0;u<c.length;u++){let d=c[u];if(d.selected){let f=this._getOptionValue(d.value);s.push(f)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=SM(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=or(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Ot("change",function(c){return s.onChange(c.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[ft([AM]),Be]});let t=e;return t})(),AB=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(mI(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(mI(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(j(Pt),j(Jt),j($I,9))},e.\u0275dir=me({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var NM=(()=>{let e=class e{constructor(){this._validator=oc}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):oc,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=me({type:e,features:[sr]});let t=e;return t})();var MM={provide:Ns,useExisting:tt(()=>xM),multi:!0};var xM=(()=>{let e=class e extends NM{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=rc,this.createValidator=r=>wI}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=or(e)))(s||e)}})(),e.\u0275dir=me({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Zd("required",s._enabled?"":null)},inputs:{required:"required"},features:[ft([MM]),Be]});let t=e;return t})();var HI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Xr({});let t=e;return t})(),uh=class extends oi{constructor(e,n,r){super(hh(n),fh(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){RI(this,!1,e),e.forEach((r,i)=>{xI(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function yI(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var SB=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return yI(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new ai(s,o)}record(r,i=null){let s=this._reduceControls(r);return new ch(s,i)}control(r,i,s){let o={};return this.useNonNullable?(yI(i)?o=i:(o.validators=i,o.asyncValidators=s),new Ss(r,Ze(Le({},o),{nonNullable:!0}))):new Ss(r,i,s)}array(r,i,s){let o=r.map(c=>this._createControl(c));return new uh(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof Ss)return r;if(r instanceof oi)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var NB=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ui,useValue:r.callSetDisabledState??Ms}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Xr({imports:[HI]});let t=e;return t})(),MB=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:UI,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:ui,useValue:r.callSetDisabledState??Ms}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ei({type:e}),e.\u0275inj=Xr({imports:[HI]});let t=e;return t})();var GI=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},RM=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|c>>4,y=(c&15)<<2|d>>6,I=d&63;u||(I=64,o||(y=64)),r.push(n[f],n[p],n[y],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let d=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||p==null)throw new mh;let y=s<<2|c>>4;if(r.push(y),d!==64){let I=c<<4&240|d>>2;if(r.push(I),p!==64){let S=d<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},mh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},PM=function(t){let e=GI(t);return zI.encodeByteArray(e,!0)},xs=function(t){return PM(t).replace(/\./g,"")},vh=function(t){try{return zI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function OM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var kM=()=>OM().__FIREBASE_DEFAULTS__,FM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&vh(t[1]);return e&&JSON.parse(e)},mc=()=>{try{return kM()||FM()||VM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WI=t=>{var e,n;return(n=(e=mc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KI=t=>{let e=WI(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_h=()=>{var t;return(t=mc())===null||t===void 0?void 0:t.config},QI=t=>{var e;return(e=mc())===null||e===void 0?void 0:e[`_${t}`]};var gc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function YI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xs(JSON.stringify(n)),xs(JSON.stringify(o)),""].join(".")}function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function LM(){var t;let e=(t=mc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZI(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ew(){return!LM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ih(){try{return typeof indexedDB=="object"}catch{return!1}}function tw(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var UM="FirebaseError",pt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,en.prototype.create)}},en=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?jM(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new pt(i,c,r)}};function jM(t,e){return t.replace(BM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var BM=/\{\$([^}]+)}/g;function li(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(qI(s)&&qI(o)){if(!li(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function qI(t){return t!==null&&typeof t=="object"}function wh(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nw(t,e){let n=new yh(t,e);return n.subscribe.bind(n)}var yh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$M(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gh),i.error===void 0&&(i.error=gh),i.complete===void 0&&(i.complete=gh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $M(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gh(){}var PB=4*60*60*1e3;function $e(t){return t&&t._delegate?t._delegate:t}var gt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ur="[DEFAULT]";var Eh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new gc;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qM(e))try{this.getOrInitializeService({instanceIdentifier:ur})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return A(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ur){return this.instances.has(e)}getOptions(e=ur){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ur){return this.component?this.component.multipleInstances?e:ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function HM(t){return t===ur?void 0:t}function qM(t){return t.instantiationMode==="EAGER"}var yc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Eh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var GM=[],Z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Z||{}),zM={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},WM=Z.INFO,KM={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},QM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=KM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Cn=class{constructor(e){this.name=e,this._logLevel=WM,this._logHandler=QM,this._userLogHandler=null,GM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var YM=(t,e)=>e.some(n=>t instanceof n),rw,iw;function JM(){return rw||(rw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZM(){return iw||(iw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sw=new WeakMap,Th=new WeakMap,ow=new WeakMap,Dh=new WeakMap,Ch=new WeakMap;function XM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(kt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sw.set(n,t)}).catch(()=>{}),Ch.set(e,t),e}function ex(t){if(Th.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Th.set(t,e)}var bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Th.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ow.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aw(t){bh=t(bh)}function tx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(vc(this),e,...n);return ow.set(r,e.sort?e.sort():[e]),kt(r)}:ZM().includes(t)?function(...e){return t.apply(vc(this),e),kt(sw.get(this))}:function(...e){return kt(t.apply(vc(this),e))}}function nx(t){return typeof t=="function"?tx(t):(t instanceof IDBTransaction&&ex(t),YM(t,JM())?new Proxy(t,bh):t)}function kt(t){if(t instanceof IDBRequest)return XM(t);if(Dh.has(t))return Dh.get(t);let e=nx(t);return e!==t&&(Dh.set(t,e),Ch.set(e,t)),e}var vc=t=>Ch.get(t);function uw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=kt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(kt(o.result),u.oldVersion,u.newVersion,kt(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var rx=["get","getKey","getAll","getAllKeys","count"],ix=["put","add","delete","clear"],Ah=new Map;function cw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ah.get(e))return Ah.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=ix.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rx.includes(n)))return;let s=function(o,...c){return A(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]})};return Ah.set(e,s),s}aw(t=>Ze(Le({},t),{get:(e,n,r)=>cw(e,n)||t.get(e,n,r),has:(e,n)=>!!cw(e,n)||t.has(e,n)}));var Nh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sx(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function sx(t){let e=t.getComponent();return e?.type==="VERSION"}var Mh="@firebase/app",lw="0.10.5";var lr=new Cn("@firebase/app"),ox="@firebase/app-compat",ax="@firebase/analytics-compat",cx="@firebase/analytics",ux="@firebase/app-check-compat",lx="@firebase/app-check",dx="@firebase/auth",hx="@firebase/auth-compat",fx="@firebase/database",px="@firebase/database-compat",gx="@firebase/functions",mx="@firebase/functions-compat",yx="@firebase/installations",vx="@firebase/installations-compat",_x="@firebase/messaging",Ix="@firebase/messaging-compat",wx="@firebase/performance",Ex="@firebase/performance-compat",Dx="@firebase/remote-config",Tx="@firebase/remote-config-compat",bx="@firebase/storage",Cx="@firebase/storage-compat",Ax="@firebase/firestore",Sx="@firebase/vertexai-preview",Nx="@firebase/firestore-compat",Mx="firebase",xx="10.12.2";var xh="[DEFAULT]",Rx={[Mh]:"fire-core",[ox]:"fire-core-compat",[cx]:"fire-analytics",[ax]:"fire-analytics-compat",[lx]:"fire-app-check",[ux]:"fire-app-check-compat",[dx]:"fire-auth",[hx]:"fire-auth-compat",[fx]:"fire-rtdb",[px]:"fire-rtdb-compat",[gx]:"fire-fn",[mx]:"fire-fn-compat",[yx]:"fire-iid",[vx]:"fire-iid-compat",[_x]:"fire-fcm",[Ix]:"fire-fcm-compat",[wx]:"fire-perf",[Ex]:"fire-perf-compat",[Dx]:"fire-rc",[Tx]:"fire-rc-compat",[bx]:"fire-gcs",[Cx]:"fire-gcs-compat",[Ax]:"fire-fst",[Nx]:"fire-fst-compat",[Sx]:"fire-vertex","fire-js":"fire-js",[Mx]:"fire-js-all"};var Rs=new Map,Px=new Map,Rh=new Map;function dw(t,e){try{t.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sn(t){let e=t.name;if(Rh.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;Rh.set(e,t);for(let n of Rs.values())dw(n,t);for(let n of Px.values())dw(n,t);return!0}function Fh(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function di(t){return t.settings!==void 0}var Ox={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},An=new en("app","Firebase",Ox);var Ph=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw An.create("app-deleted",{appName:this._name})}};var hi=xx;function Vh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:xh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw An.create("bad-app-name",{appName:String(i)});if(n||(n=_h()),!n)throw An.create("no-options");let s=Rs.get(i);if(s){if(li(n,s.options)&&li(r,s.config))return s;throw An.create("duplicate-app",{appName:i})}let o=new yc(i);for(let u of Rh.values())o.addComponent(u);let c=new Ph(n,r,o);return Rs.set(i,c),c}function Os(t=xh){let e=Rs.get(t);if(!e&&t===xh&&_h())return Vh();if(!e)throw An.create("no-app",{appName:t});return e}function _c(){return Array.from(Rs.values())}function Se(t,e,n){var r;let i=(r=Rx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(c.join(" "));return}Sn(new gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var kx="firebase-heartbeat-database",Fx=1,Ps="firebase-heartbeat-store",Sh=null;function gw(){return Sh||(Sh=uw(kx,Fx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ps)}catch(n){console.warn(n)}}}}).catch(t=>{throw An.create("idb-open",{originalErrorMessage:t.message})})),Sh}function Vx(t){return A(this,null,function*(){try{let n=(yield gw()).transaction(Ps),r=yield n.objectStore(Ps).get(mw(t));return yield n.done,r}catch(e){if(e instanceof pt)lr.warn(e.message);else{let n=An.create("idb-get",{originalErrorMessage:e?.message});lr.warn(n.message)}}})}function hw(t,e){return A(this,null,function*(){try{let r=(yield gw()).transaction(Ps,"readwrite");yield r.objectStore(Ps).put(e,mw(t)),yield r.done}catch(n){if(n instanceof pt)lr.warn(n.message);else{let r=An.create("idb-set",{originalErrorMessage:n?.message});lr.warn(r.message)}}})}function mw(t){return`${t.name}!${t.options.appId}`}var Lx=1024,Ux=30*24*60*60*1e3,Oh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new kh(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return A(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fw();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=Ux}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return A(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=fw(),{heartbeatsToSend:r,unsentEntries:i}=jx(this._heartbeatsCache.heartbeats),s=xs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function fw(){return new Date().toISOString().substring(0,10)}function jx(t,e=Lx){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),pw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var kh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return A(this,null,function*(){return Ih()?tw().then(()=>!0).catch(()=>!1):!1})}read(){return A(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Vx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return A(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return A(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function pw(t){return xs(JSON.stringify({version:2,heartbeats:t})).length}function Bx(t){Sn(new gt("platform-logger",e=>new Nh(e),"PRIVATE")),Sn(new gt("heartbeat",e=>new Oh(e),"PRIVATE")),Se(Mh,lw,t),Se(Mh,lw,"esm2017"),Se("fire-js","")}Bx("");var yw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vw={};var Nn,Lh;(function(){var t;function e(E,m){function v(){}v.prototype=m.prototype,E.D=m.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(w,D,b){for(var _=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)_[qt-2]=arguments[qt];return m.prototype[D].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,v){v||(v=0);var w=Array(16);if(typeof m=="string")for(var D=0;16>D;++D)w[D]=m.charCodeAt(v++)|m.charCodeAt(v++)<<8|m.charCodeAt(v++)<<16|m.charCodeAt(v++)<<24;else for(D=0;16>D;++D)w[D]=m[v++]|m[v++]<<8|m[v++]<<16|m[v++]<<24;m=E.g[0],v=E.g[1],D=E.g[2];var b=E.g[3],_=m+(b^v&(D^b))+w[0]+3614090360&4294967295;m=v+(_<<7&4294967295|_>>>25),_=b+(D^m&(v^D))+w[1]+3905402710&4294967295,b=m+(_<<12&4294967295|_>>>20),_=D+(v^b&(m^v))+w[2]+606105819&4294967295,D=b+(_<<17&4294967295|_>>>15),_=v+(m^D&(b^m))+w[3]+3250441966&4294967295,v=D+(_<<22&4294967295|_>>>10),_=m+(b^v&(D^b))+w[4]+4118548399&4294967295,m=v+(_<<7&4294967295|_>>>25),_=b+(D^m&(v^D))+w[5]+1200080426&4294967295,b=m+(_<<12&4294967295|_>>>20),_=D+(v^b&(m^v))+w[6]+2821735955&4294967295,D=b+(_<<17&4294967295|_>>>15),_=v+(m^D&(b^m))+w[7]+4249261313&4294967295,v=D+(_<<22&4294967295|_>>>10),_=m+(b^v&(D^b))+w[8]+1770035416&4294967295,m=v+(_<<7&4294967295|_>>>25),_=b+(D^m&(v^D))+w[9]+2336552879&4294967295,b=m+(_<<12&4294967295|_>>>20),_=D+(v^b&(m^v))+w[10]+4294925233&4294967295,D=b+(_<<17&4294967295|_>>>15),_=v+(m^D&(b^m))+w[11]+2304563134&4294967295,v=D+(_<<22&4294967295|_>>>10),_=m+(b^v&(D^b))+w[12]+1804603682&4294967295,m=v+(_<<7&4294967295|_>>>25),_=b+(D^m&(v^D))+w[13]+4254626195&4294967295,b=m+(_<<12&4294967295|_>>>20),_=D+(v^b&(m^v))+w[14]+2792965006&4294967295,D=b+(_<<17&4294967295|_>>>15),_=v+(m^D&(b^m))+w[15]+1236535329&4294967295,v=D+(_<<22&4294967295|_>>>10),_=m+(D^b&(v^D))+w[1]+4129170786&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^D&(m^v))+w[6]+3225465664&4294967295,b=m+(_<<9&4294967295|_>>>23),_=D+(m^v&(b^m))+w[11]+643717713&4294967295,D=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(D^b))+w[0]+3921069994&4294967295,v=D+(_<<20&4294967295|_>>>12),_=m+(D^b&(v^D))+w[5]+3593408605&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^D&(m^v))+w[10]+38016083&4294967295,b=m+(_<<9&4294967295|_>>>23),_=D+(m^v&(b^m))+w[15]+3634488961&4294967295,D=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(D^b))+w[4]+3889429448&4294967295,v=D+(_<<20&4294967295|_>>>12),_=m+(D^b&(v^D))+w[9]+568446438&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^D&(m^v))+w[14]+3275163606&4294967295,b=m+(_<<9&4294967295|_>>>23),_=D+(m^v&(b^m))+w[3]+4107603335&4294967295,D=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(D^b))+w[8]+1163531501&4294967295,v=D+(_<<20&4294967295|_>>>12),_=m+(D^b&(v^D))+w[13]+2850285829&4294967295,m=v+(_<<5&4294967295|_>>>27),_=b+(v^D&(m^v))+w[2]+4243563512&4294967295,b=m+(_<<9&4294967295|_>>>23),_=D+(m^v&(b^m))+w[7]+1735328473&4294967295,D=b+(_<<14&4294967295|_>>>18),_=v+(b^m&(D^b))+w[12]+2368359562&4294967295,v=D+(_<<20&4294967295|_>>>12),_=m+(v^D^b)+w[5]+4294588738&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^D)+w[8]+2272392833&4294967295,b=m+(_<<11&4294967295|_>>>21),_=D+(b^m^v)+w[11]+1839030562&4294967295,D=b+(_<<16&4294967295|_>>>16),_=v+(D^b^m)+w[14]+4259657740&4294967295,v=D+(_<<23&4294967295|_>>>9),_=m+(v^D^b)+w[1]+2763975236&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^D)+w[4]+1272893353&4294967295,b=m+(_<<11&4294967295|_>>>21),_=D+(b^m^v)+w[7]+4139469664&4294967295,D=b+(_<<16&4294967295|_>>>16),_=v+(D^b^m)+w[10]+3200236656&4294967295,v=D+(_<<23&4294967295|_>>>9),_=m+(v^D^b)+w[13]+681279174&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^D)+w[0]+3936430074&4294967295,b=m+(_<<11&4294967295|_>>>21),_=D+(b^m^v)+w[3]+3572445317&4294967295,D=b+(_<<16&4294967295|_>>>16),_=v+(D^b^m)+w[6]+76029189&4294967295,v=D+(_<<23&4294967295|_>>>9),_=m+(v^D^b)+w[9]+3654602809&4294967295,m=v+(_<<4&4294967295|_>>>28),_=b+(m^v^D)+w[12]+3873151461&4294967295,b=m+(_<<11&4294967295|_>>>21),_=D+(b^m^v)+w[15]+530742520&4294967295,D=b+(_<<16&4294967295|_>>>16),_=v+(D^b^m)+w[2]+3299628645&4294967295,v=D+(_<<23&4294967295|_>>>9),_=m+(D^(v|~b))+w[0]+4096336452&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~D))+w[7]+1126891415&4294967295,b=m+(_<<10&4294967295|_>>>22),_=D+(m^(b|~v))+w[14]+2878612391&4294967295,D=b+(_<<15&4294967295|_>>>17),_=v+(b^(D|~m))+w[5]+4237533241&4294967295,v=D+(_<<21&4294967295|_>>>11),_=m+(D^(v|~b))+w[12]+1700485571&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~D))+w[3]+2399980690&4294967295,b=m+(_<<10&4294967295|_>>>22),_=D+(m^(b|~v))+w[10]+4293915773&4294967295,D=b+(_<<15&4294967295|_>>>17),_=v+(b^(D|~m))+w[1]+2240044497&4294967295,v=D+(_<<21&4294967295|_>>>11),_=m+(D^(v|~b))+w[8]+1873313359&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~D))+w[15]+4264355552&4294967295,b=m+(_<<10&4294967295|_>>>22),_=D+(m^(b|~v))+w[6]+2734768916&4294967295,D=b+(_<<15&4294967295|_>>>17),_=v+(b^(D|~m))+w[13]+1309151649&4294967295,v=D+(_<<21&4294967295|_>>>11),_=m+(D^(v|~b))+w[4]+4149444226&4294967295,m=v+(_<<6&4294967295|_>>>26),_=b+(v^(m|~D))+w[11]+3174756917&4294967295,b=m+(_<<10&4294967295|_>>>22),_=D+(m^(b|~v))+w[2]+718787259&4294967295,D=b+(_<<15&4294967295|_>>>17),_=v+(b^(D|~m))+w[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+b&4294967295}r.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var v=m-this.blockSize,w=this.B,D=this.h,b=0;b<m;){if(D==0)for(;b<=v;)i(this,E,b),b+=this.blockSize;if(typeof E=="string"){for(;b<m;)if(w[D++]=E.charCodeAt(b++),D==this.blockSize){i(this,w),D=0;break}}else for(;b<m;)if(w[D++]=E[b++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=m},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var v=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=v&255,v/=256;for(this.u(E),E=Array(16),m=v=0;4>m;++m)for(var w=0;32>w;w+=8)E[v++]=this.g[m]>>>w&255;return E};function s(E,m){var v=c;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=m(E)}function o(E,m){this.h=m;for(var v=[],w=!0,D=E.length-1;0<=D;D--){var b=E[D]|0;w&&b==m||(v[D]=b,w=!1)}this.g=v}var c={};function u(E){return-128<=E&&128>E?s(E,function(m){return new o([m|0],0>m?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return M(d(-E));for(var m=[],v=1,w=0;E>=v;w++)m[w]=E/v|0,v*=4294967296;return new o(m,0)}function f(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return M(f(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(m,8)),w=p,D=0;D<E.length;D+=8){var b=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+b),m);8>b?(b=d(Math.pow(m,b)),w=w.j(b).add(d(_))):(w=w.j(v),w=w.add(d(_)))}return w}var p=u(0),y=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-M(this).m();for(var E=0,m=1,v=0;v<this.g.length;v++){var w=this.i(v);E+=(0<=w?w:4294967296+w)*m,m*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S(this))return"0";if(x(this))return"-"+M(this).toString(E);for(var m=d(Math.pow(E,6)),v=this,w="";;){var D=W(v,m).g;v=O(v,D.j(m));var b=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=D,S(v))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function S(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function x(E){return E.h==-1}t.l=function(E){return E=O(this,E),x(E)?-1:S(E)?0:1};function M(E){for(var m=E.g.length,v=[],w=0;w<m;w++)v[w]=~E.g[w];return new o(v,~E.h).add(y)}t.abs=function(){return x(this)?M(this):this},t.add=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0,D=0;D<=m;D++){var b=w+(this.i(D)&65535)+(E.i(D)&65535),_=(b>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);w=_>>>16,b&=65535,_&=65535,v[D]=_<<16|b}return new o(v,v[v.length-1]&-2147483648?-1:0)};function O(E,m){return E.add(M(m))}t.j=function(E){if(S(this)||S(E))return p;if(x(this))return x(E)?M(this).j(M(E)):M(M(this).j(E));if(x(E))return M(this.j(M(E)));if(0>this.l(I)&&0>E.l(I))return d(this.m()*E.m());for(var m=this.g.length+E.g.length,v=[],w=0;w<2*m;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<E.g.length;D++){var b=this.i(w)>>>16,_=this.i(w)&65535,qt=E.i(D)>>>16,Vi=E.i(D)&65535;v[2*w+2*D]+=_*Vi,U(v,2*w+2*D),v[2*w+2*D+1]+=b*Vi,U(v,2*w+2*D+1),v[2*w+2*D+1]+=_*qt,U(v,2*w+2*D+1),v[2*w+2*D+2]+=b*qt,U(v,2*w+2*D+2)}for(w=0;w<m;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=m;w<2*m;w++)v[w]=0;return new o(v,0)};function U(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function V(E,m){this.g=E,this.h=m}function W(E,m){if(S(m))throw Error("division by zero");if(S(E))return new V(p,p);if(x(E))return m=W(M(E),m),new V(M(m.g),M(m.h));if(x(m))return m=W(E,M(m)),new V(M(m.g),m.h);if(30<E.g.length){if(x(E)||x(m))throw Error("slowDivide_ only works with positive integers.");for(var v=y,w=m;0>=w.l(E);)v=fe(v),w=fe(w);var D=z(v,1),b=z(w,1);for(w=z(w,2),v=z(v,2);!S(w);){var _=b.add(w);0>=_.l(E)&&(D=D.add(v),b=_),w=z(w,1),v=z(v,1)}return m=O(E,D.j(m)),new V(D,m)}for(D=p;0<=E.l(m);){for(v=Math.max(1,Math.floor(E.m()/m.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=d(v),_=b.j(m);x(_)||0<_.l(E);)v-=w,b=d(v),_=b.j(m);S(b)&&(b=y),D=D.add(b),E=O(E,_)}return new V(D,E)}t.A=function(E){return W(this,E).h},t.and=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)&E.i(w);return new o(v,this.h&E.h)},t.or=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)|E.i(w);return new o(v,this.h|E.h)},t.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),v=[],w=0;w<m;w++)v[w]=this.i(w)^E.i(w);return new o(v,this.h^E.h)};function fe(E){for(var m=E.g.length+1,v=[],w=0;w<m;w++)v[w]=E.i(w)<<1|E.i(w-1)>>>31;return new o(v,E.h)}function z(E,m){var v=m>>5;m%=32;for(var w=E.g.length-v,D=[],b=0;b<w;b++)D[b]=0<m?E.i(b+v)>>>m|E.i(b+v+1)<<32-m:E.i(b+v);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lh=vw.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Nn=vw.Integer=o}).apply(typeof yw<"u"?yw:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tn={};var Uh,jh,fi,Bh,ks,wc,$h,Hh,qh;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var T=a[g];if(!(T in h))break e;h=h[T]}a=a[a.length-1],g=h[a],l=l(g),l!=g&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,g=!1,T={next:function(){if(!g&&h<a.length){var C=h++;return{value:l(C,a[C]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function p(a,l,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function y(a,l,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function I(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function S(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,T,C){for(var P=Array(arguments.length-2),le=2;le<arguments.length;le++)P[le-2]=arguments[le];return l.prototype[T].apply(g,P)}}function x(a){let l=a.length;if(0<l){let h=Array(l);for(let g=0;g<l;g++)h[g]=a[g];return h}return[]}function M(a,l){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let T=a.length||0,C=g.length||0;a.length=T+C;for(let P=0;P<C;P++)a[T+P]=g[P]}else a.push(g)}}class O{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function U(a){return/^[\s\xa0]*$/.test(a)}function V(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function W(a){return W[" "](a),a}W[" "]=function(){};var fe=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function z(a,l,h){for(let g in a)l.call(h,a[g],g,a)}function E(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function m(a){let l={};for(let h in a)l[h]=a[h];return l}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,l){let h,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(h in g)a[h]=g[h];for(let C=0;C<v.length;C++)h=v[C],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function D(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function b(a){c.setTimeout(()=>{throw a},0)}function _(){var a=Cu;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class qt{constructor(){this.h=this.g=null}add(l,h){let g=Vi.get();g.set(l,h),this.h?this.h.next=g:this.g=g,this.h=g}}var Vi=new O(()=>new SD,a=>a.reset());class SD{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Li,Ui=!1,Cu=new qt,mg=()=>{let a=c.Promise.resolve(void 0);Li=()=>{a.then(ND)}};var ND=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){b(h)}var l=Vi;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}Ui=!1};function cn(){this.s=this.s,this.C=this.C}cn.prototype.s=!1,cn.prototype.ma=function(){this.s||(this.s=!0,this.N())},cn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var MD=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function ji(a,l){if(Oe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(fe){e:{try{W(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:xD[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ji.aa.h.call(this)}}S(ji,Oe);var xD={2:"touch",3:"pen",4:"mouse"};ji.prototype.h=function(){ji.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Bi="closure_listenable_"+(1e6*Math.random()|0),RD=0;function PD(a,l,h,g,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!g,this.ha=T,this.key=++RD,this.da=this.fa=!1}function yo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function vo(a){this.src=a,this.g={},this.h=0}vo.prototype.add=function(a,l,h,g,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var P=Su(a,l,g,T);return-1<P?(l=a[P],h||(l.fa=!1)):(l=new PD(l,this.src,C,!!g,T),l.fa=h,a.push(l)),l};function Au(a,l){var h=l.type;if(h in a.g){var g=a.g[h],T=Array.prototype.indexOf.call(g,l,void 0),C;(C=0<=T)&&Array.prototype.splice.call(g,T,1),C&&(yo(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Su(a,l,h,g){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==l&&C.capture==!!h&&C.ha==g)return T}return-1}var Nu="closure_lm_"+(1e6*Math.random()|0),Mu={};function yg(a,l,h,g,T){if(g&&g.once)return _g(a,l,h,g,T);if(Array.isArray(l)){for(var C=0;C<l.length;C++)yg(a,l[C],h,g,T);return null}return h=Ou(h),a&&a[Bi]?a.K(l,h,d(g)?!!g.capture:!!g,T):vg(a,l,h,!1,g,T)}function vg(a,l,h,g,T,C){if(!l)throw Error("Invalid event type");var P=d(T)?!!T.capture:!!T,le=Ru(a);if(le||(a[Nu]=le=new vo(a)),h=le.add(l,h,g,P,C),h.proxy)return h;if(g=OD(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)MD||(T=P),T===void 0&&(T=!1),a.addEventListener(l.toString(),g,T);else if(a.attachEvent)a.attachEvent(wg(l.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function OD(){function a(h){return l.call(a.src,a.listener,h)}let l=kD;return a}function _g(a,l,h,g,T){if(Array.isArray(l)){for(var C=0;C<l.length;C++)_g(a,l[C],h,g,T);return null}return h=Ou(h),a&&a[Bi]?a.L(l,h,d(g)?!!g.capture:!!g,T):vg(a,l,h,!0,g,T)}function Ig(a,l,h,g,T){if(Array.isArray(l))for(var C=0;C<l.length;C++)Ig(a,l[C],h,g,T);else g=d(g)?!!g.capture:!!g,h=Ou(h),a&&a[Bi]?(a=a.i,l=String(l).toString(),l in a.g&&(C=a.g[l],h=Su(C,h,g,T),-1<h&&(yo(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete a.g[l],a.h--)))):a&&(a=Ru(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Su(l,h,g,T)),(h=-1<a?l[a]:null)&&xu(h))}function xu(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[Bi])Au(l.i,a);else{var h=a.type,g=a.proxy;l.removeEventListener?l.removeEventListener(h,g,a.capture):l.detachEvent?l.detachEvent(wg(h),g):l.addListener&&l.removeListener&&l.removeListener(g),(h=Ru(l))?(Au(h,a),h.h==0&&(h.src=null,l[Nu]=null)):yo(a)}}}function wg(a){return a in Mu?Mu[a]:Mu[a]="on"+a}function kD(a,l){if(a.da)a=!0;else{l=new ji(l,this);var h=a.listener,g=a.ha||a.src;a.fa&&xu(a),a=h.call(g,l)}return a}function Ru(a){return a=a[Nu],a instanceof vo?a:null}var Pu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ou(a){return typeof a=="function"?a:(a[Pu]||(a[Pu]=function(l){return a.handleEvent(l)}),a[Pu])}function ke(){cn.call(this),this.i=new vo(this),this.M=this,this.F=null}S(ke,cn),ke.prototype[Bi]=!0,ke.prototype.removeEventListener=function(a,l,h,g){Ig(this,a,l,h,g)};function Ge(a,l){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=l.type||l,typeof l=="string")l=new Oe(l,a);else if(l instanceof Oe)l.target=l.target||a;else{var T=l;l=new Oe(g,a),w(l,T)}if(T=!0,h)for(var C=h.length-1;0<=C;C--){var P=l.g=h[C];T=_o(P,g,!0,l)&&T}if(P=l.g=a,T=_o(P,g,!0,l)&&T,T=_o(P,g,!1,l)&&T,h)for(C=0;C<h.length;C++)P=l.g=h[C],T=_o(P,g,!1,l)&&T}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],g=0;g<h.length;g++)yo(h[g]);delete a.g[l],a.h--}}this.F=null},ke.prototype.K=function(a,l,h,g){return this.i.add(String(a),l,!1,h,g)},ke.prototype.L=function(a,l,h,g){return this.i.add(String(a),l,!0,h,g)};function _o(a,l,h,g){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,C=0;C<l.length;++C){var P=l[C];if(P&&!P.da&&P.capture==h){var le=P.listener,Me=P.ha||P.src;P.fa&&Au(a.i,P),T=le.call(Me,g)!==!1&&T}}return T&&!g.defaultPrevented}function Eg(a,l,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function Dg(a){a.g=Eg(()=>{a.g=null,a.i&&(a.i=!1,Dg(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class FD extends cn{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Dg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(a){cn.call(this),this.h=a,this.g={}}S($i,cn);var Tg=[];function bg(a){z(a.g,function(l,h){this.g.hasOwnProperty(h)&&xu(l)},a),a.g={}}$i.prototype.N=function(){$i.aa.N.call(this),bg(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ku=c.JSON.stringify,VD=c.JSON.parse,LD=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Fu(){}Fu.prototype.h=null;function Cg(a){return a.h||(a.h=a.i())}function Ag(){}var Hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vu(){Oe.call(this,"d")}S(Vu,Oe);function Lu(){Oe.call(this,"c")}S(Lu,Oe);var Fn={},Sg=null;function Io(){return Sg=Sg||new ke}Fn.La="serverreachability";function Ng(a){Oe.call(this,Fn.La,a)}S(Ng,Oe);function qi(a){let l=Io();Ge(l,new Ng(l))}Fn.STAT_EVENT="statevent";function Mg(a,l){Oe.call(this,Fn.STAT_EVENT,a),this.stat=l}S(Mg,Oe);function ze(a){let l=Io();Ge(l,new Mg(l,a))}Fn.Ma="timingevent";function xg(a,l){Oe.call(this,Fn.Ma,a),this.size=l}S(xg,Oe);function Gi(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function UD(a,l,h,g,T,C){a.info(function(){if(a.g)if(C)for(var P="",le=C.split("&"),Me=0;Me<le.length;Me++){var se=le[Me].split("=");if(1<se.length){var Fe=se[0];se=se[1];var Ve=Fe.split("_");P=2<=Ve.length&&Ve[1]=="type"?P+(Fe+"="+se+"&"):P+(Fe+"=redacted&")}}else P=null;else P=C;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+l+`
`+h+`
`+P})}function jD(a,l,h,g,T,C,P){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+l+`
`+h+`
`+C+" "+P})}function Sr(a,l,h,g){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+$D(a,h)+(g?" "+g:"")})}function BD(a,l){a.info(function(){return"TIMEOUT: "+l})}zi.prototype.info=function(){};function $D(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var P=1;P<T.length;P++)T[P]=""}}}}return ku(h)}catch{return l}}var wo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uu;function Eo(){}S(Eo,Fu),Eo.prototype.g=function(){return new XMLHttpRequest},Eo.prototype.i=function(){return{}},Uu=new Eo;function un(a,l,h,g){this.j=a,this.i=l,this.l=h,this.R=g||1,this.U=new $i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pg}function Pg(){this.i=null,this.g="",this.h=!1}var Og={},ju={};function Bu(a,l,h){a.L=1,a.v=Co(Gt(l)),a.m=h,a.P=!0,kg(a,null)}function kg(a,l){a.F=Date.now(),Do(a),a.A=Gt(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Qg(h.i,"t",g),a.C=0,h=a.j.J,a.h=new Pg,a.g=fm(a.j,h?l:null,!a.m),0<a.O&&(a.M=new FD(y(a.Y,a,a.g),a.O)),l=a.U,h=a.g,g=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(Tg[0]=T.toString()),T=Tg);for(var C=0;C<T.length;C++){var P=yg(h,T[C],g||l.handleEvent,!1,l.h||l);if(!P)break;l.g[P.key]=P}l=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),qi(),UD(a.i,a.u,a.A,a.l,a.R,a.m)}un.prototype.ca=function(a){a=a.target;let l=this.M;l&&zt(a)==3?l.j():this.Y(a)},un.prototype.Y=function(a){try{if(a==this.g)e:{let Ve=zt(this.g);var l=this.g.Ba();let xr=this.g.Z();if(!(3>Ve)&&(Ve!=3||this.g&&(this.h.h||this.g.oa()||nm(this.g)))){this.J||Ve!=4||l==7||(l==8||0>=xr?qi(3):qi(2)),$u(this);var h=this.g.Z();this.X=h;t:if(Fg(this)){var g=nm(this.g);a="";var T=g.length,C=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vn(this),Wi(this);var P="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(g[l],{stream:!(C&&l==T-1)});g.length=0,this.h.g+=a,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=h==200,jD(this.i,this.u,this.A,this.l,this.R,Ve,h),this.o){if(this.T&&!this.K){t:{if(this.g){var le,Me=this.g;if((le=Me.g?Me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(le)){var se=le;break t}}se=null}if(h=se)Sr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hu(this,h);else{this.o=!1,this.s=3,ze(12),Vn(this),Wi(this);break e}}if(this.P){h=!0;let yt;for(;!this.J&&this.C<P.length;)if(yt=HD(this,P),yt==ju){Ve==4&&(this.s=4,ze(14),h=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==Og){this.s=4,ze(15),Sr(this.i,this.l,P,"[Invalid Chunk]"),h=!1;break}else Sr(this.i,this.l,yt,null),Hu(this,yt);if(Fg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||P.length!=0||this.h.h||(this.s=1,ze(16),h=!1),this.o=this.o&&h,!h)Sr(this.i,this.l,P,"[Invalid Chunked Response]"),Vn(this),Wi(this);else if(0<P.length&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.ba&&!Fe.M&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Qu(Fe),Fe.M=!0,ze(11))}}else Sr(this.i,this.l,P,null),Hu(this,P);Ve==4&&Vn(this),this.o&&!this.J&&(Ve==4?um(this.j,this):(this.o=!1,Do(this)))}else oT(this.g),h==400&&0<P.indexOf("Unknown SID")?(this.s=3,ze(12)):(this.s=0,ze(13)),Vn(this),Wi(this)}}}catch{}finally{}};function Fg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function HD(a,l){var h=a.C,g=l.indexOf(`
`,h);return g==-1?ju:(h=Number(l.substring(h,g)),isNaN(h)?Og:(g+=1,g+h>l.length?ju:(l=l.slice(g,g+h),a.C=g+h,l)))}un.prototype.cancel=function(){this.J=!0,Vn(this)};function Do(a){a.S=Date.now()+a.I,Vg(a,a.I)}function Vg(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Gi(y(a.ba,a),l)}function $u(a){a.B&&(c.clearTimeout(a.B),a.B=null)}un.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(BD(this.i,this.A),this.L!=2&&(qi(),ze(17)),Vn(this),this.s=2,Wi(this)):Vg(this,this.S-a)};function Wi(a){a.j.G==0||a.J||um(a.j,a)}function Vn(a){$u(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,bg(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function Hu(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||qu(h.h,a))){if(!a.K&&qu(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(l)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)xo(h),No(h);else break e;Ku(h),ze(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=Gi(y(h.Za,h),6e3));if(1>=jg(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Un(h,11)}else if((a.K||h.g==a)&&xo(h),!U(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let se=T[l];if(h.T=se[0],se=se[1],h.G==2)if(se[0]=="c"){h.K=se[1],h.ia=se[2];let Fe=se[3];Fe!=null&&(h.la=Fe,h.j.info("VER="+h.la));let Ve=se[4];Ve!=null&&(h.Aa=Ve,h.j.info("SVER="+h.Aa));let xr=se[5];xr!=null&&typeof xr=="number"&&0<xr&&(g=1.5*xr,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let yt=a.g;if(yt){let Po=yt.g?yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var C=g.h;C.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Gu(C,C.h),C.h=null))}if(g.D){let Yu=yt.g?yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Yu&&(g.ya=Yu,pe(g.I,g.D,Yu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var P=a;if(g.qa=hm(g,g.J?g.ia:null,g.W),P.K){Bg(g.h,P);var le=P,Me=g.L;Me&&(le.I=Me),le.B&&($u(le),Do(le)),g.g=P}else am(g);0<h.i.length&&Mo(h)}else se[0]!="stop"&&se[0]!="close"||Un(h,7);else h.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?Un(h,7):Wu(h):se[0]!="noop"&&h.l&&h.l.ta(se),h.v=0)}}qi(4)}catch{}}var qD=class{constructor(a,l){this.g=a,this.map=l}};function Lg(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ug(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jg(a){return a.h?1:a.g?a.g.size:0}function qu(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function Gu(a,l){a.g?a.g.add(l):a.h=l}function Bg(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}Lg.prototype.cancel=function(){if(this.i=$g(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function $g(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return x(a.i)}function GD(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,g=0;g<h;g++)l.push(a[g]);return l}l=[],h=0;for(g in a)l[h++]=a[g];return l}function zD(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let g in a)l[h++]=g;return l}}}function Hg(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=zD(a),g=GD(a),T=g.length,C=0;C<T;C++)l.call(void 0,g[C],h&&h[C],a)}var qg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WD(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),T=null;if(0<=g){var C=a[h].substring(0,g);T=a[h].substring(g+1)}else C=a[h];l(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Ln(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ln){this.h=a.h,To(this,a.j),this.o=a.o,this.g=a.g,bo(this,a.s),this.l=a.l;var l=a.i,h=new Yi;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),Gg(this,h),this.m=a.m}else a&&(l=String(a).match(qg))?(this.h=!1,To(this,l[1]||"",!0),this.o=Ki(l[2]||""),this.g=Ki(l[3]||"",!0),bo(this,l[4]),this.l=Ki(l[5]||"",!0),Gg(this,l[6]||"",!0),this.m=Ki(l[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}Ln.prototype.toString=function(){var a=[],l=this.j;l&&a.push(Qi(l,zg,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Qi(l,zg,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Qi(h,h.charAt(0)=="/"?YD:QD,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Qi(h,ZD)),a.join("")};function Gt(a){return new Ln(a)}function To(a,l,h){a.j=h?Ki(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function bo(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function Gg(a,l,h){l instanceof Yi?(a.i=l,XD(a.i,a.h)):(h||(l=Qi(l,JD)),a.i=new Yi(l,a.h))}function pe(a,l,h){a.i.set(l,h)}function Co(a){return pe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ki(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Qi(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,KD),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function KD(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var zg=/[#\/\?@]/g,QD=/[#\?:]/g,YD=/[#\?]/g,JD=/[#\?@]/g,ZD=/#/g;function Yi(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function ln(a){a.g||(a.g=new Map,a.h=0,a.i&&WD(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}t=Yi.prototype,t.add=function(a,l){ln(this),this.i=null,a=Nr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Wg(a,l){ln(a),l=Nr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Kg(a,l){return ln(a),l=Nr(a,l),a.g.has(l)}t.forEach=function(a,l){ln(this),this.g.forEach(function(h,g){h.forEach(function(T){a.call(l,T,g,this)},this)},this)},t.na=function(){ln(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let g=0;g<l.length;g++){let T=a[g];for(let C=0;C<T.length;C++)h.push(l[g])}return h},t.V=function(a){ln(this);let l=[];if(typeof a=="string")Kg(this,a)&&(l=l.concat(this.g.get(Nr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},t.set=function(a,l){return ln(this),this.i=null,a=Nr(this,a),Kg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},t.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Qg(a,l,h){Wg(a,l),0<h.length&&(a.i=null,a.g.set(Nr(a,l),x(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var g=l[h];let C=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var T=C;P[g]!==""&&(T+="="+encodeURIComponent(String(P[g]))),a.push(T)}}return this.i=a.join("&")};function Nr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function XD(a,l){l&&!a.j&&(ln(a),a.i=null,a.g.forEach(function(h,g){var T=g.toLowerCase();g!=T&&(Wg(this,g),Qg(this,T,h))},a)),a.j=l}function eT(a,l){let h=new zi;if(c.Image){let g=new Image;g.onload=I(dn,h,"TestLoadImage: loaded",!0,l,g),g.onerror=I(dn,h,"TestLoadImage: error",!1,l,g),g.onabort=I(dn,h,"TestLoadImage: abort",!1,l,g),g.ontimeout=I(dn,h,"TestLoadImage: timeout",!1,l,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else l(!1)}function tT(a,l){let h=new zi,g=new AbortController,T=setTimeout(()=>{g.abort(),dn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:g.signal}).then(C=>{clearTimeout(T),C.ok?dn(h,"TestPingServer: ok",!0,l):dn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),dn(h,"TestPingServer: error",!1,l)})}function dn(a,l,h,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(h)}catch{}}function nT(){this.g=new LD}function rT(a,l,h){let g=h||"";try{Hg(a,function(T,C){let P=T;d(T)&&(P=ku(T)),l.push(g+C+"="+encodeURIComponent(P))})}catch(T){throw l.push(g+"type="+encodeURIComponent("_badmap")),T}}function Ji(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Ji,Fu),Ji.prototype.g=function(){return new Ao(this.l,this.j)},Ji.prototype.i=function(a){return function(){return a}}({});function Ao(a,l){ke.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ao,ke),t=Ao.prototype,t.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,Xi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Xi(this)),this.g&&(this.readyState=3,Xi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?Zi(this):Xi(this),this.readyState==3&&Yg(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Zi(this))},t.Qa=function(a){this.g&&(this.response=a,Zi(this))},t.ga=function(){this.g&&Zi(this)};function Zi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Xi(a)}t.setRequestHeader=function(a,l){this.u.append(a,l)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function Xi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ao.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Jg(a){let l="";return z(a,function(h,g){l+=g,l+=":",l+=h,l+=`\r
`}),l}function zu(a,l,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=Jg(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):pe(a,l,h))}function _e(a){ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(_e,ke);var iT=/^https?$/i,sT=["POST","PUT"];t=_e.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,l,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uu.g(),this.v=this.o?Cg(this.o):Cg(Uu),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(C){Zg(this,C);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)h.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let C of g.keys())h.set(C,g.get(C));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(sT,l,void 0))||g||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,P]of h)this.g.setRequestHeader(C,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tm(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){Zg(this,C)}};function Zg(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Xg(a),So(a)}function Xg(a){a.A||(a.A=!0,Ge(a,"complete"),Ge(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ge(this,"complete"),Ge(this,"abort"),So(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),_e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?em(this):this.bb())},t.bb=function(){em(this)};function em(a){if(a.h&&typeof o<"u"&&(!a.v[1]||zt(a)!=4||a.Z()!=2)){if(a.u&&zt(a)==4)Eg(a.Ea,0,a);else if(Ge(a,"readystatechange"),zt(a)==4){a.h=!1;try{let P=a.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var g;if(g=P===0){var T=String(a.D).match(qg)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),g=!iT.test(T?T.toLowerCase():"")}h=g}if(h)Ge(a,"complete"),Ge(a,"success");else{a.m=6;try{var C=2<zt(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",Xg(a)}}finally{So(a)}}}}function So(a,l){if(a.g){tm(a);let h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||Ge(a,"ready");try{h.onreadystatechange=g}catch{}}}function tm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function zt(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),VD(l)}};function nm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function oT(a){let l={};a=(a.g&&2<=zt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(U(a[g]))continue;var h=D(a[g]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=l[T]||[];l[T]=C,C.push(h)}E(l,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function es(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function rm(a){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=es("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=es("baseRetryDelayMs",5e3,a),this.cb=es("retryDelaySeedMs",1e4,a),this.Wa=es("forwardChannelMaxRetries",2,a),this.wa=es("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Lg(a&&a.concurrentRequestLimit),this.Da=new nT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rm.prototype,t.la=8,t.G=1,t.connect=function(a,l,h,g){ze(0),this.W=a,this.H=l||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=hm(this,null,this.W),Mo(this)};function Wu(a){if(im(a),a.G==3){var l=a.U++,h=Gt(a.I);if(pe(h,"SID",a.K),pe(h,"RID",l),pe(h,"TYPE","terminate"),ts(a,h),l=new un(a,a.j,l),l.L=2,l.v=Co(Gt(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=fm(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Do(l)}dm(a)}function No(a){a.g&&(Qu(a),a.g.cancel(),a.g=null)}function im(a){No(a),a.u&&(c.clearTimeout(a.u),a.u=null),xo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Mo(a){if(!Ug(a.h)&&!a.s){a.s=!0;var l=a.Ga;Li||mg(),Ui||(Li(),Ui=!0),Cu.add(l,a),a.B=0}}function aT(a,l){return jg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Gi(y(a.Ga,a,l),lm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new un(this,this.j,a),C=this.o;if(this.S&&(C?(C=m(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(l+=g,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=om(this,T,l),h=Gt(this.I),pe(h,"RID",a),pe(h,"CVER",22),this.D&&pe(h,"X-HTTP-Session-Id",this.D),ts(this,h),C&&(this.O?l="headers="+encodeURIComponent(String(Jg(C)))+"&"+l:this.m&&zu(h,this.m,C)),Gu(this.h,T),this.Ua&&pe(h,"TYPE","init"),this.P?(pe(h,"$req",l),pe(h,"SID","null"),T.T=!0,Bu(T,h,null)):Bu(T,h,l),this.G=2}}else this.G==3&&(a?sm(this,a):this.i.length==0||Ug(this.h)||sm(this))};function sm(a,l){var h;l?h=l.l:h=a.U++;let g=Gt(a.I);pe(g,"SID",a.K),pe(g,"RID",h),pe(g,"AID",a.T),ts(a,g),a.m&&a.o&&zu(g,a.m,a.o),h=new un(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=om(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Gu(a.h,h),Bu(h,g,l)}function ts(a,l){a.H&&z(a.H,function(h,g){pe(l,g,h)}),a.l&&Hg({},function(h,g){pe(l,g,h)})}function om(a,l,h){h=Math.min(a.i.length,h);var g=a.l?y(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let P=["count="+h];C==-1?0<h?(C=T[0].g,P.push("ofs="+C)):C=0:P.push("ofs="+C);let le=!0;for(let Me=0;Me<h;Me++){let se=T[Me].g,Fe=T[Me].map;if(se-=C,0>se)C=Math.max(0,T[Me].g-100),le=!1;else try{rT(Fe,P,"req"+se+"_")}catch{g&&g(Fe)}}if(le){g=P.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,g}function am(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;Li||mg(),Ui||(Li(),Ui=!0),Cu.add(l,a),a.v=0}}function Ku(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Gi(y(a.Fa,a),lm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,cm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Gi(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ze(10),No(this),cm(this))};function Qu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function cm(a){a.g=new un(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=Gt(a.qa);pe(l,"RID","rpc"),pe(l,"SID",a.K),pe(l,"AID",a.T),pe(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&pe(l,"TO",a.ja),pe(l,"TYPE","xmlhttp"),ts(a,l),a.m&&a.o&&zu(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Co(Gt(l)),h.m=null,h.P=!0,kg(h,a)}t.Za=function(){this.C!=null&&(this.C=null,No(this),Ku(this),ze(19))};function xo(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function um(a,l){var h=null;if(a.g==l){xo(a),Qu(a),a.g=null;var g=2}else if(qu(a.h,l))h=l.D,Bg(a.h,l),g=1;else return;if(a.G!=0){if(l.o)if(g==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;g=Io(),Ge(g,new xg(g,h)),Mo(a)}else am(a);else if(T=l.s,T==3||T==0&&0<l.X||!(g==1&&aT(a,l)||g==2&&Ku(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:Un(a,5);break;case 4:Un(a,10);break;case 3:Un(a,6);break;default:Un(a,2)}}}function lm(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function Un(a,l){if(a.j.info("Error code "+l),l==2){var h=y(a.fb,a),g=a.Xa;let T=!g;g=new Ln(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||To(g,"https"),Co(g),T?eT(g.toString(),h):tT(g.toString(),h)}else ze(2);a.G=0,a.l&&a.l.sa(l),dm(a),im(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function dm(a){if(a.G=0,a.ka=[],a.l){let l=$g(a.h);(l.length!=0||a.i.length!=0)&&(M(a.ka,l),M(a.ka,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.ra()}}function hm(a,l,h){var g=h instanceof Ln?Gt(h):new Ln(h);if(g.g!="")l&&(g.g=l+"."+g.g),bo(g,g.s);else{var T=c.location;g=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var C=new Ln(null);g&&To(C,g),l&&(C.g=l),T&&bo(C,T),h&&(C.l=h),g=C}return h=a.D,l=a.ya,h&&l&&pe(g,h,l),pe(g,"VER",a.la),ts(a,g),g}function fm(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new _e(new Ji({eb:h})):new _e(a.pa),l.Ha(a.J),l}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pm(){}t=pm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ro(){}Ro.prototype.g=function(a,l){return new rt(a,l)};function rt(a,l){ke.call(this),this.g=new rm(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!U(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!U(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Mr(this)}S(rt,ke),rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rt.prototype.close=function(){Wu(this.g)},rt.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=ku(a),a=h);l.i.push(new qD(l.Ya++,a)),l.G==3&&Mo(l)},rt.prototype.N=function(){this.g.l=null,delete this.j,Wu(this.g),delete this.g,rt.aa.N.call(this)};function gm(a){Vu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}S(gm,Vu);function mm(){Lu.call(this),this.status=1}S(mm,Lu);function Mr(a){this.g=a}S(Mr,pm),Mr.prototype.ua=function(){Ge(this.g,"a")},Mr.prototype.ta=function(a){Ge(this.g,new gm(a))},Mr.prototype.sa=function(a){Ge(this.g,new mm)},Mr.prototype.ra=function(){Ge(this.g,"b")},Ro.prototype.createWebChannel=Ro.prototype.g,rt.prototype.send=rt.prototype.o,rt.prototype.open=rt.prototype.m,rt.prototype.close=rt.prototype.close,qh=tn.createWebChannelTransport=function(){return new Ro},Hh=tn.getStatEventTarget=function(){return Io()},$h=tn.Event=Fn,wc=tn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wo.NO_ERROR=0,wo.TIMEOUT=8,wo.HTTP_ERROR=6,ks=tn.ErrorCode=wo,Rg.COMPLETE="complete",Bh=tn.EventType=Rg,Ag.EventType=Hi,Hi.OPEN="a",Hi.CLOSE="b",Hi.ERROR="c",Hi.MESSAGE="d",ke.prototype.listen=ke.prototype.K,fi=tn.WebChannel=Ag,jh=tn.FetchXmlHttpFactory=Ji,_e.prototype.listenOnce=_e.prototype.L,_e.prototype.getLastError=_e.prototype.Ka,_e.prototype.getLastErrorCode=_e.prototype.Ba,_e.prototype.getStatus=_e.prototype.Z,_e.prototype.getResponseJson=_e.prototype.Oa,_e.prototype.getResponseText=_e.prototype.oa,_e.prototype.send=_e.prototype.ea,_e.prototype.setWithCredentials=_e.prototype.Ha,Uh=tn.XhrIo=_e}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});var _w="@firebase/firestore";var Ne=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ne.UNAUTHENTICATED=new Ne(null),Ne.GOOGLE_CREDENTIALS=new Ne("google-credentials-uid"),Ne.FIRST_PARTY=new Ne("first-party-uid"),Ne.MOCK_USER=new Ne("mock-user");var Pi="10.12.1";var pr=new Cn("@firebase/firestore");function Fs(){return pr.logLevel}function F(t,...e){if(pr.logLevel<=Z.DEBUG){let n=e.map(Np);pr.debug(`Firestore (${Pi}): ${t}`,...n)}}function rn(t,...e){if(pr.logLevel<=Z.ERROR){let n=e.map(Np);pr.error(`Firestore (${Pi}): ${t}`,...n)}}function Ii(t,...e){if(pr.logLevel<=Z.WARN){let n=e.map(Np);pr.warn(`Firestore (${Pi}): ${t}`,...n)}}function Np(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function B(t="Unexpected state"){let e=`FIRESTORE (${Pi}) INTERNAL ASSERTION FAILED: `+t;throw rn(e),new Error(e)}function he(t,e){t||B()}function q(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends pt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Vt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Cc=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Qh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ne.UNAUTHENTICATED))}shutdown(){}},Yh=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Jh=class{constructor(e){this.t=e,this.currentUser=Ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Vt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>A(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string"),new Cc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new Ne(e)}},Zh=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ne.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Xh=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Zh(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ef=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},tf=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new ef(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Hx(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ac=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Hx(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ae(t,e){return t<e?-1:t>e?1:0}function wi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Pe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var G=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Pe(0,0))}static max(){return new t(new Pe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sc=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(),r===void 0?r=e.length-n:r>e.length-n&&B(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ve=class t extends Sc{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},qx=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=class t extends Sc{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return qx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new k(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new k(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new k(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var L=class t{constructor(e){this.path=e}static fromPath(e){return new t(ve.fromString(e))}static fromName(e){return new t(ve.fromString(e).popFirst(5))}static empty(){return new t(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ve(e.slice()))}};var nf=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};nf.UNKNOWN_ID=-1;function Gx(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=G.fromTimestamp(r===1e9?new Pe(n+1,0):new Pe(n,r));return new gr(i,L.empty(),e)}function zx(t){return new gr(t.readTime,t.key,-1)}var gr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(G.min(),L.empty(),-1)}static max(){return new t(G.max(),L.empty(),-1)}};function Wx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=L.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}var Kx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function to(t){return A(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==Kx)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;n(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Qx(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(t){return t.name==="IndexedDbTransactionError"}var Jw=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function su(t){return t==null}function $s(t){return t===0&&1/t==-1/0}function Yx(t){return typeof t=="number"&&Number.isInteger(t)&&!$s(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Jx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],d$=[...Jx,"documentOverlays"],Zx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xx=Zx,h$=[...Xx,"indexConfiguration","indexState","indexEntries"];function Iw(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zw(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var we=class t{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yi(this.root,e,this.comparator,!1)}getReverseIterator(){return new yi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yi(this.root,e,this.comparator,!0)}},yi=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Lt=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();let e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}};Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nc(this.data.getIterator())}getIteratorFrom(e){return new Nc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Nc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mt=class t{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(ut.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wi(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Mc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Je=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mc("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Je.EMPTY_BYTE_STRING=new Je("");var eR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sn(t){if(he(!!t),typeof t=="string"){let e=0,n=eR.exec(t);if(he(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ie(t.seconds),nanos:Ie(t.nanos)}}function Ie(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xn(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}function Mp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xp(t){let e=t.mapValue.fields.__previous_value__;return Mp(e)?xp(e):e}function Hs(t){let e=sn(t.mapValue.fields.__local_write_time__.timestampValue);return new Pe(e.seconds,e.nanos)}var sf=class{constructor(e,n,r,i,s,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},xc=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ec={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mp(t)?4:Xw(t)?9007199254740991:10:B()}function $t(t,e){if(t===e)return!0;let n=mr(t);if(n!==mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hs(t).isEqual(Hs(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=sn(i.timestampValue),c=sn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return xn(i.bytesValue).isEqual(xn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ie(i.geoPointValue.latitude)===Ie(s.geoPointValue.latitude)&&Ie(i.geoPointValue.longitude)===Ie(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ie(i.integerValue)===Ie(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ie(i.doubleValue),c=Ie(s.doubleValue);return o===c?$s(o)===$s(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return wi(t.arrayValue.values||[],e.arrayValue.values||[],$t);case 10:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Iw(o)!==Iw(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!$t(o[u],c[u])))return!1;return!0}(t,e);default:return B()}}function qs(t,e){return(t.values||[]).find(n=>$t(n,e))!==void 0}function Ei(t,e){if(t===e)return 0;let n=mr(t),r=mr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Ie(s.integerValue||s.doubleValue),u=Ie(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return ww(t.timestampValue,e.timestampValue);case 4:return ww(Hs(t),Hs(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(s,o){let c=xn(s),u=xn(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=ae(c[d],u[d]);if(f!==0)return f}return ae(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ae(Ie(s.latitude),Ie(o.latitude));return c!==0?c:ae(Ie(s.longitude),Ie(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let c=s.values||[],u=o.values||[];for(let d=0;d<c.length&&d<u.length;++d){let f=Ei(c[d],u[d]);if(f)return f}return ae(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ec.mapValue&&o===Ec.mapValue)return 0;if(s===Ec.mapValue)return 1;if(o===Ec.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let y=ae(u[p],f[p]);if(y!==0)return y;let I=Ei(c[u[p]],d[f[p]]);if(I!==0)return I}return ae(u.length,f.length)}(t.mapValue,e.mapValue);default:throw B()}}function ww(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);let n=sn(t),r=sn(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function Di(t){return of(t)}function of(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=sn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return L.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=of(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${of(n.fields[o])}`;return i+"}"}(t.mapValue):B()}function Ew(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function af(t){return!!t&&"integerValue"in t}function Rp(t){return!!t&&"arrayValue"in t}function Dw(t){return!!t&&"nullValue"in t}function Tw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tc(t){return!!t&&"mapValue"in t}function Ls(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Er(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ls(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ls(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Xw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var ct=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ls(n)}setAll(e){let n=ut.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Ls(o):i.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $t(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Tc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Er(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Ls(this.value))}};function eE(t){let e=[];return Er(t.fields,(n,r)=>{let i=new ut([n]);if(Tc(r)){let s=eE(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new mt(e)}var bt=class t{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,G.min(),G.min(),G.min(),ct.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,G.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,G.min(),G.min(),ct.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,G.min(),G.min(),ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ti=class{constructor(e,n){this.position=e,this.inclusive=n}};function bw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=L.comparator(L.fromName(o.referenceValue),n.key):r=Ei(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$t(t.position[n],e.position[n]))return!1;return!0}var bi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function tR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Rc=class{},Ce=class t extends Rc{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uf(e,n,r):n==="array-contains"?new hf(e,r):n==="in"?new ff(e,r):n==="not-in"?new pf(e,r):n==="array-contains-any"?new gf(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lf(e,r):new df(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ei(n,this.value)):n!==null&&mr(this.value)===mr(n)&&this.matchesComparison(Ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ct=class t extends Rc{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return tE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function tE(t){return t.op==="and"}function nE(t){return nR(t)&&tE(t)}function nR(t){for(let e of t.filters)if(e instanceof Ct)return!1;return!0}function cf(t){if(t instanceof Ce)return t.field.canonicalString()+t.op.toString()+Di(t.value);if(nE(t))return t.filters.map(e=>cf(e)).join(",");{let e=t.filters.map(n=>cf(n)).join(",");return`${t.op}(${e})`}}function rE(t,e){return t instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.field.isEqual(i.field)&&$t(r.value,i.value)}(t,e):t instanceof Ct?function(r,i){return i instanceof Ct&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&rE(o,i.filters[c]),!0):!1}(t,e):void B()}function iE(t){return t instanceof Ce?function(n){return`${n.field.canonicalString()} ${n.op} ${Di(n.value)}`}(t):t instanceof Ct?function(n){return n.op.toString()+" {"+n.getFilters().map(iE).join(" ,")+"}"}(t):"Filter"}var uf=class extends Ce{constructor(e,n,r){super(e,n,r),this.key=L.fromName(r.referenceValue)}matches(e){let n=L.comparator(e.key,this.key);return this.matchesComparison(n)}},lf=class extends Ce{constructor(e,n){super(e,"in",n),this.keys=sE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},df=class extends Ce{constructor(e,n){super(e,"not-in",n),this.keys=sE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function sE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>L.fromName(r.referenceValue))}var hf=class extends Ce{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Rp(n)&&qs(n.arrayValue,this.value)}},ff=class extends Ce{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&qs(this.value.arrayValue,n)}},pf=class extends Ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!qs(this.value.arrayValue,n)}},gf=class extends Ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qs(this.value.arrayValue,r))}};var mf=class{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function Aw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new mf(t,e,n,r,i,s,o)}function Pp(t){let e=q(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Di(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Di(r)).join(",")),e.ue=n}return e.ue}function Op(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cw(t.startAt,e.startAt)&&Cw(t.endAt,e.endAt)}function yf(t){return L.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var yr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function rR(t,e,n,r,i,s,o,c){return new yr(t,e,n,r,i,s,o,c)}function kp(t){return new yr(t)}function Sw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oE(t){return t.collectionGroup!==null}function Us(t){let e=q(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new qe(ut.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new bi(s,r))}),n.has(ut.keyField().canonicalString())||e.ce.push(new bi(ut.keyField(),r))}return e.ce}function Ut(t){let e=q(t);return e.le||(e.le=iR(e,Us(t))),e.le}function iR(t,e){if(t.limitType==="F")return Aw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new bi(i.field,s)});let n=t.endAt?new Ti(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ti(t.startAt.position,t.startAt.inclusive):null;return Aw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vf(t,e){let n=t.filters.concat([e]);return new yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _f(t,e,n){return new yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ou(t,e){return Op(Ut(t),Ut(e))&&t.limitType===e.limitType}function aE(t){return`${Pp(Ut(t))}|lt:${t.limitType}`}function pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>iE(i)).join(", ")}]`),su(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Di(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Di(i)).join(",")),`Target(${r})`}(Ut(t))}; limitType=${t.limitType})`}function au(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):L.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Us(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let d=bw(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Us(r),i)||r.endAt&&!function(o,c,u){let d=bw(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Us(r),i))}(t,e)}function sR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cE(t){return(e,n)=>{let r=!1;for(let i of Us(t)){let s=oR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oR(t,e,n){let r=t.field.isKeyField()?L.comparator(e.key,n.key):function(s,o,c){let u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Ei(u,d):B()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}var Rn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Zw(this.inner)}size(){return this.innerSize}};var aR=new we(L.comparator);function on(){return aR}var uE=new we(L.comparator);function Vs(...t){let e=uE;for(let n of t)e=e.insert(n.key,n);return e}function lE(t){let e=uE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function dr(){return js()}function dE(){return js()}function js(){return new Rn(t=>t.toString(),(t,e)=>t.isEqual(e))}var cR=new we(L.comparator),uR=new qe(L.comparator);function X(...t){let e=uR;for(let n of t)e=e.add(n);return e}var lR=new qe(ae);function dR(){return lR}function hE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$s(e)?"-0":e}}function fE(t){return{integerValue:""+t}}function hR(t,e){return Yx(e)?fE(e):hE(t,e)}var Ci=class{constructor(){this._=void 0}};function fR(t,e,n){return t instanceof Ai?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Mp(s)&&(s=xp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof vr?gE(t,e):t instanceof _r?mE(t,e):function(i,s){let o=pE(i,s),c=Nw(o)+Nw(i.Pe);return af(o)&&af(i.Pe)?fE(c):hE(i.serializer,c)}(t,e)}function pR(t,e,n){return t instanceof vr?gE(t,e):t instanceof _r?mE(t,e):n}function pE(t,e){return t instanceof Si?function(r){return af(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ai=class extends Ci{},vr=class extends Ci{constructor(e){super(),this.elements=e}};function gE(t,e){let n=yE(e);for(let r of t.elements)n.some(i=>$t(i,r))||n.push(r);return{arrayValue:{values:n}}}var _r=class extends Ci{constructor(e){super(),this.elements=e}};function mE(t,e){let n=yE(e);for(let r of t.elements)n=n.filter(i=>!$t(i,r));return{arrayValue:{values:n}}}var Si=class extends Ci{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function Nw(t){return Ie(t.integerValue||t.doubleValue)}function yE(t){return Rp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vr&&i instanceof vr||r instanceof _r&&i instanceof _r?wi(r.elements,i.elements,$t):r instanceof Si&&i instanceof Si?$t(r.Pe,i.Pe):r instanceof Ai&&i instanceof Ai}(t.transform,e.transform)}var If=class{constructor(e,n){this.version=e,this.transformResults=n}},nn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ni=class{};function vE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gs(t.key,nn.none()):new Ir(t.key,t.data,nn.none());{let n=t.data,r=ct.empty(),i=new qe(ut.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ht(t.key,r,new mt(i.toArray()),nn.none())}}function mR(t,e,n){t instanceof Ir?function(i,s,o){let c=i.value.clone(),u=xw(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ht?function(i,s,o){if(!bc(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=xw(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(_E(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Bs(t,e,n,r){return t instanceof Ir?function(s,o,c,u){if(!bc(s.precondition,o))return c;let d=s.value.clone(),f=Rw(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ht?function(s,o,c,u){if(!bc(s.precondition,o))return c;let d=Rw(s.fieldTransforms,u,o),f=o.data;return f.setAll(_E(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,c){return bc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function yR(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=pE(r.transform,i||null);s!=null&&(n===null&&(n=ct.empty()),n.set(r.field,s))}return n||null}function Mw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wi(r,i,(s,o)=>gR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ir=class extends Ni{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ht=class extends Ni{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function _E(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function xw(t,e,n){let r=new Map;he(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,pR(o,c,n[i]))}return r}function Rw(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,fR(s,o,e))}return r}var Gs=class extends Ni{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wf=class extends Ni{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ef=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&mR(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bs(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Bs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=dE();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;let u=vE(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),X())}isEqual(e){return this.batchId===e.batchId&&wi(this.mutations,e.mutations,(n,r)=>Mw(n,r))&&wi(this.baseMutations,e.baseMutations,(n,r)=>Mw(n,r))}},Df=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){he(e.mutations.length===r.length);let i=function(){return cR}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Tf=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var bf=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Te,ie;function vR(t){switch(t){default:return B();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function IE(t){if(t===void 0)return rn("GRPC error has no .code"),N.UNKNOWN;switch(t){case Te.OK:return N.OK;case Te.CANCELLED:return N.CANCELLED;case Te.UNKNOWN:return N.UNKNOWN;case Te.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Te.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Te.INTERNAL:return N.INTERNAL;case Te.UNAVAILABLE:return N.UNAVAILABLE;case Te.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Te.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Te.NOT_FOUND:return N.NOT_FOUND;case Te.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Te.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Te.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Te.ABORTED:return N.ABORTED;case Te.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Te.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Te.DATA_LOSS:return N.DATA_LOSS;default:return B()}}(ie=Te||(Te={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var Pw=null;function _R(){return new TextEncoder}var IR=new Nn([4294967295,4294967295],0);function Ow(t){let e=_R().encode(t),n=new Lh;return n.update(e),new Uint8Array(n.digest())}function kw(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Nn([n,r],0),new Nn([i,s],0)]}var Cf=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hr(`Invalid padding: ${n}`);if(r<0)throw new hr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Nn.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Nn.fromNumber(r)));return i.compare(IR)===1&&(i=new Nn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=Ow(e),[r,i]=kw(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=Ow(e),[r,i]=kw(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},hr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pc=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,zs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(G.min(),i,new we(ae),on(),X())}},zs=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,X(),X(),X())}};var vi=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Oc=class{constructor(e,n){this.targetId=e,this.me=n}},kc=class{constructor(e,n,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Fc=class{constructor(){this.fe=0,this.ge=Vw(),this.pe=Je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=X(),n=X(),r=X();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B()}}),new zs(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=Vw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Af=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=on(),this.qe=Fw(),this.Qe=new we(ae)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(yf(s))if(r===0){let o=new L(s.path);this.Ue(n,o,bt.newNoDocument(o,G.min()))}else he(r===1);else{let o=this.Ye(n);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}Pw?.et(function(f,p,y,I,S){var x,M,O,U,V,W;let fe={localCacheCount:f,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},z=p.unchangedNames;return z&&(fe.bloomFilter={applied:S===0,hashCount:(x=z?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(U=(O=(M=z?.bits)===null||M===void 0?void 0:M.bitmap)===null||O===void 0?void 0:O.length)!==null&&U!==void 0?U:0,padding:(W=(V=z?.bits)===null||V===void 0?void 0:V.padding)!==null&&W!==void 0?W:0,mightContain:E=>{var m;return(m=I?.mightContain(E))!==null&&m!==void 0&&m}}),fe}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,c;try{o=xn(r).toUint8Array()}catch(u){if(u instanceof Mc)return Ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Cf(o,i,s)}catch(u){return Ii(u instanceof hr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&yf(c.target)){let u=new L(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,bt.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=X();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Pc(e,n,this.Qe,this.ke,r);return this.ke=on(),this.qe=Fw(),this.Qe=new we(ae),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Fc,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qe(ae),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fc),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Fw(){return new we(L.comparator)}function Vw(){return new we(L.comparator)}var wR={asc:"ASCENDING",desc:"DESCENDING"},ER={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DR={and:"AND",or:"OR"},Sf=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Nf(t,e){return t.useProto3Json||su(e)?e:{value:e}}function Vc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TR(t,e){return Vc(t,e.toTimestamp())}function jt(t){return he(!!t),G.fromTimestamp(function(n){let r=sn(n);return new Pe(r.seconds,r.nanos)}(t))}function Fp(t,e){return Mf(t,e).canonicalString()}function Mf(t,e){let n=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function EE(t){let e=ve.fromString(t);return he(AE(e)),e}function xf(t,e){return Fp(t.databaseId,e.path)}function Gh(t,e){let n=EE(e);if(n.get(1)!==t.databaseId.projectId)throw new k(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new L(TE(n))}function DE(t,e){return Fp(t.databaseId,e)}function bR(t){let e=EE(t);return e.length===4?ve.emptyPath():TE(e)}function Rf(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TE(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Lw(t,e,n){return{name:xf(t,e),fields:n.value.mapValue.fields}}function CR(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(he(f===void 0||typeof f=="string"),Je.fromBase64String(f||"")):(he(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Je.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?N.UNKNOWN:IE(d.code);return new k(f,d.message||"")}(o);n=new kc(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Gh(t,r.document.name),s=jt(r.document.updateTime),o=r.document.createTime?jt(r.document.createTime):G.min(),c=new ct({mapValue:{fields:r.document.fields}}),u=bt.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new vi(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Gh(t,r.document),s=r.readTime?jt(r.readTime):G.min(),o=bt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new vi([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Gh(t,r.document),s=r.removedTargetIds||[];n=new vi([],s,i,null)}else{if(!("filter"in e))return B();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new bf(i,s),c=r.targetId;n=new Oc(c,o)}}return n}function AR(t,e){let n;if(e instanceof Ir)n={update:Lw(t,e.key,e.value)};else if(e instanceof Gs)n={delete:xf(t,e.key)};else if(e instanceof Ht)n={update:Lw(t,e.key,e.data),updateMask:FR(e.fieldMask)};else{if(!(e instanceof wf))return B();n={verify:xf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof Ai)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _r)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Si)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw B()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:TR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(t,e.precondition)),n}function SR(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?jt(i.updateTime):jt(s);return o.isEqual(G.min())&&(o=jt(s)),new If(o,i.transformResults||[])}(n,e))):[]}function NR(t,e){return{documents:[DE(t,e.path)]}}function MR(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DE(t,i);let s=function(d){if(d.length!==0)return CE(Ct.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(y){return{field:gi(y.field),direction:PR(y.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=Nf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function xR(t){let e=bR(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){he(r===1);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){let y=bE(p);return y instanceof Ct&&nE(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(S){return new bi(mi(S.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(p){let y;return y=typeof p=="object"?p.value:p,su(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,I=p.values||[];return new Ti(I,y)}(n.startAt));let d=null;return n.endAt&&(d=function(p){let y=!p.before,I=p.values||[];return new Ti(I,y)}(n.endAt)),rR(e,i,o,s,c,"F",u,d)}function RR(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=mi(n.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=mi(n.unaryFilter.field);return Ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=mi(n.unaryFilter.field);return Ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=mi(n.unaryFilter.field);return Ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(t):t.fieldFilter!==void 0?function(n){return Ce.create(mi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ct.create(n.compositeFilter.filters.map(r=>bE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B()}}(n.compositeFilter.op))}(t):B()}function PR(t){return wR[t]}function OR(t){return ER[t]}function kR(t){return DR[t]}function gi(t){return{fieldPath:t.canonicalString()}}function mi(t){return ut.fromServerFormat(t.fieldPath)}function CE(t){return t instanceof Ce?function(n){if(n.op==="=="){if(Tw(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NAN"}};if(Dw(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tw(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NOT_NAN"}};if(Dw(n.value))return{unaryFilter:{field:gi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gi(n.field),op:OR(n.op),value:n.value}}}(t):t instanceof Ct?function(n){let r=n.getFilters().map(i=>CE(i));return r.length===1?r[0]:{compositeFilter:{op:kR(n.op),filters:r}}}(t):B()}function FR(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function AE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ws=class t{constructor(e,n,r,i,s=G.min(),o=G.min(),c=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Pf=class{constructor(e){this.ct=e}};function VR(t){let e=xR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_f(e,e.limit,"L"):e}var Lc=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ie(e.integerValue));else if("doubleValue"in e){let r=Ie(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),$s(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=sn(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(xn(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Xw(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):B()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),L.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Lc.bt=new Lc;var Of=class{constructor(){this._n=new kf}addToCollectionParentIndex(e,n){return this._n.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(gr.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},kf=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(ve.comparator)).toArray()}};var p$=new Uint8Array(0);var Ft=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(41943040,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);var Ks=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Ff=class{constructor(){this.changes=new Rn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Vf=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Lf=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Bs(r.mutation,i,mt.empty(),Pe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,X()).next(()=>r))}getLocalViewOfDocuments(e,n,r=X()){let i=dr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Vs();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=dr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,X()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=on(),o=js(),c=function(){return js()}();return n.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Ht)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Bs(f.mutation,d,f.mutation.getFieldMask(),Pe.now())):o.set(d.key,mt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return c.set(d,new Vf(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=js(),i=new we((o,c)=>o-c),s=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(u=>{let d=n.get(u);if(d===null)return;let f=r.get(u)||mt.empty();f=c.applyToLocalView(d,f),r.set(u,f);let p=(i.get(c.batchId)||X()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,p=dE();f.forEach(y=>{if(!s.has(y)){let I=vE(n.get(y),r.get(y));I!==null&&p.set(y,I),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return L.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):R.resolve(dr()),c=-1,u=s;return o.next(d=>R.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?R.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,X())).next(f=>({batchId:c,changes:lE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new L(n)).next(r=>{let i=Vs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Vs();return this.indexManager.getCollectionParents(e,s).next(c=>R.forEach(c,u=>{let d=function(p,y){return new yr(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,bt.newInvalidDocument(f)))});let c=Vs();return o.forEach((u,d)=>{let f=s.get(u);f!==void 0&&Bs(f.mutation,d,mt.empty(),Pe.now()),au(n,d)&&(c=c.insert(u,d))}),c})}};var Uf=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return R.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jt(i.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:VR(i.bundledQuery),readTime:jt(i.readTime)}}(n)),R.resolve()}};var jf=class{constructor(){this.overlays=new we(L.comparator),this.hr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let r=dr();return R.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),R.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){let i=dr(),s=n.length+1,o=new L(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new we((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=dr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=dr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return R.resolve(c)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Tf(n,r));let s=this.hr.get(n);s===void 0&&(s=X(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Qs=class{constructor(){this.Pr=new qe(be.Ir),this.Tr=new qe(be.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new be(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new be(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new L(new ve([])),r=new be(n,e),i=new be(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new L(new ve([])),r=new be(n,e),i=new be(n,e+1),s=X();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new be(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},be=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return L.comparator(e.key,n.key)||ae(e.pr,n.pr)}static Er(e,n){return ae(e.pr,n.pr)||L.comparator(e.key,n.key)}};var Bf=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new qe(be.Ir)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ef(s,n,r,i);this.mutationQueue.push(o);for(let c of i)this.wr=this.wr.add(new be(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,n){return R.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new be(n,0),i=new be(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let c=this.Sr(o.pr);s.push(c)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ae);return n.forEach(i=>{let s=new be(i,0),o=new be(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{r=r.add(c.pr)})}),R.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;L.isDocumentKey(s)||(s=s.child(""));let o=new be(new L(s),0),c=new qe(ae);return this.wr.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.pr)),!0)},o),R.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){he(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return R.forEach(n.mutations,i=>{let s=new be(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new be(n,0),i=this.wr.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var $f=class{constructor(e){this.vr=e,this.docs=function(){return new we(L.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=on();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=on(),o=n.path,c=new L(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Wx(zx(f),r)<=0||(i.has(f.key)||au(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,n,r,i){B()}Fr(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Hf(this)}getSize(e){return R.resolve(this.size)}},Hf=class extends Ff{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var qf=class{constructor(e){this.persistence=e,this.Mr=new Rn(n=>Pp(n),Op),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Qs,this.targetCount=0,this.Lr=Ks.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),R.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ks(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.qn(n),R.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),R.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this.Nr.containsKey(n))}};var Gf=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Jw(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new qf(this),this.indexManager=new Of,this.remoteDocumentCache=function(i){return new $f(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Pf(n),this.$r=new Uf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jf,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Bf(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new zf(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return R.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},zf=class extends rf{constructor(e){super(),this.currentSequenceNumber=e}},Wf=class t{constructor(e){this.persistence=e,this.zr=new Qs,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw B()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),R.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Jr,r=>{let i=L.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,G.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return R.or([()=>R.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Kf=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=X(),i=X();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Qf=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yf=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ew()?8:Qx(at())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Qf;return this.Ji(e,n,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(e,n,o,c.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Fs()<=Z.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),R.resolve()):(Fs()<=Z.DEBUG&&F("QueryEngine","Query:",pi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Fs()<=Z.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ut(n))):R.resolve())}ji(e,n){if(Sw(n))return R.resolve(null);let r=Ut(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_f(n,null,"F"),r=Ut(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=X(...s);return this.zi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.Zi(n,c);return this.Xi(n,d,o,u.readTime)?this.ji(e,_f(n,null,"F")):this.es(e,d,n,u)}))})))}Hi(e,n,r,i){return Sw(n)||i.isEqual(G.min())?R.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?R.resolve(null):(Fs()<=Z.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pi(n)),this.es(e,o,n,Gx(i,-1)).next(c=>c))})}Zi(e,n){let r=new qe(cE(e));return n.forEach((i,s)=>{au(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Fs()<=Z.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",pi(n)),this.zi.getDocumentsMatchingQuery(e,n,gr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Jf=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new we(ae),this.rs=new Rn(s=>Pp(s),Op),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function LR(t,e,n,r){return new Jf(t,e,n,r)}function SE(t,e){return A(this,null,function*(){let n=q(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=X();for(let d of i){o.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({us:d,removedBatchIds:o,addedBatchIds:c}))})})})}function UR(t,e){let n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){let p=d.batch,y=p.keys(),I=R.resolve();return y.forEach(S=>{I=I.next(()=>f.getEntry(u,S)).next(x=>{let M=d.docVersions.get(S);he(M!==null),x.version.compareTo(M)<0&&(p.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),f.addEntry(x)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=X();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function NE(t){let e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function jR(t,e){let n=q(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let c=[];e.targetChanges.forEach((f,p)=>{let y=i.get(p);if(!y)return;c.push(n.Qr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(s,f.addedDocuments,p)));let I=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(Je.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(p,I),function(x,M,O){return x.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(y,I,f)&&c.push(n.Qr.updateTargetData(s,I))});let u=on(),d=X();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(BR(s,o,e.documentUpdates).next(f=>{u=f.cs,d=f.ls})),!r.isEqual(G.min())){let f=n.Qr.getLastRemoteSnapshotVersion(s).next(p=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return R.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.ns=i,s))}function BR(t,e,n){let r=X(),i=X();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=on();return n.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(G.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):F("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{cs:o,ls:i}})}function $R(t,e){let n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HR(t,e){let n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ws(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Zf(t,e,n){return A(this,null,function*(){let r=q(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!no(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Uw(t,e,n){let r=q(t),i=G.min(),s=X();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){let p=q(u),y=p.rs.get(f);return y!==void 0?R.resolve(p.ns.get(y)):p.Qr.getTargetData(d,f)}(r,o,Ut(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:G.min(),n?s:X())).next(c=>(qR(r,sR(e),c),{documents:c,hs:s})))}function qR(t,e,n){let r=t.ss.get(e)||G.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var Uc=class{constructor(){this.activeTargetIds=dR()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Xf=class{constructor(){this.no=new Uc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Uc,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ep=class{io(e){}shutdown(){}};var jc=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Dc=null;function zh(){return Dc===null?Dc=function(){return 268435456+Math.round(2147483648*Math.random())}():Dc++,"0x"+Dc.toString(16)}var GR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var tp=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var He="WebChannelConnection",np=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let c=zh(),u=this.vo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,s,o),this.Mo(n,u,d,i).then(f=>(F("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw Ii("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}xo(n,r,i,s,o,c){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=GR[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=zh();return new Promise((o,c)=>{let u=new Uh;u.setWithCredentials(!0),u.listenOnce(Bh.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ks.NO_ERROR:let f=u.getResponseJson();F(He,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case ks.TIMEOUT:F(He,`RPC '${e}' ${s} timed out`),c(new k(N.DEADLINE_EXCEEDED,"Request time out"));break;case ks.HTTP_ERROR:let p=u.getStatus();if(F(He,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let I=y?.error;if(I&&I.status&&I.message){let S=function(M){let O=M.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(O)>=0?O:N.UNKNOWN}(I.status);c(new k(S,I.message))}else c(new k(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new k(N.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{F(He,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);F(He,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Oo(e,n,r){let i=zh(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qh(),c=Hh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new jh({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=s.join("");F(He,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=o.createWebChannel(f,u),y=!1,I=!1,S=new tp({lo:M=>{I?F(He,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(F(He,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),F(He,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},ho:()=>p.close()}),x=(M,O,U)=>{M.listen(O,V=>{try{U(V)}catch(W){setTimeout(()=>{throw W},0)}})};return x(p,fi.EventType.OPEN,()=>{I||(F(He,`RPC '${e}' stream ${i} transport opened.`),S.mo())}),x(p,fi.EventType.CLOSE,()=>{I||(I=!0,F(He,`RPC '${e}' stream ${i} transport closed`),S.po())}),x(p,fi.EventType.ERROR,M=>{I||(I=!0,Ii(He,`RPC '${e}' stream ${i} transport errored:`,M),S.po(new k(N.UNAVAILABLE,"The operation could not be completed")))}),x(p,fi.EventType.MESSAGE,M=>{var O;if(!I){let U=M.data[0];he(!!U);let V=U,W=V.error||((O=V[0])===null||O===void 0?void 0:O.error);if(W){F(He,`RPC '${e}' stream ${i} received error:`,W);let fe=W.status,z=function(v){let w=Te[v];if(w!==void 0)return IE(w)}(fe),E=W.message;z===void 0&&(z=N.INTERNAL,E="Unknown error status: "+fe+" with message "+W.message),I=!0,S.po(new k(z,E)),p.close()}else F(He,`RPC '${e}' stream ${i} received:`,U),S.yo(U)}}),x(c,$h.STAT_EVENT,M=>{M.stat===wc.PROXY?F(He,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===wc.NOPROXY&&F(He,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.fo()},0),S}};function Wh(){return typeof document<"u"?document:null}function cu(t){return new Sf(t,!0)}var Bc=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var $c=class{constructor(e,n,r,i,s,o,c,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Bc(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return A(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return A(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return A(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(rn(n.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new k(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>A(this,null,function*(){this.state=0,this.start()}))}c_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rp=class extends $c{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=CR(this.serializer,e),r=function(s){if(!("targetChange"in s))return G.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?jt(o.readTime):G.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Rf(this.serializer),n.addTarget=function(s,o){let c,u=o.target;if(c=yf(u)?{documents:NR(s,u)}:{query:MR(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=wE(s,o.resumeToken);let d=Nf(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(G.min())>0){c.readTime=Vc(s,o.snapshotVersion.toTimestamp());let d=Nf(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=RR(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Rf(this.serializer),n.removeTarget=e,this.i_(n)}},ip=class extends $c{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=SR(e.writeResults,e.commitTime),r=jt(e.commitTime);return this.listener.A_(r,n)}return he(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Rf(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>AR(this.serializer,r))};this.i_(n)}};var sp=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new k(N.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Mf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(N.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(e,Mf(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(N.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},op=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(rn(n),this.y_=!1):F("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var ap=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>A(this,null,function*(){Dr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return A(this,null,function*(){let d=q(u);d.M_.add(4),yield ro(d),d.N_.set("Unknown"),d.M_.delete(4),yield uu(d)})}(this))}))}),this.N_=new op(r,i)}};function uu(t){return A(this,null,function*(){if(Dr(t))for(let e of t.x_)yield e(!0)})}function ro(t){return A(this,null,function*(){for(let e of t.x_)yield e(!1)})}function ME(t,e){let n=q(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),jp(n)?Up(n):Oi(n).Xo()&&Lp(n,e))}function Vp(t,e){let n=q(t),r=Oi(n);n.F_.delete(e),r.Xo()&&xE(n,e),n.F_.size===0&&(r.Xo()?r.n_():Dr(n)&&n.N_.set("Unknown"))}function Lp(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oi(t).P_(e)}function xE(t,e){t.L_.xe(e),Oi(t).I_(e)}function Up(t){t.L_=new Af({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oi(t).start(),t.N_.w_()}function jp(t){return Dr(t)&&!Oi(t).Zo()&&t.F_.size>0}function Dr(t){return q(t).M_.size===0}function RE(t){t.L_=void 0}function zR(t){return A(this,null,function*(){t.N_.set("Online")})}function WR(t){return A(this,null,function*(){t.F_.forEach((e,n)=>{Lp(t,e)})})}function KR(t,e){return A(this,null,function*(){RE(t),jp(t)?(t.N_.D_(e),Up(t)):t.N_.set("Unknown")})}function QR(t,e,n){return A(this,null,function*(){if(t.N_.set("Online"),e instanceof kc&&e.state===2&&e.cause)try{yield function(i,s){return A(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.F_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.F_.delete(c),i.L_.removeTarget(c))})}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hc(t,r)}else if(e instanceof vi?t.L_.Ke(e):e instanceof Oc?t.L_.He(e):t.L_.We(e),!n.isEqual(G.min()))try{let r=yield NE(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.F_.get(d);f&&s.F_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{let f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken(Je.EMPTY_BYTE_STRING,f.snapshotVersion)),xE(s,u);let p=new Ws(f.target,u,d,f.sequenceNumber);Lp(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield Hc(t,r)}})}function Hc(t,e,n){return A(this,null,function*(){if(!no(e))throw e;t.M_.add(1),yield ro(t),t.N_.set("Offline"),n||(n=()=>NE(t.localStore)),t.asyncQueue.enqueueRetryable(()=>A(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield uu(t)}))})}function PE(t,e){return e().catch(n=>Hc(t,n,e))}function lu(t){return A(this,null,function*(){let e=q(t),n=Pn(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;YR(e);)try{let i=yield $R(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,JR(e,i)}catch(i){yield Hc(e,i)}OE(e)&&kE(e)})}function YR(t){return Dr(t)&&t.v_.length<10}function JR(t,e){t.v_.push(e);let n=Pn(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function OE(t){return Dr(t)&&!Pn(t).Zo()&&t.v_.length>0}function kE(t){Pn(t).start()}function ZR(t){return A(this,null,function*(){Pn(t).V_()})}function XR(t){return A(this,null,function*(){let e=Pn(t);for(let n of t.v_)e.d_(n.mutations)})}function eP(t,e,n){return A(this,null,function*(){let r=t.v_.shift(),i=Df.from(r,e,n);yield PE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield lu(t)})}function tP(t,e){return A(this,null,function*(){e&&Pn(t).E_&&(yield function(r,i){return A(this,null,function*(){if(function(o){return vR(o)&&o!==N.ABORTED}(i.code)){let s=r.v_.shift();Pn(r).t_(),yield PE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield lu(r)}})}(t,e)),OE(t)&&kE(t)})}function jw(t,e){return A(this,null,function*(){let n=q(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=Dr(n);n.M_.add(3),yield ro(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield uu(n)})}function nP(t,e){return A(this,null,function*(){let n=q(t);e?(n.M_.delete(2),yield uu(n)):e||(n.M_.add(2),yield ro(n),n.N_.set("Unknown"))})}function Oi(t){return t.B_||(t.B_=function(n,r,i){let s=q(n);return s.f_(),new rp(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:zR.bind(null,t),To:WR.bind(null,t),Ao:KR.bind(null,t),h_:QR.bind(null,t)}),t.x_.push(e=>A(this,null,function*(){e?(t.B_.t_(),jp(t)?Up(t):t.N_.set("Unknown")):(yield t.B_.stop(),RE(t))}))),t.B_}function Pn(t){return t.k_||(t.k_=function(n,r,i){let s=q(n);return s.f_(),new ip(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:ZR.bind(null,t),Ao:tP.bind(null,t),R_:XR.bind(null,t),A_:eP.bind(null,t)}),t.x_.push(e=>A(this,null,function*(){e?(t.k_.t_(),yield lu(t)):(yield t.k_.stop(),t.v_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var cp=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Bp(t,e){if(rn("AsyncQueue",`${e}: ${t}`),no(t))return new k(N.UNAVAILABLE,`${e}: ${t}`);throw t}var qc=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||L.comparator(n.key,r.key):(n,r)=>L.comparator(n.key,r.key),this.keyedMap=Vs(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Gc=class{constructor(){this.q_=new we(L.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):B():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Mi=class t{constructor(e,n,r,i,s,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,qc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var up=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},lp=class{constructor(){this.queries=new Rn(e=>aE(e),ou),this.onlineState="Unknown",this.z_=new Set}};function FE(t,e){return A(this,null,function*(){let n=q(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new up,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let c=Bp(o,`Initialization of query '${pi(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&$p(n)})}function VE(t,e){return A(this,null,function*(){let n=q(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function rP(t,e){let n=q(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let c of o.U_)c.H_(i)&&(r=!0);o.K_=i}}r&&$p(n)}function iP(t,e,n){let r=q(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function $p(t){t.z_.forEach(e=>{e.next()})}var dp,Bw;(Bw=dp||(dp={})).J_="default",Bw.Cache="cache";var zc=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Mi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Mi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==dp.Cache}};var Wc=class{constructor(e){this.key=e}},Kc=class{constructor(e){this.key=e}},hp=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=X(),this.mutatedKeys=X(),this.Ia=cE(e),this.Ta=new qc(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Gc,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let y=i.get(f),I=au(this.query,p)?p:null,S=!!y&&this.mutatedKeys.has(y.key),x=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),M=!1;y&&I?y.data.isEqual(I.data)?S!==x&&(r.track({type:3,doc:I}),M=!0):this.Ra(y,I)||(r.track({type:2,doc:I}),M=!0,(u&&this.Ia(I,u)>0||d&&this.Ia(I,d)<0)&&(c=!0)):!y&&I?(r.track({type:0,doc:I}),M=!0):y&&!I&&(r.track({type:1,doc:y}),M=!0,(u||d)&&(c=!0)),M&&(I?(o=o.add(I),s=x?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:c,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((f,p)=>function(I,S){let x=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return x(I)-x(S)}(f.type,p.type)||this.Ia(f.doc,p.doc)),this.Va(r),i=i!=null&&i;let c=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,d=u!==this.ha;return this.ha=u,o.length!==0||d?{snapshot:new Mi(this.query,e.Ta,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Gc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=X(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Kc(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Wc(r))}),n}pa(e){this.la=e.hs,this.Pa=X();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Mi.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},fp=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},pp=class{constructor(e){this.key=e,this.wa=!1}},gp=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Rn(c=>aE(c),ou),this.Da=new Map,this.Ca=new Set,this.va=new we(L.comparator),this.Fa=new Map,this.Ma=new Qs,this.xa={},this.Oa=new Map,this.Na=Ks.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function sP(t,e,n=!0){return A(this,null,function*(){let r=HE(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield LE(r,e,n,!0),i})}function oP(t,e){return A(this,null,function*(){let n=HE(t);yield LE(n,e,!0,!1)})}function LE(t,e,n,r){return A(this,null,function*(){let i=yield HR(t.localStore,Ut(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",c;return r&&(c=yield aP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ME(t.remoteStore,i),c})}function aP(t,e,n,r,i){return A(this,null,function*(){t.Ba=(p,y,I)=>function(x,M,O,U){return A(this,null,function*(){let V=M.view.da(O);V.Xi&&(V=yield Uw(x.localStore,M.query,!1).then(({documents:E})=>M.view.da(E,V)));let W=U&&U.targetChanges.get(M.targetId),fe=U&&U.targetMismatches.get(M.targetId)!=null,z=M.view.applyChanges(V,x.isPrimaryClient,W,fe);return Hw(x,M.targetId,z.fa),z.snapshot})}(t,p,y,I);let s=yield Uw(t.localStore,e,!0),o=new hp(e,s.hs),c=o.da(s.documents),u=zs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);Hw(t,n,d.fa);let f=new fp(e,n,o);return t.ba.set(e,f),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),d.snapshot})}function cP(t,e,n){return A(this,null,function*(){let r=q(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!ou(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Zf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Vp(r.remoteStore,i.targetId),mp(r,i.targetId)}).catch(to))):(mp(r,i.targetId),yield Zf(r.localStore,i.targetId,!0))})}function uP(t,e){return A(this,null,function*(){let n=q(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Vp(n.remoteStore,r.targetId))})}function lP(t,e,n){return A(this,null,function*(){let r=yP(t);try{let i=yield function(o,c){let u=q(o),d=Pe.now(),f=c.reduce((I,S)=>I.add(S.key),X()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let S=on(),x=X();return u.os.getEntries(I,f).next(M=>{S=M,S.forEach((O,U)=>{U.isValidDocument()||(x=x.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,S)).next(M=>{p=M;let O=[];for(let U of c){let V=yR(U,p.get(U.key).overlayedDocument);V!=null&&O.push(new Ht(U.key,V,eE(V.value.mapValue),nn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,d,O,c)}).next(M=>{y=M;let O=M.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(I,M.batchId,O)})}).then(()=>({batchId:y.batchId,changes:lE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.xa[o.currentUser.toKey()];d||(d=new we(ae)),d=d.insert(c,u),o.xa[o.currentUser.toKey()]=d}(r,i.batchId,n),yield io(r,i.changes),yield lu(r.remoteStore)}catch(i){let s=Bp(i,"Failed to persist write");n.reject(s)}})}function UE(t,e){return A(this,null,function*(){let n=q(t);try{let r=yield jR(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(he(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?he(o.wa):i.removedDocuments.size>0&&(he(o.wa),o.wa=!1))}),yield io(n,r,e)}catch(r){yield to(r)}})}function $w(t,e,n){let r=q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let c=o.view.j_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=q(o);u.onlineState=c;let d=!1;u.queries.forEach((f,p)=>{for(let y of p.U_)y.j_(c)&&(d=!0)}),d&&$p(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dP(t,e,n){return A(this,null,function*(){let r=q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new we(L.comparator);o=o.insert(s,bt.newNoDocument(s,G.min()));let c=X().add(s),u=new Pc(G.min(),new Map,new we(ae),o,c);yield UE(r,u),r.va=r.va.remove(s),r.Fa.delete(e),Hp(r)}else yield Zf(r.localStore,e,!1).then(()=>mp(r,e,n)).catch(to)})}function hP(t,e){return A(this,null,function*(){let n=q(t),r=e.batch.batchId;try{let i=yield UR(n.localStore,e);BE(n,r,null),jE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield io(n,i)}catch(i){yield to(i)}})}function fP(t,e,n){return A(this,null,function*(){let r=q(t);try{let i=yield function(o,c){let u=q(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(he(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);BE(r,e,n),jE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield io(r,i)}catch(i){yield to(i)}})}function jE(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function BE(t,e,n){let r=q(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||$E(t,r)})}function $E(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Vp(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Hp(t))}function Hw(t,e,n){for(let r of n)r instanceof Wc?(t.Ma.addReference(r.key,e),pP(t,r)):r instanceof Kc?(F("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||$E(t,r.key)):B()}function pP(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(F("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Hp(t))}function Hp(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new L(ve.fromString(e)),r=t.Na.next();t.Fa.set(r,new pp(n)),t.va=t.va.insert(n,r),ME(t.remoteStore,new Ws(Ut(kp(n.path)),r,"TargetPurposeLimboResolution",Jw.oe))}}function io(t,e,n){return A(this,null,function*(){let r=q(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((c,u)=>{o.push(r.Ba(u,e,n).then(d=>{if((d||n)&&r.isPrimaryClient){let f=d&&!d.fromCache;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){i.push(d);let f=Kf.Ki(u.targetId,d);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(u,d){return A(this,null,function*(){let f=q(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>R.forEach(d,y=>R.forEach(y.qi,I=>f.persistence.referenceDelegate.addReference(p,y.targetId,I)).next(()=>R.forEach(y.Qi,I=>f.persistence.referenceDelegate.removeReference(p,y.targetId,I)))))}catch(p){if(!no(p))throw p;F("LocalStore","Failed to update sequence numbers: "+p)}for(let p of d){let y=p.targetId;if(!p.fromCache){let I=f.ns.get(y),S=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(S);f.ns=f.ns.insert(y,x)}}})}(r.localStore,s))})}function gP(t,e){return A(this,null,function*(){let n=q(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield SE(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(c=>{c.forEach(u=>{u.reject(new k(N.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield io(n,r.us)}})}function mP(t,e){let n=q(t),r=n.Fa.get(e);if(r&&r.wa)return X().add(r.key);{let i=X(),s=n.Da.get(e);if(!s)return i;for(let o of s){let c=n.ba.get(o);i=i.unionWith(c.view.Ea)}return i}}function HE(t){let e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dP.bind(null,e),e.Sa.h_=rP.bind(null,e.eventManager),e.Sa.ka=iP.bind(null,e.eventManager),e}function yP(t){let e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fP.bind(null,e),e}var Qc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return A(this,null,function*(){this.serializer=cu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return LR(this.persistence,new Yf,e.initialUser,this.serializer)}createPersistence(e){return new Gf(Wf.Hr,this.serializer)}createSharedClientState(e){return new Xf}terminate(){return A(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var yp=class{initialize(e,n){return A(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$w(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gP.bind(null,this.syncEngine),yield nP(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new lp}()}createDatastore(e){let n=cu(e.databaseInfo.databaseId),r=function(s){return new np(s)}(e.databaseInfo);return function(s,o,c,u){return new sp(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new ap(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>$w(this.syncEngine,n,0),function(){return jc.D()?new jc:new ep}())}createSyncEngine(e,n){return function(i,s,o,c,u,d,f){let p=new gp(i,s,o,c,u,d);return f&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return A(this,null,function*(){var e;yield function(r){return A(this,null,function*(){let i=q(r);F("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ro(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Yc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):rn("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var vp=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ne.UNAUTHENTICATED,this.clientId=Ac.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>A(this,null,function*(){F("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>A(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Bp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Kh(t,e){return A(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>A(this,null,function*(){r.isEqual(i)||(yield SE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function qw(t,e){return A(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield _P(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>jw(e.remoteStore,i)),t._onlineComponents=e})}function vP(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function _P(t){return A(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!vP(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),yield Kh(t,new Qc)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield Kh(t,new Qc);return t._offlineComponents})}function qE(t){return A(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield qw(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield qw(t,new yp))),t._onlineComponents})}function IP(t){return qE(t).then(e=>e.syncEngine)}function _p(t){return A(this,null,function*(){let e=yield qE(t),n=e.eventManager;return n.onListen=sP.bind(null,e.syncEngine),n.onUnlisten=cP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uP.bind(null,e.syncEngine),n})}function wP(t,e,n={}){let r=new Vt;return t.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return function(s,o,c,u,d){let f=new Yc({next:y=>{o.enqueueAndForget(()=>VE(s,p)),y.fromCache&&u.source==="server"?d.reject(new k(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new zc(c,f,{includeMetadataChanges:!0,ra:!0});return FE(s,p)}(yield _p(t),t.asyncQueue,e,n,r)})),r.promise}function GE(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Gw=new Map;function zE(t,e,n){if(!n)throw new k(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EP(t,e,n,r){if(e===!0&&r===!0)throw new k(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zw(t){if(!L.isDocumentKey(t))throw new k(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ww(t){if(L.isDocumentKey(t))throw new k(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function du(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function Bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=du(t);throw new k(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Jc=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new k(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xi=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Qh;switch(r.type){case"firstParty":return new Xh(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Gw.get(n);r&&(F("ComponentProvider","Removing Datastore"),Gw.delete(n),r.terminate())}(this),Promise.resolve()}};function WE(t,e,n,r={}){var i;let s=(t=Bt(t,xi))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Ne.MOCK_USER;else{c=YI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new k(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ne(d)}t._authCredentials=new Yh(new Cc(c,u))}}var wr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},nt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Mn=class t extends wr{constructor(e,n,r){super(e,n,kp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new L(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function KE(t,e,...n){if(t=$e(t),zE("collection","path",e),t instanceof xi){let r=ve.fromString(e,...n);return Ww(r),new Mn(t,null,r)}{if(!(t instanceof nt||t instanceof Mn))throw new k(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ve.fromString(e,...n));return Ww(r),new Mn(t.firestore,null,r)}}function QE(t,e,...n){if(t=$e(t),arguments.length===1&&(e=Ac.newId()),zE("doc","path",e),t instanceof xi){let r=ve.fromString(e,...n);return zw(r),new nt(t,null,new L(r))}{if(!(t instanceof nt||t instanceof Mn))throw new k(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ve.fromString(e,...n));return zw(r),new nt(t.firestore,t instanceof Mn?t.converter:null,new L(r))}}var Ip=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Bc(this,"async_queue_retry"),this.hu=()=>{let n=Wh();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Wh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Wh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Vt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return A(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!no(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw rn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=cp.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&B()}verifyOperationInProgress(){}du(){return A(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function Kw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var an=class extends xi{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Ip}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||JE(this),this._firestoreClient.terminate()}};function YE(t,e){let n=typeof t=="object"?t:Os(),r=typeof t=="string"?t:e||"(default)",i=Fh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=KI("firestore");s&&WE(i,...s)}return i}function qp(t){return t._firestoreClient||JE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function JE(t){var e,n,r;let i=t._freezeSettings(),s=function(c,u,d,f){return new sf(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,GE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new vp(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ys=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Je.fromBase64String(e))}catch(n){throw new k(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ri=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Js=class{constructor(e){this._methodName=e}};var Zs=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var DP=/^__.*__$/,wp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ht(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ir(e,this.data,n,this.fieldTransforms)}},Zc=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ht(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function ZE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var Ep=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return eu(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(ZE(this.fu)&&DP.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Dp=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cu(e)}Fu(e,n,r,i=!1){return new Ep({fu:e,methodName:n,vu:r,path:ut.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Gp(t){let e=t._freezeSettings(),n=cu(t._databaseId);return new Dp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TP(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);zp("Data must be an object, but it was:",o,r);let c=XE(r,o),u,d;if(s.merge)u=new mt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let y=Tp(e,p,n);if(!o.contains(y))throw new k(N.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);tD(f,y)||f.push(y)}u=new mt(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new wp(new ct(c),u,d)}var Xc=class t extends Js{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function bP(t,e,n,r){let i=t.Fu(1,e,n);zp("Data must be an object, but it was:",i,r);let s=[],o=ct.empty();Er(r,(u,d)=>{let f=Wp(e,u,n);d=$e(d);let p=i.Su(f);if(d instanceof Xc)s.push(f);else{let y=so(d,p);y!=null&&(s.push(f),o.set(f,y))}});let c=new mt(s);return new Zc(o,c,i.fieldTransforms)}function CP(t,e,n,r,i,s){let o=t.Fu(1,e,n),c=[Tp(e,r,n)],u=[i];if(s.length%2!=0)throw new k(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)c.push(Tp(e,s[y])),u.push(s[y+1]);let d=[],f=ct.empty();for(let y=c.length-1;y>=0;--y)if(!tD(d,c[y])){let I=c[y],S=u[y];S=$e(S);let x=o.Su(I);if(S instanceof Xc)d.push(I);else{let M=so(S,x);M!=null&&(d.push(I),f.set(I,M))}}let p=new mt(d);return new Zc(f,p,o.fieldTransforms)}function AP(t,e,n,r=!1){return so(n,t.Fu(r?4:3,e))}function so(t,e){if(eD(t=$e(t)))return zp("Unsupported field value:",e,t),XE(t,e);if(t instanceof Js)return function(r,i){if(!ZE(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=so(c,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Pe.fromDate(r);return{timestampValue:Vc(i.serializer,s)}}if(r instanceof Pe){let s=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vc(i.serializer,s)}}if(r instanceof Zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ys)return{bytesValue:wE(i.serializer,r._byteString)};if(r instanceof nt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fp(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${du(r)}`)}(t,e)}function XE(t,e){let n={};return Zw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(t,(r,i)=>{let s=so(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function eD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof Zs||t instanceof Ys||t instanceof nt||t instanceof Js)}function zp(t,e,n){if(!eD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=du(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Tp(t,e,n){if((e=$e(e))instanceof Ri)return e._internalPath;if(typeof e=="string")return Wp(t,e);throw eu("Field path arguments must be of type string or ",t,!1,void 0,n)}var SP=new RegExp("[~\\*/\\[\\]]");function Wp(t,e,n){if(e.search(SP)>=0)throw eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ri(...e.split("."))._internalPath}catch{throw eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function eu(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new k(N.INVALID_ARGUMENT,c+t+u)}function tD(t,e){return t.some(n=>n.isEqual(e))}var tu=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new bp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Kp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},bp=class extends tu{data(){return super.data()}};function Kp(t,e){return typeof e=="string"?Wp(t,e):e instanceof Ri?e._internalPath:e._delegate._internalPath}function nD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xs=class{},Cp=class extends Xs{};function NP(t,e,...n){let r=[];e instanceof Xs&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof Ap).length,c=s.filter(u=>u instanceof nu).length;if(o>1||o>0&&c>0)throw new k(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var nu=class t extends Cp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return rD(e._query,n),new wr(e.firestore,e.converter,vf(e._query,n))}_parse(e){let n=Gp(e.firestore);return function(s,o,c,u,d,f,p){let y;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new k(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Yw(p,f);let I=[];for(let S of p)I.push(Qw(u,s,S));y={arrayValue:{values:I}}}else y=Qw(u,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Yw(p,f),y=AP(c,o,p,f==="in"||f==="not-in");return Ce.create(d,f,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function MP(t,e,n){let r=e,i=Kp("where",t);return nu._create(i,r,n)}var Ap=class t extends Xs{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ct.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let u of c)rD(o,u),o=vf(o,u)}(e._query,n),new wr(e.firestore,e.converter,vf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Qw(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new k(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oE(e)&&n.indexOf("/")!==-1)throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ve.fromString(n));if(!L.isDocumentKey(r))throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ew(t,new L(r))}if(n instanceof nt)return Ew(t,n._key);throw new k(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${du(n)}.`)}function Yw(t,e){if(!Array.isArray(t)||t.length===0)throw new k(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rD(t,e){let n=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Sp=class{convertValue(e,n="none"){switch(mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ie(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw B()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Er(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Zs(Ie(e.latitude),Ie(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=xp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hs(e));default:return null}}convertTimestamp(e){let n=sn(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ve.fromString(e);he(AE(r));let i=new xc(r.get(1),r.get(3)),s=new L(r.popFirst(5));return i.isEqual(n)||rn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function xP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var fr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ru=class extends tu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new _i(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Kp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},_i=class extends ru{data(e={}){return super.data(e)}},iu=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _i(this._firestore,this._userDataWriter,r.key,r,new fr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new _i(i._firestore,i._userDataWriter,c.doc.key,c.doc,new fr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new _i(i._firestore,i._userDataWriter,c.doc.key,c.doc,new fr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:RP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function RP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}var eo=class extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}};function iD(t){t=Bt(t,wr);let e=Bt(t.firestore,an),n=qp(e),r=new eo(e);return nD(t._query),wP(n,t._query).then(i=>new iu(e,r,t,i))}function PP(t,e,n,...r){t=Bt(t,nt);let i=Bt(t.firestore,an),s=Gp(i),o;return o=typeof(e=$e(e))=="string"||e instanceof Ri?CP(s,"updateDoc",t._key,e,n,r):bP(s,"updateDoc",t._key,e),Yp(i,[o.toMutation(t._key,nn.exists(!0))])}function OP(t){return Yp(Bt(t.firestore,an),[new Gs(t._key,nn.none())])}function kP(t,e){let n=Bt(t.firestore,an),r=QE(t),i=xP(t.converter,e);return Yp(n,[TP(Gp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function Qp(t,...e){var n,r,i;t=$e(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Kw(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Kw(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,d,f;if(t instanceof nt)d=Bt(t.firestore,an),f=kp(t._key.path),u={next:p=>{e[o]&&e[o](FP(d,t,p))},error:e[o+1],complete:e[o+2]};else{let p=Bt(t,wr);d=Bt(p.firestore,an),f=p._query;let y=new eo(d);u={next:I=>{e[o]&&e[o](new iu(d,y,p,I))},error:e[o+1],complete:e[o+2]},nD(t._query)}return function(y,I,S,x){let M=new Yc(x),O=new zc(I,M,S);return y.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return FE(yield _p(y),O)})),()=>{M.$a(),y.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return VE(yield _p(y),O)}))}}(qp(d),f,c,u)}function Yp(t,e){return function(r,i){let s=new Vt;return r.asyncQueue.enqueueAndForget(()=>A(this,null,function*(){return lP(yield IP(r),i,s)})),s.promise}(qp(t),e)}function FP(t,e,n){let r=n.docs.get(e._key),i=new eo(t);return new ru(t,i,e._key,r,new fr(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Pi=i})(hi),Sn(new gt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new an(new Jh(r.getProvider("auth-internal")),new tf(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new k(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Se(_w,"4.6.3",e),Se(_w,"4.6.3","esm2017")})();var VP="firebase",LP="10.12.2";Se(VP,LP,"app");var Fi=new ir("ANGULARFIRE2_VERSION");function Zp(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ao=(t,e)=>{let n=e?[e]:_c(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},oo=class{constructor(){return ao(UP)}},UP="app-check";function ki(){}var hu=class{zone;delegate;constructor(e,n=pl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Jp=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ki,{},ki,ki)),n.pipe(_l({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},co=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new hu(Zone.current)),this.insideAngular=n.run(()=>new hu(Zone.current,fl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(Ue(xe))};static \u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fu(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function jP(t){return fu().ngZone.runOutsideAngular(()=>t())}function Tr(t){return fu().ngZone.run(()=>t())}function BP(t){return $P(fu())(t)}function $P(t){return function(n){return n=n.lift(new Jp(t.ngZone)),n.pipe(gn(t.outsideAngular),pn(t.insideAngular))}}var HP=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Tr(()=>t.apply(void 0,r))},On=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Tr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ki,{},ki,ki))),r[s]=HP(r[s],n));let i=jP(()=>t.apply(this,r));if(!e)if(i instanceof Q){let s=fu();return i.pipe(gn(s.outsideAngular),pn(s.insideAngular))}else return Tr(()=>i);return i instanceof Q?i.pipe(BP):i instanceof Promise?Tr(()=>new Promise((s,o)=>i.then(c=>Tr(()=>s(c)),c=>Tr(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Tr(()=>i)};var br=class{constructor(e){return e}},uo=class{constructor(){return _c()}};function qP(t){return t&&t.length===1?t[0]:new br(Os())}var Xp=new re("angularfire2._apps"),GP={provide:br,useFactory:qP,deps:[[new Wt,Xp]]},zP={provide:uo,deps:[[new Wt,Xp]]};function WP(t){return(e,n)=>{let r=n.get(Ud);Se("angularfire",Fi.full,"core"),Se("angularfire",Fi.full,"app"),Se("angular",B_.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new br(i)}}function U$(t,...e){return Is([GP,zP,{provide:Xp,useFactory:WP(t),multi:!0,deps:[xe,Yt,co,...e]}])}var j$=On(Vh,!0);function hD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var fD=hD,pD=new en("auth","Firebase",hD());var yu=new Cn("@firebase/auth");function KP(t,...e){yu.logLevel<=Z.WARN&&yu.warn(`Auth (${hi}): ${t}`,...e)}function gu(t,...e){yu.logLevel<=Z.ERROR&&yu.error(`Auth (${hi}): ${t}`,...e)}function sD(t,...e){throw dg(t,...e)}function lg(t,...e){return dg(t,...e)}function gD(t,e,n){let r=Object.assign(Object.assign({},fD()),{[e]:n});return new en("auth","Firebase",r).create(e,{appName:t.name})}function mu(t){return gD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return pD.create(t,...e)}function ce(t,e,...n){if(!t)throw dg(e,...n)}function lo(t){let e="INTERNAL ASSERTION FAILED: "+t;throw gu(e),new Error(e)}function vu(t,e){t||lo(e)}function QP(){return oD()==="http:"||oD()==="https:"}function oD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function YP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QP()||ZI()||"connection"in navigator)?navigator.onLine:!0}function JP(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ar=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,vu(n>e,"Short delay should be less than long delay!"),this.isMobile=JI()||XI()}get(){return YP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ZP(t,e){vu(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var _u=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var XP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eO=new Ar(3e4,6e4);function mD(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Du(s,o,c,u){return A(this,arguments,function*(t,e,n,r,i={}){return yD(t,i,()=>A(this,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let p=wh(Object.assign({key:t.config.apiKey},f)).slice(1),y=yield t._getAdditionalHeaders();return y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode),_u.fetch()(vD(t,t.config.apiHost,n,p),Object.assign({method:e,headers:y,referrerPolicy:"no-referrer"},d))}))})}function yD(t,e,n){return A(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},XP),e);try{let i=new ng(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw pu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw pu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw pu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw pu(t,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw gD(t,f,d);sD(t,f)}}catch(i){if(i instanceof pt)throw i;sD(t,"network-request-failed",{message:String(i)})}})}function vD(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?ZP(t.config,i):`${t.config.apiScheme}://${i}`}var ng=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(lg(this.auth,"network-request-failed")),eO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function pu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=lg(t,e,r);return i.customData._tokenResponse=n,i}function tO(t,e){return A(this,null,function*(){return Du(t,"POST","/v1/accounts:delete",e)})}function _D(t,e){return A(this,null,function*(){return Du(t,"POST","/v1/accounts:lookup",e)})}function ho(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function hg(t,e=!1){return A(this,null,function*(){let n=$e(t),r=yield n.getIdToken(e),i=ID(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ho(eg(i.auth_time)),issuedAtTime:ho(eg(i.iat)),expirationTime:ho(eg(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function eg(t){return Number(t)*1e3}function ID(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gu("JWT malformed, contained fewer than 3 sections"),null;try{let i=vh(n);return i?JSON.parse(i):(gu("Failed to decode base64 JWT payload"),null)}catch(i){return gu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function aD(t){let e=ID(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function rg(t,e,n=!1){return A(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof pt&&nO(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function nO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ig=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>A(this,null,function*(){yield this.iteration()}),n)}iteration(){return A(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var po=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ho(this.lastLoginAt),this.creationTime=ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Iu(t){return A(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield rg(t,_D(n,{idToken:r}));ce(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?wD(s.providerUserInfo):[],c=rO(t.providerData,o),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!c?.length,f=u?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new po(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function fg(t){return A(this,null,function*(){let e=$e(t);yield Iu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function rO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wD(t){return t.map(e=>{var{providerId:n}=e,r=gl(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function iO(t,e){return A(this,null,function*(){let n=yield yD(t,{},()=>A(this,null,function*(){let r=wh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=vD(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",_u.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function sO(t,e){return A(this,null,function*(){return Du(t,"POST","/v2/accounts:revokeToken",mD(t,e))})}var fo=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");let n=aD(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return A(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return A(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield iO(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return lo("not implemented")}};function kn(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var go=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=gl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ig(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new po(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return A(this,null,function*(){let n=yield rg(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return hg(this,e)}reload(){return fg(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return A(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Iu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return A(this,null,function*(){if(di(this.auth.app))return Promise.reject(mu(this.auth));let e=yield this.getIdToken();return yield rg(this,tO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,d,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(d=n.createdAt)!==null&&d!==void 0?d:void 0,U=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:V,emailVerified:W,isAnonymous:fe,providerData:z,stsTokenManager:E}=n;ce(V&&E,e,"internal-error");let m=fo.fromJSON(this.name,E);ce(typeof V=="string",e,"internal-error"),kn(p,e.name),kn(y,e.name),ce(typeof W=="boolean",e,"internal-error"),ce(typeof fe=="boolean",e,"internal-error"),kn(I,e.name),kn(S,e.name),kn(x,e.name),kn(M,e.name),kn(O,e.name),kn(U,e.name);let v=new t({uid:V,auth:e,email:y,emailVerified:W,displayName:p,isAnonymous:fe,photoURL:S,phoneNumber:I,tenantId:x,stsTokenManager:m,createdAt:O,lastLoginAt:U});return z&&Array.isArray(z)&&(v.providerData=z.map(w=>Object.assign({},w))),M&&(v._redirectEventId=M),v}static _fromIdTokenResponse(e,n,r=!1){return A(this,null,function*(){let i=new fo;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Iu(s),s})}static _fromGetAccountInfoResponse(e,n,r){return A(this,null,function*(){let i=n.users[0];ce(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?wD(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new fo;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new po(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var cD=new Map;function Cr(t){vu(t instanceof Function,"Expected a class definition");let e=cD.get(t);return e?(vu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cD.set(t,e),e)}var oO=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return A(this,null,function*(){return!0})}_set(n,r){return A(this,null,function*(){this.storage[n]=r})}_get(n){return A(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return A(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),sg=oO;function tg(t,e,n){return`firebase:${t}:${e}:${n}`}var wu=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=tg(this.userKey,i.apiKey,s),this.fullPersistenceKey=tg("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return A(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?go._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return A(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return A(this,null,function*(){if(!n.length)return new t(Cr(sg),e,r);let i=(yield Promise.all(n.map(d=>A(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Cr(sg),o=tg(r,e.config.apiKey,e.name),c=null;for(let d of n)try{let f=yield d._get(o);if(f){let p=go._fromJSON(e,f);d!==s&&(c=p),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(d=>A(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new t(s,e,r))})}};function uD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hO(e))return"Blackberry";if(fO(e))return"Webos";if(cO(e))return"Safari";if((e.includes("chrome/")||uO(e))&&!e.includes("edge/"))return"Chrome";if(dO(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function aO(t=at()){return/firefox\//i.test(t)}function cO(t=at()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uO(t=at()){return/crios\//i.test(t)}function lO(t=at()){return/iemobile/i.test(t)}function dO(t=at()){return/android/i.test(t)}function hO(t=at()){return/blackberry/i.test(t)}function fO(t=at()){return/webos/i.test(t)}function ED(t,e=[]){let n;switch(t){case"Browser":n=uD(at());break;case"Worker":n=`${uD(at())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hi}/${r}`}var og=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return A(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function pO(n){return A(this,arguments,function*(t,e={}){return Du(t,"GET","/v2/passwordPolicy",mD(t,e))})}var gO=6,ag=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:gO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var cg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eu(this),this.idTokenSubscription=new Eu(this),this.beforeStateQueue=new og(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(()=>A(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield wu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return A(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return A(this,null,function*(){try{let n=yield _D(this,{idToken:e}),r=yield go._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return A(this,null,function*(){var n;if(di(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return A(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return A(this,null,function*(){try{yield Iu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=JP()}_delete(){return A(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return A(this,null,function*(){if(di(this.app))return Promise.reject(mu(this));let n=e?$e(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return A(this,null,function*(){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>A(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return A(this,null,function*(){return di(this.app)?Promise.reject(mu(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return di(this.app)?Promise.reject(mu(this)):this.queue(()=>A(this,null,function*(){yield this.assertedPersistence.setPersistence(Cr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return A(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return A(this,null,function*(){let e=yield pO(this),n=new ag(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new en("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return A(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield sO(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return A(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return A(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Cr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=yield wu.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return A(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>A(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return A(this,null,function*(){if(e===this.currentUser)return this.queue(()=>A(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return A(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ED(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return A(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return A(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&KP(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function mO(t){return $e(t)}var Eu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=nw(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yO={loadJS(){return A(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vO(t){yO=t}function _O(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function IO(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Cr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var Z$=_O("rcb"),X$=new Ar(3e4,6e4);var eH=new Ar(2e3,1e4);var tH=10*60*1e3;var nH=new Ar(3e4,6e4);var rH=new Ar(5e3,15e3);var iH=encodeURIComponent("fac");var lD="@firebase/auth",dD="1.7.4";var ug=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return A(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function wO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EO(t){Sn(new gt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ED(t)},d=new cg(r,i,s,u);return IO(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Sn(new gt("auth-internal",e=>{let n=mO(e.getProvider("auth").getImmediate());return(r=>new ug(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(lD,dD,wO(t)),Se(lD,dD,"esm2017")}var DO=5*60,sH=QI("authIdTokenMaxAge")||DO;function TO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vO({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=lg("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",TO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EO("Browser");var Dk="auth";var Tu=class{constructor(){return ao(Dk)}};var bu=function(){return bu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bu.apply(this,arguments)};var Ck={includeMetadataChanges:!1};function DD(t,e){return e===void 0&&(e=Ck),new Q(function(n){var r=Qp(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function TD(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:bu(bu({},r),(n={},n[e.idField]=t.id,n))}function bD(t){return DD(t,{includeMetadataChanges:!0}).pipe(We(function(e){return e.docs}))}function CD(t,e){return e===void 0&&(e={}),bD(t).pipe(We(function(n){return n.map(function(r){return TD(r,e)})}))}var mo=class{constructor(e){return e}},AD="firestore",pg=class{constructor(){return ao(AD)}};var gg=new re("angularfire2.firestore-instances");function Ak(t,e){let n=Zp(AD,t,e);return n&&new mo(n)}function Sk(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new mo(r)}}var Nk={provide:pg,deps:[[new Wt,gg]]},Mk={provide:mo,useFactory:Ak,deps:[[new Wt,gg],br]};function yG(t,...e){return Se("angularfire",Fi.full,"fst"),Is([Mk,Nk,{provide:gg,useFactory:Sk(t),multi:!0,deps:[xe,Yt,co,uo,[new Wt,Tu],[new Wt,oo],...e]}])}var vG=On(CD,!0);var _G=On(KE,!0);var IG=On(iD,!0);var wG=On(YE,!0);export{Le as a,Ze as b,A as c,Ae as d,Mm as e,Q as f,ll as g,dl as h,hn as i,rs as j,ss as k,_t as l,NT as m,MT as n,xT as o,qn as p,We as q,UT as r,Gn as s,ra as t,BT as u,jr as v,Ym as w,$T as x,os as y,yl as z,HT as A,GT as B,Zm as C,vl as D,zT as E,Xm as F,ey as G,WT as H,KT as I,_l as J,te as K,ge as L,tj as M,re as N,ee as O,Ue as P,ye as Q,us as R,nj as S,me as T,Is as U,cv as V,vn as W,rj as X,sr as Y,ij as Z,sj as _,or as $,Yt as aa,Jr as ba,st as ca,oj as da,aj as ea,KC as fa,Ud as ga,cj as ha,uj as ia,lj as ja,Sa as ka,dj as la,j as ma,od as na,xe as oa,Za as pa,dd as qa,XA as ra,x_ as sa,sS as ta,pS as ua,O_ as va,k_ as wa,CS as xa,gj as ya,Ot as za,mj as Aa,kS as Ba,V_ as Ca,yj as Da,LS as Ea,L_ as Fa,US as Ga,vj as Ha,jS as Ia,_j as Ja,Ij as Ka,wj as La,Ej as Ma,Dj as Na,Es as Oa,JS as Pa,q_ as Qa,Tj as Ra,nc as Sa,bj as Ta,ii as Ua,Qj as Va,W_ as Wa,rI as Xa,_N as Ya,Yj as Za,Jj as _a,Zj as $a,Xj as ab,eB as bb,tB as cb,nB as db,rB as eb,tI as fb,$N as gb,_I as hb,cI as ib,EB as jb,DB as kb,hM as lb,gM as mb,bB as nb,yM as ob,IM as pb,EM as qb,TM as rb,BI as sb,CB as tb,AB as ub,xM as vb,SB as wb,NB as xb,MB as yb,U$ as zb,j$ as Ab,KE as Bb,QE as Cb,NP as Db,MP as Eb,PP as Fb,OP as Gb,kP as Hb,mo as Ib,yG as Jb,vG as Kb,_G as Lb,IG as Mb,wG as Nb};
